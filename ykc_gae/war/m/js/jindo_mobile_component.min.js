/** Jindo Mobile Component(minify:5) : ../www/docs/jindo-mobile/archive/1.5.0/
 *	jindo.m
 *	jindo.m.Component
 *	jindo.m.Transition
 *	jindo.m.UIComponent
 *	jindo.m.LayerEffect
 *	jindo.m.Effect
 *	jindo.m.ContractEffect
 *	jindo.m.ExpandEffect
 *	jindo.m.FadeEffect
 *	jindo.m.FlipEffect
 *	jindo.m.PopEffect
 *	jindo.m.SlideEffect
 *	jindo.m.Touch
 *	jindo.m.Flicking
 *	jindo.m.FlickingAnimation
 *	jindo.m.AlignFlipFlicking
 *	jindo.m.CircularSlideFlicking
 *	jindo.m.CoverFlicking
 *	jindo.m.FlipFlicking
 *	jindo.m.DynamicScrollPlugin
 *	jindo.m.CoreScroll
 *	jindo.m.SlideFlicking
 *	jindo.m.Validator
 *	jindo.m.NumberValidator
 *	jindo.m.CurrencyValidator
 *	jindo.m.DateValidator
 *	jindo.m.EmailValidator
 *	jindo.m.RequireValidator
 *	jindo.m.TelValidator
 *	jindo.m.UrlValidator
 *	jindo.m.Accordion
 *	jindo.m.AjaxHistory
 *	jindo.m.Calendar
 *	jindo.m.CheckRadioCore
 *	jindo.m.CheckBox
 *	jindo.m.CircularFlicking
 *	jindo.m.CorePagination
 *	jindo.m.CoreTab
 *	jindo.m.Datepicker
 *	jindo.m.Dialog
 *	jindo.m.DragArea
 *	jindo.m.DropArea
 *	jindo.m.LayerPosition
 *	jindo.m.ScrollEnd
 *	jindo.m.FloatingLayer
 *	jindo.m.Scroll
 *	jindo.m.IndexScroll
 *	jindo.m.LayerManager
 *	jindo.m.Loading
 *	jindo.m.MoreContentButton
 *	jindo.m.PageLayoutUI
 *	jindo.m.PageNavigation
 *	jindo.m.PreventClickEvent
 *	jindo.m.RadioButton
 *	jindo.m.RevealSidebarUI
 *	jindo.m.Selectbox
 *	jindo.m.SlideTab
 *	jindo.m.Slider
 *	jindo.m.Tab
 *	jindo.m.TextArea
 *	jindo.m.Validation
 *	jindo.m.TextInput
 *	jindo.m.ToggleSlider
 */
(function(_namespace){var jsTags=document.getElementsByTagName("script");var jsTag=jsTags[jsTags.length-1];if(jsTag&&/[\?&]jindo=([^&]+)/.test(jsTag.src)) {_namespace=RegExp.$1;}var jindo=window[_namespace];
if(typeof jindo.m=="undefined"&&typeof Node!="undefined"){var ___Old__addEventListener___=Node.prototype.addEventListener;Node.prototype.addEventListener=function(a,b,c){var d=arguments.callee;return d&&a==="click"&&this.tagName==="A"&&(this.___listeners___||(this.___listeners___=[])).push({listener:b,useCapture:c}),___Old__addEventListener___.apply(this,arguments)};var ___Old__removeEventListener___=Node.prototype.removeEventListener;Node.prototype.removeEventListener=function(a,b,c){var d=arguments.callee;return d&&a==="click"&&this.tagName==="A"&&this.___listeners___&&this.___listeners___.pop(),___Old__removeEventListener___.apply(this,arguments)}}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,16)}}(),window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout}(),jindo.m=function(){function g(){"ontouchstart"in window?(f.start="touchstart",f.move="touchmove",f.end="touchend",f.cancel="touchcancel"):window.navigator.msPointerEnabled&&(f.start="MSPointerDown",f.move="MSPointerMove",f.end="MSPointerUp",f.cancel="MSPointerCancel")}function h(){var a="onorientationchange"in window?"orientationchange":"resize";return e.android&&e.version==="2.1"&&(a="resize"),a}function i(){var c=null,d=h();if(d==="resize"){var e=document.documentElement.clientWidth;e<b?c=!0:e==b?c=a:c=!1,b=e}else{var f=window.orientation;if(f===0||f==180)c=!0;else if(f==90||f==-90)c=!1}return c}function j(){var a=jindo.$Fn(l,this);a.attach(window,h()).attach(window,"load").attach(window,"pageshow")}function k(){function c(a,b){return(b||"").indexOf(a)>-1}var a=navigator.userAgent,b=null;e={iphone:c("iPhone",a),ipad:c("iPad",a),android:jindo.$Agent().os().android,win:c("Windows Phone",a),galaxyTab:c("SHW-M180",a),galaxyTab2:c("SHW-M380",a),galaxyS:c("SHW-M110",a),galaxyS2:c("SHW-M250",a)||c("GT-I9100",a),galaxyS2LTE:c("SHV-E110",a),galaxyS3:c("SHV-E210",a)||c("SHW-M440",a),galaxyNote:c("SHV-E160",a),galaxyNote2:c("SHV-E250",a),galaxyNexus:c("Galaxy Nexus",a),optimusLte2:c("LG-F160",a),optimusVu:c("LG-F100",a),optimusLte:c("LG-LU6200",a)||c("LG-SU640",a)||c("LG-F120K",a),bChrome:jindo.$Agent().os().android&&(c("CrMo",a)||c("Chrome",a)),bInapp:!1,version:"",samsung:c("GT-",a)||c("SCH-",a)||c("SHV-",a)||c("SHW-",a)||c("SPH",a)||c("SWT-",a)||c("SGH-",a)||c("EK-",a),lg:c("LG-",a),pantech:c("IM-",a)},e.iphone||e.ipad?(b=a.match(/OS\s([\d|\_]+\s)/i),b!==null&&b.length>1&&(e.version=b[1])):e.android?(b=a.match(/Android\s([^\;]*)/i),b!==null&&b.length>1&&(e.version=b[1])):e.win&&(b=a.match(/Windows Phone\s([^\;]*)/i),b!==null&&b.length>1&&(e.version=b[1])),e.version=e.version.replace(/\_/g,".");for(var d in e)typeof e[d]=="boolean"&&e[d]&&e.hasOwnProperty(d)&&(e.name=d);if(e.iphone||e.ipad)c("Safari",a)||(e.bInapp=!0);else if(e.android){a=a.toLowerCase();if(c("inapp",a)||c("app",a.replace("applewebkit","")))e.bInapp=!0}}function l(d){var f=this;if(d.type==="load"){b=document.documentElement.clientWidth,!e.bInapp&&(e.iphone||e.ipad||h()!=="resize")?a=i():b>document.documentElement.clientHeight?a=!1:a=!0;return}if(h()==="resize")setTimeout(function(){m(d)},0);else{var g=200;e.android&&(g=500),clearTimeout(c),c=setTimeout(function(){m(d)},g)}}function m(b){var c=a;a=i(),jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad?c!==a&&p("mobilerotate",{isVertical:a}):p("mobilerotate",{isVertical:a})}function n(b){a=i(),setTimeout(function(){p("mobilePageshow",{})},300)}function o(a){var b=new WebKitCSSMatrix(window.getComputedStyle(a).webkitTransform);return{top:b.m42,left:b.m41}}function p(a,b){if(d[a])for(var c=0,e=d[a].length;c<e;c++)d[a][c].call(this,b)}function q(a){var b=nLeft=0,c=a.style[jindo.m.getCssPrefix()+"Transform"];if(!!c&&c.length>0){aTemp=c.match(/translate.{0,2}\((.*)\)/);if(!!aTemp&&aTemp.length>1){var d=aTemp[1].split(",");!!d&&d.length>1&&(b=parseInt(d[1],10),nLeft=parseInt(d[0],10))}}return{top:b,left:nLeft}}var a=null,b=-1,c=null,d={},e={},f={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},r={MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"},sVersion:"1.5.0",$init:function(){k(),g(),j()},bindRotate:function(a){var b=d.mobilerotate;typeof b=="undefined"&&(b=d.mobilerotate=[]),b.push(a)},unbindRotate:function(a){var b=d.mobilerotate;if(b)for(var c=0,e;e=b[c];c++)if(e===a){b.splice(c,1);break}},bindPageshow:function(a){var b=d.mobilePageshow;typeof b=="undefined"&&(b=d.mobilePageshow=[]),b.push(a)},unbindPageshow:function(a){var b=d.mobilePageshow;if(b)for(var c=0,e;e=b[c];c++)if(e===a){b.splice(c,1);break}},getDeviceInfo:function(){return e},hasClickBug:function(){return e.iphone||e.ipad||e.win&&e.version*1>=8},isVertical:function(){return a===null?i():a},getNodeElement:function(a){while(a.nodeType!=1)a=a.parentNode;return a},getCssOffset:function(a){var b;return e.android&&parseInt(e.version,10)===3?b=q(a):"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix?b=o(a):b=q(a),b},attachTransitionEnd:function(a,b){var c=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");if(c>230)a._jindo_fn_=jindo.$Fn(b,this).attach(a,"transitionend");else{var d=(this.getCssPrefix()==="ms"?"MS":this.getCssPrefix())+"TransitionEnd";a.addEventListener(d,b,!1)}},detachTransitionEnd:function(a,b){var c=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");if(c>230)a._jindo_fn_&&(a._jindo_fn_.detach(a,"transitionend"),delete a._jindo_fn_);else{var d=(this.getCssPrefix()==="ms"?"MS":this.getCssPrefix())+"TransitionEnd";a.removeEventListener(d,b,!1)}},_attachFakeJindo:function(a,b,c){var d=+jindo.$Jindo().version.replace(/[a-z.]/gi,""),e=null;return d<230&&typeof _notSupport!="undefined"?e=_notSupport.$Fn(b).attach(a,c):e=jindo.$Fn(b).attach(a,c),e},_getTouchEventName:function(){return f},getCssPrefix:function(){var a="";return typeof document.body.style.MozTransition!="undefined"?a="Moz":typeof document.body.style.OTransition!="undefined"?a="O":typeof document.body.style.msTransition!="undefined"?a="ms":a="webkit",a},getClosest:function(a,b){var c,d=jindo.$Element(b),e=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig;return e.test(a)?"<"+b.tagName.toUpperCase()+">"==a.toUpperCase()?c=b:(c=d.parent(function(b){if("<"+b.$value().tagName.toUpperCase()+">"==a.toUpperCase())return b}),c=c.length?c[0].$value():!1):(a.indexOf(".")==0&&(a=a.substring(1,a.length)),d.hasClass(a)?c=b:(c=d.parent(function(b){if(b.hasClass(a))return b}),c=c.length?c[0].$value():!1)),c},_isUseCss3d:function(a){typeof a=="undefined"&&(a=!1);var b=!1;if(e.iphone||e.ipad)b=!0;else if(e.android){var c=navigator.userAgent.match(/\(.*\)/)[0];function d(a,b){return(b||"").indexOf(a)>-1}var f=d("SHW-",c)||d("SHV-",c)||d("GT-",c)||d("SCH-",c)||d("SGH-",c)||d("SPH-",c)||d("LG-F160",c)||d("LG-F100",c)||d("EK-",c),g=d("SHW-M250",c)&&e.version<="4.0.3"||d("SHW-M420",c)||d("SHW-M200",c)||d("GT-S7562",c);a||(g=g||d("SHV-E110",c)),e.version>="4.0.3"&&f&&!g&&(b=!0)}return b},_isUseFixed:function(){var a=!1;if(e.bChrome||e.android&&parseInt(e.version,10)>=3||(e.iphone||e.ipad)&&parseInt(e.version,10)>=5||e.win&&parseInt(e.version,10)>=8)a=!0;return a},_isUseTimingFunction:function(){var a=this._isUseCss3d();if(e.android||(e.iphone||e.ipad)&&parseInt(e.version,10)==6)a=!1;return a},_clientSize:function(a){typeof a=="undefined"&&(a=!1);var b={},c=jindo.$Document().clientSize(),d=parseInt(e.version,10);if(e.ipad||e.iphone||e.bChrome)return a&&e.iphone&&(c.height=this.isVertical()?356:268),c;switch(e.name){case"galaxyTab":b={portrait:400,landscape:683},b.landscape-=92,b.portrait-=66;break;case"galaxyTab2":b={portrait:1280,landscape:800},b.landscape-=152,b.portrait-=152;break;case"galaxyS":b={portrait:320,landscape:533},b.landscape-=81,b.portrait-=81;break;case"galaxyS2LTE":case"galaxyS2":b={portrait:320,landscape:533},d==4?(b.landscape-=77,b.portrait-=77):(b.landscape-=83,b.portrait-=83);break;case"galaxyS3":b={portrait:360,landscape:640},b.landscape-=73,b.portrait-=73;break;case"galaxyNote":case"galaxyNote2":b={portrait:400,landscape:640},d==4?(b.landscape-=77,b.portrait-=77):(b.landscape-=103,b.portrait-=103);break;case"galaxyNexus":b={portrait:360,landscape:598},b.landscape-=83,b.portrait-=83;break;case"optimusLte":b={portrait:360,landscape:640},b.landscape-=73,b.portrait-=73;break;case"optimusLte2":b={portrait:360,landscape:640},b.landscape-=73,b.portrait-=73;break;case"optimusVu":b={portrait:439,landscape:585},b.landscape-=73,b.portrait-=73}if(this.isVertical()){if(a||b.landscape&&b.landscape>c.height)c.height=b.landscape}else if(a||b.portrait&&b.portrait>c.height)c.height=b.portrait;return c},_getAdressSize:function(){var a=0;if(e.bInapp)return a;var b=parseInt(e.version,10);if(e.iphone)a=60;else if(e.android)switch(e.name){case"galaxyTab":a=66;break;case"galaxyTab2":a=48;break;case"galaxyS":a=56;break;case"galaxyS2LTE":case"galaxyS2":b==4?a=52:a=58;break;case"galaxyS3":a=48;break;case"galaxyNote":case"galaxyNote2":b==4?a=52:a=78;break;case"galaxyNexus":a=52;break;case"optimusVu":case"optimusLte":case"optimusLte2":a=48}return a}};return r.$init(),r}(),jindo.m.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$static:{VERSION:"1.5.0"},$init:function(){var a=this.constructor.getInstance();a.push(this),this._htEventHandler={},this._htOption={},this._htOption._htSetter={}},option:function(a,b){switch(typeof a){case"undefined":var c={};for(var d in this._htOption)d!="htCustomEventHandler"&&d!="_htSetter"&&(c[d]=this._htOption[d]);return c;case"string":if(typeof b=="undefined")return this._htOption[a];if(a=="htCustomEventHandler")if(typeof this._htOption[a]=="undefined")this.attach(b);else return this;this._htOption[a]=b,typeof this._htOption._htSetter[a]=="function"&&this._htOption._htSetter[a](b);break;case"object":for(var e in a){if(e=="htCustomEventHandler")if(typeof this._htOption[e]=="undefined")this.attach(a[e]);else continue;e!=="_htSetter"&&(this._htOption[e]=a[e]),typeof this._htOption._htSetter[e]=="function"&&this._htOption._htSetter[e](a[e])}}return this},optionSetter:function(a,b){switch(typeof a){case"undefined":return this._htOption._htSetter;case"string":if(typeof b!="undefined")this._htOption._htSetter[a]=jindo.$Fn(b,this).bind();else return this._htOption._htSetter[a];break;case"object":for(var c in a)this._htOption._htSetter[c]=jindo.$Fn(a[c],this).bind()}return this},fireEvent:function(a,b){b=b||{};var c=this["on"+a],d=this._htEventHandler[a]||[],e=typeof c=="function",f=d.length>0;if(!e&&!f)return!0;d=d.concat(),b.sType=a,typeof b._aExtend=="undefined"&&(b._aExtend=[],b.stop=function(){b._aExtend.length>0&&(b._aExtend[b._aExtend.length-1].bCanceled=!0)}),b._aExtend.push({sType:a,bCanceled:!1});var g=[b],h,i;for(h=2,i=arguments.length;h<i;h++)g.push(arguments[h]);e&&c.apply(this,g);if(f){var j;for(h=0,j;j=d[h];h++)j.apply(this,g)}return!b._aExtend.pop().bCanceled},attach:function(a,b){if(arguments.length==1)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(a,b){this.attach(b,a)},this).bind()),this;var c=this._htEventHandler[a];return typeof c=="undefined"&&(c=this._htEventHandler[a]=[]),c.push(b),this},detach:function(a,b){if(arguments.length==1)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(a,b){this.detach(b,a)},this).bind()),this;var c=this._htEventHandler[a];if(c)for(var d=0,e;e=c[d];d++)if(e===b){c=c.splice(d,1);break}return this},detachAll:function(a){var b=this._htEventHandler;if(arguments.length)return typeof b[a]=="undefined"?this:(delete b[a],this);for(var c in b)delete b[c];return this}}),jindo.m.Component.factory=function(a,b){var c=[],d;typeof b=="undefined"&&(b={});for(var e=0,f;f=a[e];e++)d=new this(f,b),c[c.length]=d;return c},jindo.m.Component.getInstance=function(){return typeof this._aInstance=="undefined"&&(this._aInstance=[]),this._aInstance},typeof jindo.m.TimingFunction=="undefined"&&(jindo.m.TimingFunction={}),jindo.m.TimingFunction._cubicBezier=function(a,b,c,d){return function(e){function l(a){return((h*a+g)*a+f)*a}function m(a){return((k*a+j)*a+i)*a}function n(a){return(3*h*a+2*g)*a+f}function o(a,b){var c,d,e,f,g,h;for(e=a,h=0;h<8;h++){f=l(e)-a;if(Math.abs(f)<b)return e;g=n(e);if(Math.abs(g)<1e-6)break;e-=f/g}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=l(e);if(Math.abs(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)*.5+c}return e}var f=3*a,g=3*(c-a)-f,h=1-f-g,i=3*b,j=3*(d-b)-i,k=1-i-j;return m(o(e,.005))}},jindo.m.TimingFunction.linear=jindo.m.TimingFunction._cubicBezier(0,0,1,1),jindo.m.TimingFunction.ease_out=jindo.m.TimingFunction._cubicBezier(0,0,.58,1),jindo.m.TimingFunction.ease_in=jindo.m.TimingFunction._cubicBezier(.42,0,1,1),jindo.m.TimingFunction.ease_in_out=jindo.m.TimingFunction._cubicBezier(.42,0,.58,1),jindo.m.TimingFunction.ease_out_in=jindo.m.TimingFunction._cubicBezier(0,.42,1,.58),jindo.m.TimingFunction.cubicBezier=function(a,b,c,d){return jindo.m.TimingFunction._cubicBezier(a,b,c,d)},jindo.m.Transition=jindo.$Class({_aTaskQueue:null,$init:function(a){this.option({sTransitionTimingFunction:"ease-in-out",bUseTimingFunction:jindo.m._isUseTimingFunction()}),this.option(a||{}),this._initVar(),this._attachEvent()},_initVar:function(){this._aTaskQueue=[],this._bIsPlaying=!1,this._sCssPrefix=jindo.m.getCssPrefix(),this._aBeforeStatus=[],this._sCssPrefix.length>0&&(this._sCssPrefix="-"+this._sCssPrefix.toLowerCase()+"-"),this._bNoUseCss3d=!this.option("bUseTimingFunction"),this._nTimerAnimate=null,this._htCurrentTask=null},start:function(){!this.isPlaying()&&this.isExistTask()&&this._prepareTask()},isPlaying:function(){return this._bIsPlaying},isExistTask:function(){if(!this._aTaskQueue)return!1;var a=this._aTaskQueue.length;return bValue=a>0?!0:!1,bValue},queue:function(a,b,c){var d={sType:"style",sTaskName:"",elTarget:a,nDuration:b};return d.htDefault={},d.htStyle=c.htStyle||{},d.htTransform=c.htTransform||{},d.sTaskName=c.sTaskName||null,d.fCallback=c.fCallback,d.htDefault["transition-timing-function"]=typeof d.htTransform["transition-timing-function"]=="undefined"?this._getDefaultTransition().sTransitionTimingFunction:d.htTransform["transition-timing-function"],d.htDefault["transition-property"]=typeof d.htTransform["transition-property"]=="undefined"?"all":d.htTransform["transition-property"],d.htDefault["transition-duration"]=b+"ms",this._pushTask(d),this},stop:function(a){if(!this.isPlaying())return;typeof a=="undefined"&&(a=!0);if(!this._fireCustomEvent("stop",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration}))return;this._stopTransition(a)},clear:function(a){this.stop(a),this._aTaskQueue=[]},_resume:function(){this._htCurrentTask&&this._doTask()},_stopTransition:function(a){this._detachTransitionEnd(),this._elCurrent.style[this._sCssPrefix+"transition-property"]="none",this._initTransition();if(!a){var b=this._getBeforeStatusElement(this._elCurrent);b>-1&&jindo.$Element(this._elCurrent).attr("style",this._aBeforeStatus[b].style)}this._htCurrentTask=null,this._bIsPlaying=!1},_prepareTask:function(){var a=this._popTask();if(a===null||!a){this._bIsPlaying=!1;return}this._htCurrentTask=a,this._resume()},_pushTask:function(a){this._aTaskQueue.push(a)},_popTask:function(){if(!this.isExistTask())return null;var a=this._aTaskQueue.shift();return a?a:null},_doTask:function(){if(this._htCurrentTask){this._bIsPlaying=!0;if(!this._fireCustomEvent("start",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration}))return;var a=this._htCurrentTask.elTarget,b=jindo.$Element(a);this._elCurrent=a,this._setBeforeStatus(b);var c=this._htCurrentTask.nDuration,d=this._bAttachTransitionEvt();d&&this._attachTransitionEnd(a),this._setDefaultTransition(b,d);var e=!1;e=this._setTransform(b),e=this._setStyle(b,this._htCurrentTask.htStyle)||e;if(c===0)this._onTransitionEnd();else if(!e){var f=this;setTimeout(function(){f._onTransitionEnd()},c)}}},_setDefaultTransition:function(a,b){for(var c in this._htCurrentTask.htDefault){var d=this._htCurrentTask.htDefault[c];c.indexOf("duration")>-1&&!b||(a.$value().style[this._sCssPrefix+c]=d)}},_setStyle:function(a,b){var c=!1;for(var d in b){var e=a.css(d);e!=b[d]&&(c=!0),a.css(d,b[d])}return c},_setStyleForAndroid:function(){},_setTransform:function(a){var b=!1;return this._bNoUseCss3d?b=this._setTransformForAnrdoid(a):b=this._setTransformForIos(a),b},_setTransformForIos:function(a){var b=!1;for(var c in this._htCurrentTask.htTransform){var d=this._htCurrentTask.htTransform[c];a.$value().style[this._sCssPrefix+c]=d,b=!0}return b},_setTransformForAnrdoid:function(a){var b=!1,c=a.$value();for(var d in this._htCurrentTask.htTransform){var e=this._htCurrentTask.htTransform[d];if(e.indexOf("translate")>-1){var f=this._htCurrentTask.nDuration,g=new RegExp(/(translate.*)\((.*)\)/),h=e.match(g),i=h[1],j=h[2].replace(/px/g,"").split(","),k="transform",l=jindo.m.getCssOffset(c),m=(new Date).getTime(),n=this;(function o(){var a=(new Date).getTime();if(a>=m+f){cancelAnimationFrame(n._nTimerAnimate),c.style[n._sCssPrefix+k]=e,n._onTransitionEnd();return}var b=a-m,d=i.indexOf("X")>-1||j.length>1?j[0]:null,g=null;i.indexOf("Y")>-1?g=j[0]:j.length>1&&(g=j[1]);var h=null;i.indexOf("Z")>-1?h=j[0]:j.length>2&&(h=j[2]);var p=[],q=d!==null?n._getcubicBeziserPosition(l.left,d,f,b)+"px":null,r=g!==null?n._getcubicBeziserPosition(l.top,g,f,b)+"px":null,s=h!==null?h+"px":null;q!==null&&p.push(q),r!==null&&p.push(r),s!==null&&p.push(s),c.style[n._sCssPrefix+k]=i+"("+p.join(",")+")",n._nTimerAnimate=requestAnimationFrame(o)})()}else a.$value().style[this._sCssPrefix+d]=e;b=!0}return b},_bAttachTransitionEvt:function(){var a=!0;if(this._htCurrentTask.nDuration===0)a=!1;else if(this._bNoUseCss3d)for(var b in this._htCurrentTask.htTransform){var c=this._htCurrentTask.htTransform[b];c.indexOf("translate")>-1&&(a=!1)}return a},_setBeforeStatus:function(a){var b=this._getBeforeStatusElement(a.$value());b>-1?this._aBeforeStatus[b].style=a.attr("style"):this._aBeforeStatus.push({el:a.$value(),style:a.attr("style")})},_getBeforeStatusElement:function(a){var b=-1;for(var c=0,d=this._aBeforeStatus.length;c<d;c++)if(this._aBeforeStatus[c].el===a){b=c;break}return b},_getDefaultTransition:function(){return{sTransitionTimingFunction:this.option("sTransitionTimingFunction"),TransitionProperty:"all"}},_fireCustomEvent:function(a,b){return this.fireEvent(a,b)},_onTransitionEnd:function(){this._detachTransitionEnd(),this._initTransition();var a=this;if(this._htCurrentTask){var b=typeof this._htCurrentTask.fCallback;if(b=="function")this._bNoUseCss3d?setTimeout(function(){a._htCurrentTask.fCallback()},5):a._htCurrentTask.fCallback();else if(b=="object"){var c=jindo.$Element(this._htCurrentTask.elTarget),d;for(d in this._htCurrentTask.fCallback.htTransform){var e=this._htCurrentTask.fCallback.htTransform[d];if(d=="transform"){var f=this._sCssPrefix+d,g=c.$value().style[f];g.length>0&&(e=e)}c.$value().style[this._sCssPrefix+d]=e}for(d in this._htCurrentTask.fCallback.htStyle)c.css(d,this._htCurrentTask.fCallback.htStyle[d])}}this._htCurrentTask&&this._fireCustomEvent("end",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration}),setTimeout(function(){a._prepareTask()},10)},_initTransition:function(a){typeof a=="undefined"&&(a=this._elCurrent),a.style[this._sCssPrefix+"transition-duration"]=null,a.style[this._sCssPrefix+"transition-timing-function"]=null,a.style[this._sCssPrefix+"perspective"]=null,a.style[this._sCssPrefix+"transform-style"]=null,a.style[this._sCssPrefix+"transition-property"]=null},_getcubicBeziserPosition:function(a,b,c,d){a*=1,b*=1;var e=this.option("sTransitionTimingFunction").replace(/-/g,"_"),f=jindo.m.TimingFunction[e],g=d/c;g=g>1?1:g;var h=f(g),i=a+(b-a)*h.toFixed(2);return i},_attachTransitionEnd:function(a){this._elTransition=a,jindo.m.attachTransitionEnd(this._elTransition,this._htEvent.transitionEnd)},_detachTransitionEnd:function(){this._elTransition&&(jindo.m.detachTransitionEnd(this._elTransition,this._htEvent.transitionEnd),this._elTransition=null)},_attachEvent:function(){this._htEvent={},this._htEvent.transitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind()},_detachEvent:function(){this._detachTransitionEnd(),this._htEvent=null},destroy:function(){this._detachEvent();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._aTaskQueue=null,this._bIsPlaying=null,this._sCssPrefix=null,this._aBeforeStatus=null,this._bNoUseCss3d=null,this._nTimerAnimate=null,this._htCurrentTask=null}}).extend(jindo.m.Component),jindo.m.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=!1},isActivating:function(){return this._bIsActivating},activate:function(){return this.isActivating()?this:(this._bIsActivating=!0,arguments.length>0?this._onActivate.apply(this,arguments):this._onActivate(),this)},deactivate:function(){return this.isActivating()?(this._bIsActivating=!1,arguments.length>0?this._onDeactivate.apply(this,arguments):this._onDeactivate(),this):this}}).extend(jindo.m.Component),jindo.m.LayerEffect=jindo.$Class({$init:function(a,b){this.option({nDuration:250,bActivateOnload:!0}),this.option(b||{}),this._initVar(),this.setLayer(a),this._initTransition(),this.option("bActivateOnload")&&this.activate()},_htEffect:{expand:"jindo.m.ExpandEffect",contract:"jindo.m.ContractEffect",fade:"jindo.m.FadeEffect",pop:"jindo.m.PopEffect",slide:"jindo.m.SlideEffect",flip:"jindo.m.FlipEffect"},_initVar:function(){this._htEffectInstance={},this._htLayerInfo={},this._htWElement={},this.bAndroid=jindo.m.getDeviceInfo().android,this.sClassHighligting="_effct_hide_highlighting_tmp"},_initTransition:function(){this._oTransition=new jindo.m.Transition},_createEffect:function(sType){if(this._htEffect[sType]&&!this._htEffectInstance[sType]){try{this._htEffectInstance[sType]=eval("new "+this._htEffect[sType]+"()")}catch(e){}this._htEffectInstance[sType].setLayerInfo(this._htLayerInfo)}},expand:function(a){var b="expand";this._run(b,a)},contract:function(a){var b="contract";this._run(b,a)},fade:function(a){var b="fade";this._run(b,a)},pop:function(a){var b="pop";this._run(b,a)},slide:function(a){var b="slide";this._run(b,a)},flip:function(a){var b="flip";this._run(b,a)},isPlaying:function(){return this._oTransition.isPlaying()},_fireCustomEvent:function(a,b){return this.fireEvent(a,b)},_run:function(a,b){if(!this._isAvailableEffect())return;this._createEffect(a),typeof b=="undefined"&&(b={});var c=this._htEffectInstance[a],d=this.getLayer(),e=typeof b.nDuration=="undefined"?this.option("nDuration"):parseInt(b.nDuration,10),f=c.getBeforeCommand(d,b),g=c.getCommand(d,b);if(!this._fireCustomEvent("beforeEffect",{elLayer:d,sEffect:g.sTaskName,nDuration:e}))return;f&&this._oTransition.queue(this.getLayer(),0,f),this._oTransition.queue(this.getLayer(),e,g),this._oTransition.start()},setLayer:function(a){this._htWElement.el=jindo.$(a),this._htWElement.wel=jindo.$Element(this._htWElement.el);var b;if(!!this.bAndroid){b=jindo.$$.getSingle("."+this.sClassHighligting,this._htWElement.el);if(!b){var c='<a href="javascript:void(0)" style="position:absolute" class="'+this.sClassHighligting+'"></a>';b=jindo.$(c),this._htWElement.wel.append(b),b.style.opacity="0",b.style.width=0,b.style.height=0,b.style.left="-1000px",b.style.top="-1000px"}}this.setSize()},stop:function(a){typeof a=="undefined"&&(a=!0),this._oTransition&&this._oTransition.stop(a)},clearEffect:function(a){this._oTransition&&this._oTransition.clear(a)},getLayer:function(){return this._htWElement.el},setSize:function(){var a=this._htWElement.el.cloneNode(!0),b=jindo.$Element(a);b.opacity(0),this._htWElement.wel.after(b),b.show(),this._htLayerInfo.nWidth=this._htWElement.wel.width(),this._htLayerInfo.nHeight=this._htWElement.wel.height(),b.css({position:"absolute",top:"0px",left:"0px"}),this._htLayerInfo.nMarginLeft=parseInt(b.css("marginLeft"),10),this._htLayerInfo.nMarginTop=parseInt(b.css("marginTop"),10),this._htLayerInfo.nMarginLeft=isNaN(this._htLayerInfo.nMarginLeft)?0:this._htLayerInfo.nMarginLeft,this._htLayerInfo.nMarginTop=isNaN(this._htLayerInfo.nMarginTop)?0:this._htLayerInfo.nMarginTop,this._htLayerInfo.nOpacity=this._htWElement.wel.opacity(),this._htLayerInfo.sPosition=this._htWElement.wel.css("position");var c=this._htWElement.wel.css("display");c=c==="none"||c.length===0?"block":c,this._htLayerInfo.sDisplay=c,this._htLayerInfo.sClassHighligting=this.sClassHighligting,b.leave(),this._setEffectLayerInfo()},_setEffectLayerInfo:function(){for(var a in this._htEffectInstance)this._htEffectInstance[a].setLayerInfo(this._htLayerInfo)},_onTransitionEnd:function(a){a.sTaskName&&this._fireCustomEvent("afterEffect",{elLayer:a.element,sEffect:a.sTaskName,nDuration:a.nDuration})},_onTransitionStop:function(a){a.sTaskName&&this._fireCustomEvent("stop",{elLayer:a.element,sEffect:a.sTaskName,nDuration:a.nDuration})},_isAvailableEffect:function(){return this.isActivating()},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.end=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.stop=jindo.$Fn(this._onTransitionStop,this).bind(),this._oTransition&&this._oTransition.attach({end:this._htEvent.end,stop:this._htEvent.stop})},_detachEvent:function(){this._htEvent=null,this._oTransition&&this._oTransition.detachAll()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.Effect=jindo.$Class({$init:function(){this._sCssPrefix=jindo.m.getCssPrefix();var a=jindo.m.getDeviceInfo();this.bIos=a.iphone||a.ipad,this.bIos3=a.iphone&&a.version.length>0&&a.version.substring(0,1)=="3",this.bAndroid=a.android,this.bAndroid3Up=a.android&&a.version.length>0&&a.version.substring(0,1)>="3",this.bAndroid2_1=a.android&&a.version.length>0&&a.version==="2.1",this.sTranOpen=this.bIos?"translate3d(":"translate(",this.sTranEnd=this.bIos?",0px)":")",this._initVar()},_initVar:function(){this._htLayerInfo={}},setLayerInfo:function(a){this._htLayerInfo={};for(var b in a)this._htLayerInfo[b]=a[b]},getTransitionTask:function(){return null},getBeforeCommand:function(){return null},getCommand:function(){return null}}),jindo.m.ContractEffect=jindo.$Class({sEffectName:"contract",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"down",d="width",e=this._htLayerInfo.nWidth;if(c=="up"||c=="down")d="height",e=this._htLayerInfo.nHeight;var f=b.htTo||{};return f[d]="0px",c=="right"&&(f["margin-left"]=this._htLayerInfo.nMarginLeft+this._htLayerInfo.nWidth+"px"),c=="down"&&(f["margin-top"]=this._htLayerInfo.nMarginTop+this._htLayerInfo.nHeight+"px"),{sTaskName:this.sEffectName+"-"+c,htStyle:f,htTransform:{},fCallback:{htStyle:{"margin-left":this._htLayerInfo.nMarginLeft+"px","margin-top":this._htLayerInfo.nMarginTop+"px"}}}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"down",d=b.htFrom||{};return d.overflow="hidden",{htStyle:d,htTransform:{}}}}).extend(jindo.m.Effect),jindo.m.ExpandEffect=jindo.$Class({sEffectName:"expand",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"down",d="width",e=this._htLayerInfo.nWidth;if(c=="up"||c=="down")d="height",e=this._htLayerInfo.nHeight;var f=b.htTo||{};return f[d]=e+"px",c=="left"&&(f["margin-left"]=this._htLayerInfo.nMarginLeft+"px"),c=="up"&&(f["margin-top"]=this._htLayerInfo.nMarginTop+"px"),{sTaskName:this.sEffectName+"-"+c,htStyle:f,htTransform:{}}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"down",d="width";if(c=="up"||c=="down")d="height";var e=b.htFrom||{};return e[d]="0",e.overflow="hidden",c=="left"&&(e["margin-left"]=this._htLayerInfo.nWidth+this._htLayerInfo.nMarginLeft+"px"),c=="up"&&(e["margin-top"]=this._htLayerInfo.nHeight+this._htLayerInfo.nMarginTop+"px"),{htStyle:e,htTransform:{}}}}).extend(jindo.m.Effect),jindo.m.FadeEffect=jindo.$Class({sEffectName:"fade",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"in",d=b.htTo||{},e=c=="in"?1:0;d.opacity=typeof d.opacity!="undefined"?d.opacity:e;var f={};return c=="out"&&(f.htStyle={},f.htStyle.display="none",f.htStyle.opacity=this._htLayerInfo.nOpacity),{sTaskName:this.sEffectName+"-"+c,htStyle:d,htTransform:{},fCallback:f}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"in",d=b.htFrom||{},e=c=="in"?0:1;return d.display=this._htLayerInfo.sDisplay,d.opacity=typeof d.opacity=="undefined"?e:d.opacity,{htStyle:d,htTransform:{}}}}).extend(jindo.m.Effect),jindo.m.FlipEffect=jindo.$Class({sEffectName:"flip",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"left",d="Y";if(c=="up"||c=="down")d="X";var e=b.htTo||{},f=b.elFlipFrom?jindo.$Element(b.elFlipFrom):jindo.$Element(a),g=b.elFlipTo?jindo.$Element(b.elFlipTo):null,h=this._getCssRotate(this._getCssTransfrom(f));h[d]=h[d]+(c=="left"||c=="down"?-180:180);var i="rotateX("+h.X+"deg) rotateY("+h.Y+"deg)";return g&&(g.$value().style[this._sCssPrefix+"Transform"]="rotate"+d+"(0deg)",i="rotate"+d+"(0deg)"),{sTaskName:this.sEffectName+"-"+c,htStyle:e,htTransform:{"transform-style":"preserve-3d",transform:i}}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"left",d=b.htFrom||{},e="Y",f=0;if(c=="up"||c=="down")e="X";var g=b.elFlipFrom?jindo.$Element(b.elFlipFrom):jindo.$Element(a),h=b.elFlipTo?jindo.$Element(b.elFlipTo):null,i=g.$value().parentNode;i.style.webkitPerspective="1200";var j=this._getCssRotate(this._getCssTransfrom(g)),k="rotateX("+j.X+"deg) rotateY("+j.Y+"deg)";return h&&(h.$value().style[this._sCssPrefix+"Transform"]="rotate"+e+"(-180deg)",k="rotate"+e+"(-180deg)"),{htStyle:d,htTransform:{perspective:"1200","transform-style":"preserve-3d",transform:k}}},_getCssRotate:function(a){var b=a,c={X:0,Y:0};if(!b)return c;var d=b.match(/rotateX\((\-?\d*)deg/);return d&&d.length>1&&(c.X=d[1]*1,c["X"]%360==0&&(c.X=0)),d=b.match(/rotateY\((\-?\d*)deg/),d&&d.length>1&&(c.Y=d[1]*1,c["Y"]%360==0&&(c.Y=0)),c},_getCssTransfrom:function(a){return a.css(this._sCssPrefix+"Transform")||""}}).extend(jindo.m.Effect),jindo.m.PopEffect=jindo.$Class({sEffectName:"pop",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"in",d=b.htTo||{};typeof d["opacity"]=="undefined"&&(d.opacity=c=="in"?1:.1);var e=c=="in"?1:this.bIos3||this.bAndroid3Up?.1:0,f={};c=="out"&&(f.htStyle={},f.htStyle.display="none",f.htStyle.opacity=this._htLayerInfo.nOpacity,f.htTransform={},f.htTransform.transform="scale(1)");var g="scale("+e+")";return this.bAndroid3Up&&(g+=" scaleZ(1.0)"),{sTaskName:this.sEffectName+"-"+c,htStyle:d,htTransform:{transform:g,"transform-origin":"50% 50%"},fCallback:f}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"in",d=b.htFrom||{};typeof d["opacity"]=="undefined"&&(d.opacity=c=="in"?.1:1),d.display=this._htLayerInfo.sDisplay;var e=c=="in"?this.bIos3||this.bAndroid3Up?.1:0:1,f="scale("+e+")";return this.bAndroid3Up&&(f+=" scaleZ(1.0)"),{htStyle:d,htTransform:{transform:f,"transform-origin":"50% 50%"}}}}).extend(jindo.m.Effect),jindo.m.SlideEffect=jindo.$Class({sEffectName:"slide",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"left",d=jindo.m.getCssOffset(a),e=d.left,f=d.top,g,h,i;g=typeof b.nSize!="undefined"?b.nSize:this._htLayerInfo.nWidth,h=typeof b.nSize!="undefined"?b.nSize:this._htLayerInfo.nHeight;if(c=="up"||c=="down")f+=c=="up"?h*-1:h;if(c=="left"||c=="right")e+=c=="left"?g*-1:g;var j={};if(typeof b.elBaseLayer!="undefined"){e=0,f=0;var k=jindo.$Element(b.elBaseLayer);i=jindo.$Element(a),h=typeof b.nSize!="undefined"?b.nSize:k.height(),g=typeof b.nSize!="undefined"?b.nSize:k.width();if(c=="up"||c=="down")f=c=="down"?h*-1:h;if(c=="left"||c=="right")e=c=="left"?g:g*-1;e*=-1,f*=-1}j.transform=this.sTranOpen+e+"px, "+f+"px"+this.sTranEnd;var l=this._htLayerInfo.sPosition,m=this.bAndroid,n=this.bAndroid3Up,o=this._htLayerInfo.sClassHighligting,p=this.bAndroid2_1;return i=jindo.$Element(a),{sTaskName:this.sEffectName+"-"+c,htStyle:b.htTo||{},htTransform:j,fCallback:function(){var b=jindo.m.getCssOffset(a),c=i.css("top").replace("px","")*1,d=i.css("left").replace("px","")*1;c=isNaN(c)?0:c,d=isNaN(d)?0:d,l=="relative"?i.css("position","relative"):i.css("position","absolute");var e=jindo.m.getCssPrefix();i.css(e+"Transform",""),n&&i.offset(),i.$value().style.top=parseInt(c+b.top,10)+"px",i.$value().style.left=parseInt(b.left+d,10)+"px";if(m&&!n){var f=jindo.$$.getSingle("."+o,i.$value());f&&(p?setTimeout(function(){f.focus()},5):f.focus())}}}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"left",d=b.htFrom||{},e={},f=jindo.$Element(a);if(typeof b.elBaseLayer!="undefined"){var g=jindo.$Element(b.elBaseLayer);if(!g.isParentOf(f)){g.append(f);var h=f.css("position");h!="relative"&&h!="absolute"&&f.css("position","absolute"),f.css("opacity",0)}var i=0,j=0,k=g.height(),l=g.width();if(c=="up"||c=="down")j=c=="down"?k*-1:k;if(c=="left"||c=="right")i=c=="left"?l:l*-1;g.css("overflow","hidden"),d.left=i+"px",d.top=j+"px",d.opacity=this._htLayerInfo.nOpacity}return{htStyle:d,htTransform:e}}}).extend(jindo.m.Effect),jindo.m.Touch=jindo.$Class({$init:function(a,b){this._el=jindo.$(a);var c={nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1e3,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:.1,nRotateThreshold:5,nEndEventThreshold:0,bActivateOnload:!0};this.option(c),this.option(b||{}),this._initVariable(),this._setSlope(),this.option("bActivateOnload")&&this.activate()},_initVariable:function(){this._hasTouchEvent=!1,this._htEventName=jindo.m._getTouchEventName(),this._htEventName.start.indexOf("touch")>-1?this._hasTouchEvent=!0:this._htEventName.start.indexOf("MSPointer")>-1&&typeof this._el.style.msTouchAction!="undefined"&&(this._el.style.msTouchAction="none"),this._radianToDegree=180/Math.PI,this._htMoveInfo={nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0},this.bStart=!1,this.bMove=!1,this.nMoveType=-1,this.htEndInfo={},this._nVSlope=0,this._nHSlope=0,this.bSetSlope=!1},_attachEvents:function(){this._htEvent={};var a=this._hasTouchEvent;this._htEvent[this._htEventName.start]={fn:jindo.$Fn(this._onStart,this).bind(),el:this._el},this._htEvent[this._htEventName.move]={fn:jindo.$Fn(this._onMove,this).bind(),el:this._el},this._htEvent[this._htEventName.end]={fn:jindo.$Fn(this._onEnd,this).bind(),el:this._el},this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEventName.cancel&&(this._htEvent[this._htEventName.cancel]={fn:jindo.$Fn(this._onCancel,this).bind(),el:this._el});for(var b in this._htEvent)this._htEvent[b].fn&&(this._htEvent[b].ref=jindo.m._attachFakeJindo(this._htEvent[b].el,this._htEvent[b].fn,b))},_detachEvents:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref&&b.ref.detach(b.el,a)}jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onCancel:function(a){this._onEnd(a)},_onStart:function(a){this._resetTouchInfo();var b=this._getTouchInfo(a),c={element:b[0].el,nX:b[0].nX,nY:b[0].nY,oEvent:a};if(!this._fireCustomEvent("touchStart",c))return;this.bStart=!0,this._htMoveInfo.nStartX=b[0].nX,this._htMoveInfo.nBeforeX=b[0].nX,this._htMoveInfo.nStartY=b[0].nY,this._htMoveInfo.nBeforeY=b[0].nY,this._htMoveInfo.nStartTime=b[0].nTime,this._htMoveInfo.aStartInfo=b,this._startLongTapTimer(b,a)},_onMove:function(a){if(!this.bStart)return;this.bMove=!0;var b=this._getTouchInfo(a),c=this._getCustomEventParam(b,!1);if(b.length===1){if(this.nMoveType<0||this.nMoveType==3||this.nMoveType==4){var d=this._getMoveType(b);if(this.nMoveType!=4||d!=3)this.nMoveType=d}}else this.nMoveType!==8&&(this.nMoveType=this._getMoveType(b));c=this._getCustomEventParam(b,!1),typeof this._nLongTapTimer!="undefined"&&this.nMoveType!=3&&this._deleteLongTapTimer(),c.oEvent=a;var e=0;this.nMoveType==0?e=Math.abs(c.nVectorX):this.nMoveType==1?e=Math.abs(c.nVectorY):e=Math.abs(c.nVectorX)+Math.abs(c.nVectorY);if(e<this.option("nMoveThreshold"))return;if(!this.fireEvent("touchMove",c)){this.bStart=!1;return}this._htMoveInfo.nBeforeX=b[0].nX,this._htMoveInfo.nBeforeY=b[0].nY,this._htMoveInfo.nBeforeTime=b[0].nTime},_onEnd:function(a){if(!this.bStart)return;var b=this;this._deleteLongTapTimer(),this._deleteEndEventTimer(),!this.bMove&&this.nMoveType!=4&&(this.nMoveType=3);if(this.nMoveType<0)return;var c=this._getTouchInfo(a);this._isDblTap(c[0].nX,c[0].nY,c[0].nTime)&&(clearTimeout(this._nTapTimer),delete this._nTapTimer,this.nMoveType=5);var d=this._getCustomEventParam(c,!0);d.oEvent=a;var e=d.sMoveType;typeof this._htEventHandler[jindo.m.MOVETYPE[5]]!="undefined"&&this._htEventHandler[jindo.m.MOVETYPE[5]].length>0&&this.nMoveType==3?this._nTapTimer=setTimeout(function(){b.fireEvent("touchEnd",d),b._fireCustomEvent(e,d),delete b._nTapTimer},this.option("nDoubleTapDuration")):(this.fireEvent("touchEnd",d),this.nMoveType!=4&&(this.nMoveType===8?(d.sMoveType=jindo.m.MOVETYPE[6],this._fireCustomEvent(jindo.m.MOVETYPE[6],d),d.sMoveType=jindo.m.MOVETYPE[7],this._fireCustomEvent(jindo.m.MOVETYPE[7],d)):setTimeout(function(){b._fireCustomEvent(e,d)},0))),this._updateTouchEndInfo(c),this._resetTouchInfo()},_startEndEventTimer:function(a){var b=this;this._nEndEventTimer=setTimeout(function(){b._onEnd(a),delete b._nEndEventTimer},b.option("nEndEventThreshold"))},_deleteEndEventTimer:function(){typeof this._nEndEventTimer!="undefined"&&(clearTimeout(this._nEndEventTimer),delete this._nEndEventTimer)},_fireCustomEvent:function(a,b){return this.fireEvent(a,b)},_getCustomEventParam:function(a,b){var c=jindo.m.MOVETYPE[this.nMoveType],d=a[0].nTime-this._htMoveInfo.nStartTime,e=nVectorY=nMomentumX=nMomentumY=nSpeedX=nSpeedY=nDisX=nDisY=0;nDisX=this.nMoveType===1?0:a[0].nX-this._htMoveInfo.nStartX,nDisY=this.nMoveType===0?0:a[0].nY-this._htMoveInfo.nStartY,e=a[0].nX-this._htMoveInfo.nBeforeX,nVectorY=a[0].nY-this._htMoveInfo.nBeforeY,b&&(this.nMoveType==0||this.nMoveType==1||this.nMoveType==2)&&d<=this.option("nMomentumDuration")&&(nSpeedX=Math.abs(nDisX)/d,nMomentumX=nSpeedX*nSpeedX/2,nSpeedY=Math.abs(nDisY)/d,nMomentumY=nSpeedY*nSpeedY/2);var f={element:a[0].el,nX:a[0].nX,nY:a[0].nY,nVectorX:e,nVectorY:nVectorY,nDistanceX:nDisX,nDistanceY:nDisY,sMoveType:c,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime};if(a.length>1||this.nMoveType>=6)f.nScale=this._getScale(a),f.nRotation=this._getRotation(a),f.nScale===null&&(f.nScale=this._htMoveInfo.nBeforeScale),f.nRotation===null&&(f.nRotation=this._htMoveInfo.nBeforeRotation);if(a.length>=1){var g=[],h=[],i=[];for(var j=0,k=a.length;j<k;j++)g.push(a[j].nX),h.push(a[j].nY),i.push(a[j].el);f.aX=g,f.aY=h,f.aElement=i}return b&&(f.nMomentumX=nMomentumX,f.nMomentumY=nMomentumY,f.nSpeedX=nSpeedX,f.nSpeedY=nSpeedY,f.nDuration=d),f},_updateTouchEndInfo:function(a){this.htEndInfo={element:a[0].el,time:a[0].nTime,movetype:this.nMoveType,nX:a[0].nX,nY:a[0].nY}},_deleteLongTapTimer:function(){typeof this._nLongTapTimer!="undefined"&&(clearTimeout(this._nLongTapTimer),delete this._nLongTapTimer)},_startLongTapTimer:function(a,b){var c=this;typeof this._htEventHandler[jindo.m.MOVETYPE[4]]!="undefined"&&this._htEventHandler[jindo.m.MOVETYPE[4]].length>0&&(c._nLongTapTimer=setTimeout(function(){c.fireEvent("longTap",{element:a[0].el,oEvent:b,nX:a[0].nX,nY:a[0].nY}),delete c._nLongTapTimer,c.nMoveType=4},c.option("nLongTapDuration")))},_onResize:function(){this._setSlope()},_isDblTap:function(a,b,c){if(typeof this._nTapTimer!="undefined"&&this.nMoveType==3){var d=this.option("nTapThreshold");if(Math.abs(this.htEndInfo.nX-a)<=d&&Math.abs(this.htEndInfo.nY-b)<=d)return!0}return!1},_setSlope:function(){this.bSetSlope||(this._nHSlope=(window.innerHeight/2/window.innerWidth).toFixed(2)*1,this._nVSlope=(window.innerHeight/(window.innerWidth/2)).toFixed(2)*1)},setSlope:function(a,b){this._nHSlope=b,this._nVSlope=a,this.bSetSlope=!0},getSlope:function(){return{nVSlope:this._nVSlope,nHSlope:this._nHSlope}},_resetTouchInfo:function(){for(var a in this._htMoveInfo)this._htMoveInfo[a]=0;this._deleteLongTapTimer(),this.bStart=!1,this.bMove=!1,this.nMoveType=-1},_getMoveTypeBySingle:function(a,b){var c=this.nMoveType,d=Math.abs(this._htMoveInfo.nStartX-a),e=Math.abs(this._htMoveInfo.nStartY-b),f=d+e,g=this.option("nTapThreshold");d<=g&&e<=g?c=3:c=-1;if(this.option("nSlopeThreshold")<=f){var h=parseFloat((e/d).toFixed(2),10);this._nHSlope===-1&&this._nVSlope===-1?c=2:h<=this._nHSlope?c=0:h>=this._nVSlope?c=1:c=2}return c},_getMoveTypeByMulti:function(a){var b=-1;if(this.nMoveType===6||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option("nPinchThreshold"))b=6;if(this.nMoveType===7||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option("nRotateThreshold"))b===6?b=8:b=7;return b===-1?this.nMoveType:b},_getScale:function(a){var b=-1,c=this._getDistance(a);return c<=0?null:(this._htMoveInfo.nStartDistance===0?(b=1,this._htMoveInfo.nStartDistance=c):b=c/this._htMoveInfo.nStartDistance,this._htMoveInfo.nBeforeScale=b,b)},_getRotation:function(a){var b=-1,c=this._getAngle(a);return c===null?null:(this._htMoveInfo.nStartAngle===0?(this._htMoveInfo.nStartAngle=c,b=0):b=c-this._htMoveInfo.nStartAngle,this._htMoveInfo.nLastAngle=c,this._htMoveInfo.nBeforeRotation=b,b)},_getMoveType:function(a){var b=this.nMoveType;return a.length===1?b=this._getMoveTypeBySingle(a[0].nX,a[0].nY):a.length===2&&(b=this._getMoveTypeByMulti(a)),b},_getDistance:function(a){return a.length===1?-1:Math.sqrt(Math.pow(Math.abs(a[0].nX-a[1].nX),2)+Math.pow(Math.abs(a[0].nY-a[1].nY),2))},_getAngle:function(a){if(a.length===1)return null;var b=a[0].nX-a[1].nX,c=a[0].nY-a[1].nY,d=Math.atan2(c,b)*this._radianToDegree;if(this._htMoveInfo.nLastAngle!==null){var e=Math.abs(this._htMoveInfo.nLastAngle-d),f=d+360,g=d-360;Math.abs(f-this._htMoveInfo.nLastAngle)<e?d=f:Math.abs(g-this._htMoveInfo.nLastAngle)<e&&(d=g)}return d},_getTouchInfo:function(a){var b=[],c=a.$value().timeStamp;if(this._hasTouchEvent){var d=a.$value().changedTouches;for(var e=0,f=d.length;e<f;e++)b.push({el:jindo.m.getNodeElement(d[e].target),nX:d[e].pageX,nY:d[e].pageY,nTime:c})}else b.push({el:a.element,nX:a.pos().pageX,nY:a.pos().pageY,nTime:c});return b},getBaseElement:function(a){return this._el},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},destroy:function(){this.deactivate(),this._el=null;for(var a in this._htMoveInfo)this._htMoveInfo[a]=null;this._htMoveInfo=null;for(var a in this.htEndInfo)this.htEndInfo[a]=null;this.htEndInfo=null,this.bStart=null,this.bMove=null,this.nMoveType=null,this._nVSlope=null,this._nHSlope=null,this.bSetSlope=null}}).extend(jindo.m.UIComponent),jindo.m.Flicking=jindo.$Class({$init:function(a,b){this.option({bHorizontal:!0,nDefaultIndex:0,sClassPrefix:"flick-",sContentClass:"ct",nDuration:100,nFlickThreshold:40,bUseCircular:!1,sAnimation:"slide",nFlickDistanceOffset:null,bAutoResize:!0,bAutoSize:!0,nBounceDuration:100,bSetNextPanelPos:!1,bUseCss3d:jindo.m._isUseCss3d(!0),bUseTimingFunction:jindo.m._isUseTimingFunction(),bUseTranslate:!0,bActivateOnload:!0,bUseDiagonalTouch:!1});var c=jindo.m.getDeviceInfo();typeof b!="undefined"&&typeof b.sAnimation!="undefined"&&b.sAnimation==="cover"&&c.android&&!c.bChrome&&parseInt(c.version,10)>=4&&(c.galaxyS2||c.galaxyNote)&&this.option("bUseCss3d",!0),this.option(b||{}),this._setWrapperElement(a),this._initVar(),this._createDummyTag(),this._initTouch(),this.option("bActivateOnload")&&this.activate()},$static:{_htAnimation:{"circular-slide":"jindo.m.CircularSlideFlicking",slide:"jindo.m.SlideFlicking",cover:"jindo.m.CoverFlicking","circular-cover":"jindo.m.CoverFlicking",flip:"jindo.m.FlipFlicking","circular-flip":"jindo.m.FlipFlicking",alignFlip:"jindo.m.AlignFlipFlicking","circular-alignFlip":"jindo.m.AlignFlipFlicking"}},_initVar:function(){this._oTouch=null,this._oFlickingAnimation=null,this._doFlicking=!1,this._htIndexInfo={nContentIndex:0,nNextContentIndex:0,welElement:this._htWElement.aPanel[0],welNextElement:this._htWElement.aPanel[0],sDirection:null};var a=jindo.m.getDeviceInfo();this._isIos=a.iphone||a.ipad,this._bAndroid=a.android&&!a.bChrome,this._nVersion=a.version,this._fnDummyFnc=function(){return!1},this._bClickBug=jindo.m.hasClickBug(),this._b3dExecption=this._bAndroid&&navigator.userAgent.indexOf("LG")>-1&&this._nVersion>="4",this._bDummyTagException=this._bAndroid&&this._nVersion<"3"},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a);var b="."+this.option("sClassPrefix");this._htWElement.base=jindo.$Element(a),this._htWElement.container=jindo.$Element(jindo.$$.getSingle(b+"container",a));var c=jindo.$$(b+this.option("sContentClass"),a);this._htWElement.aPanel=jindo.$A(c).forEach(function(a,b,c){c[b]=jindo.$Element(a)}).$value(),typeof this._htWElement.base.$value().style.msTouchAction!="undefined"&&this._htWElement.base.css("msTouchAction","none")},_createDummyTag:function(){if(this._bDummyTagException){this._htWElement.aDummyTag=[];for(var a=0,b=this._htWElement.aPanel.length;a<b;a++){var c=this._htWElement.aPanel[a],d=jindo.$$.getSingle("._cflick_dummy_atag_",c.$value());d||(d=jindo.$("<a href='javascript:void(0);' class='_cflick_dummy_atag_'></a>"),d.style.position="absolute",d.style.left="-1000px",d.style.top="-1000px",d.style.width=0,d.style.height=0,c.append(d)),this._htWElement.aDummyTag.push(d)}}},_focusFixedBug:function(){if(!this._htWElement||typeof this._htWElement.aDummyTag=="undefined")return;for(var a=0,b=this._htWElement.aDummyTag.length;a<b;a++)this._htWElement.aDummyTag[a].focus()},_initTouch:function(){this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nSlopeThreshold:4,nMoveThreshold:0,nEndEventThreshold:jindo.m.getDeviceInfo().win?400:0,bActivateOnload:!1})},_onStart:function(a){if(this._doFlicking)return;if(!this.fireEvent("touchStart",a)){a.stop();return}this._bTouchStart=!0,this._clearAnchor(),this._oFlickingAnimation&&this._oFlickingAnimation.onStart()},_onMove:function(a){var b=this.option("bHorizontal"),c=a.oEvent;if(a.sMoveType===jindo.m.MOVETYPE[0])if(b)c.stop(jindo.$Event.CANCEL_ALL);else{this.fireEvent("scroll");return}else if(a.sMoveType===jindo.m.MOVETYPE[1])if(!b)c.stop(jindo.$Event.CANCEL_ALL);else{this.fireEvent("scroll");return}else if(a.sMoveType===jindo.m.MOVETYPE[2])if(this.option("bUseDiagonalTouch"))c.stop(jindo.$Event.CANCEL_ALL);else{this.fireEvent("scroll");return}if(this._doFlicking)return;if(!this._bTouchStart)return;this.fireEvent("touchMove",a);var d=b?a.nDistanceX:a.nDistanceY,e=b?a.nVectorX:a.nVectorY,f=b?a.nX:a.nY;this._oFlickingAnimation&&this._oFlickingAnimation.movePanel(d,e,f,0)},_onEnd:function(a){if(this._doFlicking)return;if(!this._bTouchStart)return;this._doFlicking=!0;var b=this.option("bHorizontal");this._bAndroid&&this._nVersion>="4.1"||(a.sMoveType===jindo.m.MOVETYPE[0]||a.sMoveType===jindo.m.MOVETYPE[1]||a.sMoveType===jindo.m.MOVETYPE[2])&&a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),(a.sMoveType===jindo.m.MOVETYPE[3]||a.sMoveType===jindo.m.MOVETYPE[4])&&this._restoreAnchor();var c=this.option("nDuration"),d=this._getSnap(a.nDistanceX,a.nDistanceY,c,a.sMoveType),e=b?a.nDistanceX:a.nDistanceY,f=b?a.nVectorX:a.nVectorY,g=b?a.nX:a.nY;if(d.sDirection===null){c=this.option("nBounceDuration");if(e===0||a.sMoveType===jindo.m.MOVETYPE[2]&&!this.option("bUseDiagonalTouch")){this._endAnimation(!1);return}}var h={nContentsIndex:this.getContentIndex(),nContentsNextIndex:d.nContentIndex};this._bFlickLeft!==null&&(this.option("bHorizontal")?h.bLeft=this._bFlickLeft:h.bTop=this._bFlickLeft);if(d.sDirection!==null&&!this.fireEvent("beforeFlicking",h)){this._oFlickingAnimation.restorePosition();return}this._htIndexInfo.nNextContentIndex=d.nContentIndex,this._htIndexInfo.welNextElement=d.welElement,this._htIndexInfo.sDirection=d.sDirection,this._oFlickingAnimation&&this._oFlickingAnimation.movePanel(e,f,g,c,!0),this.fireEvent("touchEnd",a)},_getSnap:function(a,b,c,d){var e=this.option("bHorizontal")?a:b,f=this._htIndexInfo.welElement,g=this.getContentIndex(),h=null;return(d!==jindo.m.MOVETYPE[2]||!!this.option("bUseDiagonalTouch"))&&Math.abs(e)>=this.option("nFlickThreshold")&&(e<0?(f=this.getNextElement(),g=this.getNextIndex(),this._bFlickLeft=!0,h="next"):(f=this.getPrevElement(),g=this.getPrevIndex(),this._bFlickLeft=!1,h="prev")),{elElement:f.$value(),welElement:f,nContentIndex:g,sDirection:h}},_createAnimation:function(sType){if(jindo.m.Flicking._htAnimation[sType]){this._oFlickingAnimation=null;try{this._oFlickingAnimation=eval("new "+jindo.m.Flicking._htAnimation[sType]+"()")}catch(e){}}},setFlickingAnimation:function(a){typeof a=="undefined"&&(a=this.option("sAnimation"),this.option("bUseCircular")&&(a="circular-"+a));if(!jindo.m.Flicking._htAnimation[a])return!1;if(!this._oFlickingAnimation||this.option("sAnimation")!==a)this.option("sAnimation",a),a==="slide"?this._oTouch.deactivate():this._oTouch.activate(),this._createAnimation(a),this._oFlickingAnimation&&(this._oFlickingAnimation.setOption(this.option()),this._oFlickingAnimation.setWrapperElement(this._htWElement),this._oFlickingAnimation.setInstance(this),this._oFlickingAnimation.initAnimation())},_endAnimation:function(a){var b=this;typeof a=="undefined"&&(a=!0),this._doFlicking=!1,this._bTouchStart=!1,this._resetIndexInfo(this._htIndexInfo.nNextContentIndex,this._htIndexInfo.welNextElement),a&&this._fireCustomEvent("afterFlicking"),this._restoreAnchor(),this._setAnchorElement(),setTimeout(function(){b._createDummyTag(),b._focusFixedBug()},5),this._bFlickLeft=null},_fireCustomEvent:function(a,b){return typeof b=="undefined"&&(b={nContentsIndex:this.getContentIndex()},this._bFlickLeft&&(this.option("bHorizontal")?b.bLeft=this._bFlickLeft:b.bTop=this._bFlickLeft)),this.fireEvent(a,b)},refresh:function(a,b,c){var d=this;typeof a=="undefined"&&(a=this.getContentIndex());if(isNaN(a*1)||a<0)return;var e=this.getTotalContents()-1;if(a>e)return;typeof b=="undefined"&&(b=!0),typeof c=="undefined"&&(c=!0);if(c&&!this._fireCustomEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:a}))return;this._oFlickingAnimation&&this._oFlickingAnimation.refresh(a,b,c),this._resetIndexInfo(a),c&&this._fireCustomEvent("move"),this._restoreAnchor(),this._setAnchorElement(),this._createDummyTag(),setTimeout(function(){d._focusFixedBug()},100)},_resetIndexInfo:function(a,b){this._htIndexInfo.nContentIndex=a,this._htIndexInfo.nNextContentIndex=a,typeof b=="undefined"&&(b=this.getElement()),this._htIndexInfo.welElement=b,this._htIndexInfo.welNextElement=b,this._htIndexInfo.sDirection=null},getIndexByElement:function(a){var b=-1;for(var c=0,d=this._htWElement.aPanel.length;c<d;c++)if(this._htWElement.aPanel[c].$value()===a){b=c;break}return b},getElement:function(){var a=null;return this.option("bUseCircular")?a=jindo.$Element(this._htIndexInfo.welElement):a=this._htWElement.aPanel[this.getContentIndex()],a},getContentElement:function(){return this.getElement()},getContentIndex:function(){return this._htIndexInfo.nContentIndex},getNextElement:function(){var a=this.getNextIndex();return this.option("bUseCircular")&&(a=this.getIndexByElement(this.getElement().$value()),a=a+1>2?0:a+1),this._htWElement.aPanel[a]},getPrevElement:function(){var a=this.getPrevIndex();return this.option("bUseCircular")&&(a=this.getIndexByElement(this.getElement().$value()),a=a-1<0?2:a-1),this._htWElement.aPanel[a]},getTotalContents:function(){var a=this._htWElement.aPanel.length;return this.option("bUseCircular")&&(typeof this.option("nTotalContents")=="undefined"?a=3:a=this.option("nTotalContents")),a},getTotalPanels:function(){return this.option("bUseCircular")?3:this.getTotalContents()},getPrevIndex:function(){var a=this.getContentIndex()-1;return this.option("bUseCircular")&&a<0&&(a=this.getTotalContents()-1),a=Math.max(0,a),a},getNextIndex:function(){var a=this.getContentIndex()+1,b=this.getTotalContents()-1;return this.option("bUseCircular")&&a>b&&(a=0),a=Math.min(b,a),a},moveNext:function(a){if(!this.isActivating())return;if(this._doFlicking)return;typeof a=="undefined"&&(a=this.option("nDuration")),this._oFlickingAnimation&&(this._bTouchStart=!0,this._oFlickingAnimation.moveNext(a))},movePrev:function(a){if(!this.isActivating())return;if(this._doFlicking)return;typeof a=="undefined"&&(a=this.option("nDuration")),this._oFlickingAnimation&&(this._bTouchStart=!0,this._oFlickingAnimation.movePrev(a))},_moveTo:function(a,b,c,d){typeof b=="undefined"&&(b=this.option("nDuration")),typeof c=="undefined"&&(c=!0),typeof d=="undefined"&&(d=!1);if(c&&!this._fireCustomEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:a}))return;this._oFlickingAnimation.moveTo(a,b,c,d)},moveTo:function(a,b,c){if(typeof a=="undefined"||a==this.getContentIndex())return;if(a<0||a>=this.getTotalContents())return;this._moveTo(a,b,c,!1)},isAnimating:function(){return this._doFlicking},_setAnchorElement:function(a){this._bClickBug&&(this._aAnchor=jindo.$$("A",this._htWElement.container.$value()))},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){var a=null;for(var b=0,c=this._aAnchor.length;b<c;b++){this._fnDummyFnc!==this._aAnchor[b].onclick&&(this._aAnchor[b]._onclick=this._aAnchor[b].onclick),this._aAnchor[b].onclick=this._fnDummyFnc,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;d<e;d++)___Old__removeEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){var a=null;for(var b=0,c=this._aAnchor.length;b<c;b++){this._fnDummyFnc!==this._aAnchor[b]._onclick?this._aAnchor[b].onclick=this._aAnchor[b]._onclick:this._aAnchor[b].onclick=null,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;d<e;d++)___Old__addEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!1}},_onResize:function(a){this._isFlicking=!1;if(this.option("bAutoResize")){var b=this.getIndexByElement(this.getElement().$value());this.refresh(b,!0,!1)}this.fireEvent("rotate",{isVertical:a.isVertical})},_onScroll:function(a){if(this._doFlicking){var b=this.getIndexByElement(this.getElement().$value()),c=this;setTimeout(function(){if(c._doFlicking){var a=c._htIndexInfo.nNextContentIndex;c._endAnimation(!1),c.refresh(a,!0,!1)}},this.option("nDuration")+20)}},_onActivate:function(){this._attachEvent(),this._setAnchorElement(),this._oFlickingAnimation?typeof this._oFlickingAnimation._oCore!="undefined"?this._oFlickingAnimation._oCore.activate():this._oTouch.activate():this.setFlickingAnimation();var a=this.option("nDefaultIndex");this.refresh(a,!0,!1)},_onDeactivate:function(){this._detachEvent(),this._oFlickingAnimation&&typeof this._oFlickingAnimation._oCore!="undefined"&&this._oFlickingAnimation._oCore.deactivate(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._oTouch.attach("touchStart",this._htEvent.touchStart),this._oTouch.attach("touchMove",this._htEvent.touchMove),this._oTouch.attach("touchEnd",this._htEvent.touchEnd),this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEvent.pageshow=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindPageshow(this._htEvent.pageshow),this._isIos&&parseInt(this._nVersion,10)===6&&(this._htEvent.scroll={fn:jindo.$Fn(this._onScroll,this).bind(),el:window},this._htEvent.scroll.ref=jindo.m._attachFakeJindo(this._htEvent.scroll.el,this._htEvent.scroll.fn,"scroll"))},_detachEvent:function(){this._oTouch.detachAll(),jindo.m.unbindRotate(this._htEvent.rotate);for(var a in this._htEvent){var b=this._htEvent[a];typeof b.ref!="undefined"&&b.ref.detach(b.el,a)}this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._oTouch=null,this._oFlickingAnimation=null;for(var b in this._htIndexInfo)this._htIndexInfo[a]=null;this._isIos=null,this._bAndroid=null,this._nVersion=null,this._fnDummyFnc=null,this._doFlicking=null,this._bClickBug=null,this._b3dExecption=null,this._bDummyTagException=null}}).extend(jindo.m.UIComponent),jindo.m.FlickingAnimation=jindo.$Class({$init:function(){this._WrapperInstacne=null,this.bH=!0,this._elTransition=null,this._sCssPrefix=jindo.m.getCssPrefix(),this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htOption={}},setOption:function(a){for(var b in a)this._htOption[b]=a[b];this.bH=this._htOption.bHorizontal},setWrapperElement:function(a){this._htWElement={};for(var b in a)this._htWElement[b]=a[b]},initAnimation:function(){this._initAnimation()},onStart:function(){this._onStart()},_onStart:function(){},moveTo:function(a,b,c,d){this._moveTo(a,b,c,d)},_moveTo:function(a,b,c,d,e){},refresh:function(a,b){this._refresh(a,b)},movePanel:function(a,b,c,d,e){this._movePanel(a,b,c,d,e)},setInstance:function(a){this._WrapperInstacne=a},endAnimation:function(a){typeof a=="undefined"&&(a=!0),this._WrapperInstacne._endAnimation(a)},restorePosition:function(){},_onTransitionEnd:function(){},moveNext:function(){},movePrev:function(a){},_attachTransitionEnd:function(a,b){if(a===this._WrapperInstacne.getElement().$value()||a===this._htWElement.container.$value()){this._elTransition=a;var c=this;b===0?setTimeout(function(){c._onTransitionEnd()},10):(b+=10,setTimeout(function(){c._onTransitionEnd()},b))}},_detachTransitionEnd:function(){this._elTransition&&jindo.m.detachTransitionEnd(this._elTransition,this._wfTransitionEnd)}}),jindo.m.AlignFlipFlicking=jindo.$Class({sAnimationName:"alignFlip",$init:function(){this._bMoveDirection=null,this._bMove=!1},_initAnimation:function(){this._setElementStyle(),this._setElementSize(),this._sAlign=this._htOption.sFlipAlign,this._prepareFlip()},_prepareFlip:function(){this._htWElement.base.css(this._sCssPrefix+"Perspective",1200)},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden").css("position","relative"),jindo.$A(this._htWElement.aPanel).forEach(function(a,b,c){var d=a;d.css("position","absolute").css("width","100%").css("height","100%")})},_setElementSize:function(){this.nWidth=this._htWElement.base.width(),this.nHeight=this._htWElement.base.height()},_refresh:function(a,b,c){typeof a=="undeinfed"&&(a=this._WrapperInstacne.getContentIndex());var d=a;this._htOption.bUseCircular&&(d=a%3),b&&(this._setElementSize(),this._prepareFlip()),this._htWElement.base.css(this._sCssPrefix+"PerspectiveOrigin","50% 50%");for(var e=0,f=this._htWElement.aPanel.length;e<f;e++)e===d?this._htWElement.aPanel[e].show().css("zIndex",10):this._htWElement.aPanel[e].hide().css("zIndex",1);this._WrapperInstacne._htIndexInfo.nContentIndex=a,this._WrapperInstacne._htIndexInfo.welElement=this._htWElement.aPanel[d]},_setFlipElement:function(){var a=90,b=this._getFlipElement();this._setFlipAlign(b),this._bMoveDirection==="prev"?this._htOption.sFlipAlign==="left"?this._rotate(b,a*-1):this._htOption.sFlipAlign==="top"&&this._rotate(b,a):this._bMoveDirection==="next"&&(this._htOption.sFlipAlign==="bottom"?this._rotate(b,a*-1):this._htOption.sFlipAlign==="right"&&this._rotate(b,a)),b.show().css("zIndex",110);var c=this._bMoveDirection==="prev"?this._WrapperInstacne.getPrevElement():this._WrapperInstacne.getNextElement();c.$value()!==b.$value()&&c.show().css("zIndex",90)},_getFlipElement:function(){var a=this._WrapperInstacne.getContentElement();if(this._bMoveDirection==="prev"){if(this._htOption.sFlipAlign==="left"||this._htOption["sFlipAlign"]=="top")a=this._WrapperInstacne.getPrevElement()}else this._bMoveDirection==="next"&&(this._htOption.sFlipAlign==="right"||this._htOption["sFlipAlign"]=="bottom")&&(a=this._WrapperInstacne.getNextElement());return a},_getFlipNextElement:function(){var a=this._WrapperInstacne.getNextElement();if(this._bMoveDirection==="next"){if(this._htOption["sFlipAlign"]=="right"||this._htOption.sFlipAlign==="bottom")a=this._WrapperInstacne.getContentElement()}else this._bMoveDirection==="prev"&&(this._htOption["sFlipAlign"]=="left"||this._htOption.sFlipAlign==="top")&&(a=this._WrapperInstacne.getContentElement());return a},_movePanel:function(a,b,c,d,e){if(e)this._bMove&&this._onEnd();else{if(this._bMoveDirection===null){if(a>0)this._bMoveDirection="prev";else if(a<0)this._bMoveDirection="next";else return;this._setFlipElement(),this._WrapperInstacne._restoreAnchor(),this._WrapperInstacne._setAnchorElement(),this._WrapperInstacne._clearAnchor()}else{var f=this.bH?this.nWidth:this.nHeight,g=this._WrapperInstacne.getContentElement();if(this._bMoveDirection==="prev"){if(this._htOption.sFlipAlign==="left"||this._htOption.sFlipAlign==="top")g=this._WrapperInstacne.getPrevElement();this._nDeg=Math.max(0,Math.min(70,Math.round(a*1/f*70))),this._setPrevRotate(g,this._nDeg)}else if(this._bMoveDirection==="next"){if(this._htOption.sFlipAlign==="right"||this._htOption.sFlipAlign==="bottom")g=this._WrapperInstacne.getNextElement();this._nDeg=Math.max(0,Math.min(70,Math.round(a*-1/f*70))),this._setNextRotate(g,this._nDeg)}}this._bMove=!0}},_setPrevRotate:function(a,b){var c=this.bH?b:-b,d=0;this._htOption.sFlipAlign==="left"?d=-70:this._htOption.sFlipAlign==="top"&&(d=80);var e=d+c;this._htOption.sFlipAlign==="right"?e=Math.min(90,e):this._htOption.sFlipAlign==="bottom"?e=Math.max(-90,e):this._htOption.sFlipAlign==="left"?e=Math.min(0,e):e=Math.max(0,e),this._rotate(a,e).css("zIndex",110)},_setNextRotate:function(a,b){var c=this.bH?-b:b,d=0,e=0;this._htOption.sFlipAlign==="right"?e=70:this._htOption.sFlipAlign==="bottom"&&(e=-80);var f=e+c;this._htOption.sFlipAlign==="top"?f=Math.min(90,f):this._htOption.sFlipAlign==="left"?f=Math.max(-90,f):this._htOption.sFlipAlign==="bottom"?CurrentDeg=Math.min(0,f):f=Math.max(0,f),this._rotate(a,f).css("zIndex",110)},_setFlipAlign:function(a){var b="";this.bH?b=this._htOption.sFlipAlign+" center":b="center "+this._htOption.sFlipAlign,a.css(this._sCssPrefix+"TransformOrigin",b)},_rotate:function(a,b){if(a){var c=this.bH?"rotateY("+b+"deg)":"rotateX("+b+"deg)",d={};d[this._sCssPrefix+"Transition"]=this._sCssPrefix+"-transform 0s linear",d[this._sCssPrefix+"Transform"]="perspective(500px) "+c+" rotateZ(0deg)",a.css(d)}return a},_onEnd:function(){this._bFinished=!1;var a=this._WrapperInstacne._htIndexInfo.sDirection===null?!0:!1;this._bMoveDirection!==this._WrapperInstacne._htIndexInfo.sDirection&&(a=!0,this._WrapperInstacne._htIndexInfo.sDirection=null,this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex,this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement),this._bMoveDirection==="prev"&&this._WrapperInstacne.getElement().$value()===this._WrapperInstacne.getPrevElement()&&(a=!0,this._WrapperInstacne._htIndexInfo.sDirection=null,this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex,this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement),this._bMoveDirection==="next"&&this._WrapperInstacne.getElement().$value()===this._WrapperInstacne.getNextElement().$value()&&(a=!0,this._WrapperInstacne._htIndexInfo.sDirection=null,this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex,this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement);var b=this._getFlipElement(),c=this,d=a?this._htOption.nBounceDuration:this._htOption.nDuration,e=a?0:90;if(this._nDeg===0)this._bFinished=!0,setTimeout(function(){c._onTransitionEnd()},10);else{var f=(new Date).getTime(),g=this._nDeg,h=90;(function i(){var a=(new Date).getTime(),j;if(a>=f+d){cancelAnimationFrame(c._nTimerAnimate),c._bMoveDirection==="next"?c._setNextRotate(b,e):c._setPrevRotate(b,e),c._onTransitionEnd();return}a=(a-f)/d-1,j=Math.sqrt(1-Math.pow(a,2));var k=(e-g)*j+g;c._nDeg=Math.min(k,h),c._bMoveDirection==="next"?c._setNextRotate(b,c._nDeg):c._setPrevRotate(b,c._nDeg),c._nTimerAnimate=requestAnimationFrame(i)})()}},_onStart:function(){this._resetInfo()},_resetInfo:function(){this._bMoveDirection=null,this._bMove=!1,this._nDeg=-1,this._bFinished=!0},_onTransitionEnd:function(){this._detachTransitionEnd();var a=!0;this._WrapperInstacne._htIndexInfo.sDirection===null&&(a=!1),this._restorePanel(this._WrapperInstacne._htIndexInfo.welNextElement.$value()),this._resetInfo(),this.endAnimation(a)},_restorePanel:function(a){jindo.$A(this._htWElement.aPanel).forEach(function(b,c,d){b.$value().style[this._sCssPrefix+"TransitionDuration"]=null,b.$value().style[this._sCssPrefix+"Transform"]="",b.$value()===a?b.show().css("zIndex",10):b.hide().css("zIndex",1)},this)},movePrev:function(a){var b=this._WrapperInstacne.getPrevElement();if(b.$value()===this._WrapperInstacne.getElement().$value())return;this._bMoveDirection="prev",this._setFlipElement(),this._bMove=!0,this._nDeg=1;var c=this._htOption.nFlickThreshold;this._bMoveDirection="prev",this._WrapperInstacne._onEnd({nDistanceX:c+10,nDistanceY:c+10,nX:10,nY:10},a)},moveNext:function(a){var b=this._WrapperInstacne.getNextElement();if(b.$value()===this._WrapperInstacne.getElement().$value())return;this._bMoveDirection="next",this._setFlipElement(),this._bMove=!0,this._nDeg=1;var c=this._htOption.nFlickThreshold*-1,d=this.bH?this._htWElement.base.width():this._htWElement.base.height();this._WrapperInstacne._onEnd({nDistanceX:c-10,nDistanceY:c-10,nX:d-10,nY:d-10},a)}}).extend(jindo.m.FlickingAnimation),jindo.m.CircularSlideFlicking=jindo.$Class({sAnimationName:"slide",$init:function(){this._isIos=jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad,this._isAndroid=jindo.m.getDeviceInfo().android,this._isChrome=this._isAndroid&&jindo.m.getDeviceInfo().bChrome,this._nVersion=jindo.m.getDeviceInfo().version,this._sTranslateStart="translate(",this._sTranslateEnd=")",this._bSetTopPos=!1,this._nLastDis=null,this._b3dExecption=!1},_initAnimation:function(){this._bUseCss3d=this._htOption.bUseCss3d,this._setElementStyle(),this._setElementSize(),this._setPanelPos(),this._prepareTransition()},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden"),this._htWElement.container.css("position","relative").css("width","100%"),this.bH&&this._htWElement.container.css("clear","both");var a=this.bH;jindo.$A(this._htWElement.aPanel).forEach(function(b,c,d){var e=b;e.css("position","absolute").css("width","100%").css("height","100%"),a&&e.css("float","left")})},_setPanelPos:function(){var a=this._htWElement.base.$value(),b=this.bH?a.clientWidth:a.clientHeight;this._htPositionInfo={left:0,center:100,right:200},this._htContainerInfo={left:b*-1,center:0,right:b},this._nDefaultSize=b},_setElementSize:function(){this.bH?this._htWElement.container.height(this._htWElement.base.height()):this._htWElement.container.height(this._htWElement.base.height())},_prepareTransition:function(){this._htOption.bUseCss3d&&(this._sTranslateStart="translate3d(",this._sTranslateEnd=",0px)");var a="all";for(var b=0,c=this._htWElement.aPanel.length;b<c;b++)this._htOption.bUseTranslate&&this._htWElement.aPanel[b].css(this._sCssPrefix+"Transform",this._sTranslateStart+"0px,0px"+this._sTranslateEnd),this._htWElement.aPanel[b].css(this._sCssPrefix+"TransitionProperty",a)},_refresh:function(a,b,c){var d=this,e=a%3,f=(e-1<0?2:e-1)%3,g=(e+1>2?0:e+1)%3;b&&(this._setElementSize(),this._setPanelPos());var h=this.bH?"left":"top";this._htWElement.container.css(this._sCssPrefix+"TransitionDuration","0ms");if(this._b3dExecption)if(this._htOption.bUseTranslate||this._htOption.bUseCss3d){var i="";this._htWElement.container.css(this._sCssPrefix+"Transform",i)}this._htWElement.container.css(h,"-100%"),this._htOption.bUseTranslate&&(this._b3dExecption?setTimeout(function(){d._htWElement.container.css(d._sCssPrefix+"Transform",d._sTranslateStart+"0,0px"+d._sTranslateEnd)},50):this._htWElement.container.css(this._sCssPrefix+"Transform",this._sTranslateStart+"0,0px"+this._sTranslateEnd)),this._htWElement.aPanel[e].css(h,this._htPositionInfo.center+"%").css("zIndex",10),this._htWElement.aPanel[f].css(h,this._htPositionInfo.left+"%").css("zIndex",1),this._htWElement.aPanel[g].css(h,this._htPositionInfo.right+"%").css("zIndex",1),this._WrapperInstacne._htIndexInfo.welElement=this._htWElement.aPanel[e]},_movePanel:function(a,b,c,d,e){var f=this,g=this._WrapperInstacne.getElement(),h=this._WrapperInstacne.getPrevElement(),i=this._WrapperInstacne.getNextElement(),j=this._htWElement.container;if(this._htOption.bSetNextPanelPos&&Math.abs(a)>5){var k=g.offset().top-window.scrollY;if(k<0){this._bSetTopPos=!0;if(this._isIos){var l=this._sTranslateStart+"0,"+k*-1+"px"+this._sTranslateEnd;h.css(this._sCssPrefix+"Transform",l),i.css(this._sCssPrefix+"Transform",l)}else h.css("top",k*-1+"px"),i.css("top",k*-1+"px")}}if(!e||this._htOption.bUseTimingFunction||d===0)this._setPosition(j,a,b,c,d,e);else{a=this._nLastDis?this._nLastDis:a;var m=(new Date).getTime(),n=a,o=a,p=b,q=this.bH?this._htWElement.base.width():this._htWElement.base.height();this._WrapperInstacne._htIndexInfo.sDirection===null&&(this._htOption.bUseTranslate?q=0:q=-100),a<0&&(q*=-1),function r(){var a=(new Date).getTime(),b,e;if(a>=m+d){cancelAnimationFrame(f._nTimerAnimate),delete f._nTimerAnimate,f._setPosition(j,q,e-o,c,0,!1),setTimeout(function(){f._onTransitionEnd()},100);return}a=(a-m)/d-1,b=Math.sqrt(1-Math.pow(a,2)),e=(q-n)*b+n,f._setPosition(j,e,e-o,c,0,!1),o=e,f._nTimerAnimate=requestAnimationFrame(r)}()}},restorePosition:function(){var a=this._htOption.nBounceDuration;this._movePanel(0,0,0,a,!0)},movePrev:function(a){var b=this._htOption.nFlickThreshold;this._WrapperInstacne._onEnd({nDistanceX:b+10,nDistanceY:b+10},a)},moveNext:function(a){var b=this._htOption.nFlickThreshold*-1;this._WrapperInstacne._onEnd({nDistanceX:b-10,nDistanceY:b-10},a)},_moveTo:function(a,b,c,d){this._WrapperInstacne.refresh(a,!1,c)},_onTransitionEnd:function(){this._detachTransitionEnd();var a=!0;this._WrapperInstacne._htIndexInfo.sDirection===null&&(a=!1),this._nLastDis=null,this._restorePanel(this._WrapperInstacne._htIndexInfo.welNextElement.$value()),this.endAnimation(a)},_restorePanel:function(a){var b=this,c=this.bH?"left":"top",d=this._WrapperInstacne.getIndexByElement(a),e=d-1<0?2:d-1,f=d+1>2?0:d+1;if(this._b3dExecption)if(this._htOption.bUseTranslate||this._htOption.bUseCss3d){var g="";this._htWElement.container.css(this._sCssPrefix+"Transform",g)}this._htWElement.aPanel[d].css(c,this._htPositionInfo.center+"%"),this._htWElement.aPanel[e].css(c,this._htPositionInfo.left+"%"),this._htWElement.aPanel[f].css(c,this._htPositionInfo.right+"%"),this._bSetTopPos&&(this._isIos?(this._htWElement.aPanel[d].css(this._sCssPrefix+"Transform",this._sTranslateStart+"0px,0px"+this._sTranslateEnd),this._htWElement.aPanel[e].css(this._sCssPrefix+"Transform",this._sTranslateStart+"0px,0px"+this._sTranslateEnd),this._htWElement.aPanel[f].css(this._sCssPrefix+"Transform",this._sTranslateStart+"0px,0px"+this._sTranslateEnd)):(this._htWElement.aPanel[d].css("top",""),this._htWElement.aPanel[e].css("top",""),this._htWElement.aPanel[f].css("top","")),this._bSetTopPos=!1),this._htWElement.container.css(this._sCssPrefix+"TransitionDuration","0ms"),this._htOption.bUseTranslate&&(this._b3dExecption?setTimeout(function(){b._htWElement.container.css(b._sCssPrefix+"Transform",b._sTranslateStart+"0,0px"+b._sTranslateEnd)},100):this._htWElement.container.css(this._sCssPrefix+"Transform",this._sTranslateStart+"0,0px"+this._sTranslateEnd));if(this._isIos){var h=jindo.$Element(this._htWElement.aPanel[e].$value().cloneNode(!0)),i=jindo.$Element(this._htWElement.aPanel[f].$value().cloneNode(!0));this._htWElement.aPanel[e].replace(h),this._htWElement.aPanel[f].replace(i),this._htWElement.aPanel[e]=h,this._htWElement.aPanel[f]=i,this._WrapperInstacne._htWElement.aPanel[e]=h,this._WrapperInstacne._htWElement.aPanel[f]=i}},_setPosition:function(a,b,c,d,e,f){typeof e=="undefined"&&(e=0),this._htOption.bUseTranslate?this._setPositionTransform(a,b,e,f):this._setPositionForStyle(a,b,c,e,f)},_setPositionForStyle:function(a,b,c,d,e){var f=this.bH?"left":"top";e&&(this._WrapperInstacne._htIndexInfo.sDirection===null?b=-100:b<0?b=-200:b=0);var g=b/this._nDefaultSize*100-100,h=e?b:g,i={};i[this._sCssPrefix+"TransitionProperty"]="all",i[this._sCssPrefix+"TransitionDuration"]=d===0?"0":d+"ms",i[f]=h+"%",this._nLastDis=b,e&&(h===parseFloat(a.css(f).replace("px",""),10)&&(d=0),this._attachTransitionEnd(a.$value(),d)),a.css(i)},_setPositionTransform:function(a,b,c,d){d&&(this._WrapperInstacne._htIndexInfo.sDirection===null?b=0:b<0?b=this._htContainerInfo.left:b=this._htContainerInfo.right);var e=this.bH?b:0,f=this.bH?0:b,g={};g[this._sCssPrefix+"TransitionProperty"]="all",g[this._sCssPrefix+"TransitionDuration"]=c===0?"0":c+"ms",g[this._sCssPrefix+"Transform"]=this._sTranslateStart+e+"px,"+f+"px"+this._sTranslateEnd,this._nLastDis=b;if(d){var h=jindo.m.getCssOffset(a.$value());h.left===e&&h.top===f&&(c=0),this._attachTransitionEnd(a.$value(),c)}a.css(g)}}).extend(jindo.m.FlickingAnimation),jindo.m.CoverFlicking=jindo.$Class({sAnimationName:"cover",$init:function(){this._bMoveDirection=null,this._bUnableTouchMove=!1,this._htDefaultOption={bUseMoveEffect:!0,nDefaultScale:.94},this._sTranslateStart="translate(",this._sTranslateEnd=")",this._sScaleStart="scale(",this._sScaleEnd=")"},_initAnimation:function(){this._initOption(),this._setElementSize(),this._setElementStyle(),this._prepareTransition()},_initOption:function(){for(var a in this._htDefaultOption)typeof this._htOption[a]=="undefined"&&(this._htOption[a]=this._htDefaultOption[a]);this._bUnableTouchMove=!this._htOption.bUseMoveEffect,this._htOption.bUseCss3d&&(this._sTranslateStart="translate3d(",this._sTranslateEnd=",0px)",this._sScaleStart="scale3d(",this._sScaleEnd=",1)")},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden"),this._htWElement.container.css("position","relative"),jindo.$A(this._htWElement.aPanel).forEach(function(a,b,c){var d=a;d.css("position","absolute").css("width","100%").css("height","100%")})},_setElementSize:function(){this._htWElement.container.height(this._htWElement.base.height())},_prepareTransition:function(){var a=this._htOption.bUseTranslate?"-webkit-transform":this.bH?"left":"top";for(var b=0,c=this._htWElement.aPanel.length;b<c;b++)this._htOption.bUseTranslate?this._htWElement.aPanel[b].css(this._sCssPrefix+"Transform",this._sTranslateStart+"0px,0px"+this._sTranslateEnd):this._htWElement.aPanel[b].css(a,"0px"),this._htWElement.aPanel[b].css(this._sCssPrefix+"TransitionProperty","all")},_refresh:function(a,b,c){typeof a=="undeinfed"&&(a=this._WrapperInstacne.getContentIndex());var d=a;this._htOption.bUseCircular&&(d=a%3),b&&this._setElementSize();for(var e=0,f=this._htWElement.aPanel.length;e<f;e++)e===d?this._htWElement.aPanel[e].show().css("zIndex",10).opacity(1):this._htWElement.aPanel[e].hide().css("zIndex",1).opacity(.2);this._WrapperInstacne._htIndexInfo.nContentIndex=a,this._WrapperInstacne._htIndexInfo.welElement=this._htWElement.aPanel[d]},_movePanel:function(a,b,c,d,e){var f=this,g=this._WrapperInstacne.getElement(),h=this._WrapperInstacne.getPrevElement(),i=this._WrapperInstacne.getNextElement();if(this._bMoveDirection===null&&Math.abs(a)>5){a>0?this._bMoveDirection="prev":this._bMoveDirection="next";var j=this._bMoveDirection==="prev"?this._WrapperInstacne.getPrevElement():this._WrapperInstacne.getNextElement();j.$value()===this._WrapperInstacne.getElement().$value()?(this._bMoveDirection=null,j=null):this._prepareZoomAnim(j)}if(!this._htOption.bUseTimingFunction&&d!==0&&e){var k=(new Date).getTime(),l=a,m=a,n=c,o=this.bH?this._htWElement.base.width():this._htWElement.base.height();if(this._bMoveDirection===null||this._bMoveDirection==="prev"&&a<0||this._bMoveDirection==="next"&&a>0)o=0,this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex,this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement,this._WrapperInstacne._htIndexInfo.sDirection=null;a<0&&(o*=-1),function p(){var a=(new Date).getTime(),b;if(a>=k+d){cancelAnimationFrame(f._nTimerAnimate),delete f._nTimerAnimate,f._onTransitionEnd();return}a=(a-k)/d-1,b=Math.sqrt(1-Math.pow(a,2));var c=(o-l)*b+l;f._setPosition(g,c,c-m,n+m,0,!1),m=c,f._nTimerAnimate=requestAnimationFrame(p)}()}else(!this._bUnableTouchMove||e)&&this._setPosition(g,a,b,c,d,e)},_prepareZoomAnim:function(a){a.show(),a.$value().style[this._sCssPrefix+"Transform"]=this._sScaleStart+this._htOption.nDefaultScale+", "+this._htOption.nDefaultScale+this._sScaleEnd},_setPosition:function(a,b,c,d,e,f){typeof e=="undefined"&&(e=0),this._htOption.bUseTranslate?this._setPositionTransform(a,b,d,e,f):this._setPositionForStyle(a,b,c,d,e,f)},_setPositionForStyle:function(a,b,c,d,e,f){var g=!1;f?this._WrapperInstacne._htIndexInfo.sDirection!==null?b<0&&this._bMoveDirection==="next"?b=this._htWElement.base.width()*-1:b>0&&this._bMoveDirection==="prev"?b=this._htWElement.base.width():(b=0,this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex,this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement,this._WrapperInstacne._htIndexInfo.sDirection=null,g=!0):(b=0,g=!0):b=c;var h=this.bH?"left":"top",i=f?b:(parseFloat(a.css(h).replace("px",""),10)||0)+b,j={};j[this._sCssPrefix+"TransitionDuration"]=e===0?"0":e+"ms",j[h]=i+"px";var k=this._getZoomElement(),l=this._getCalculateZoom(d,e,f,g);f&&this._attachTransitionEnd(a.$value());if(k)for(var m in l)k.$value().style[m]=l[m];a.css(j)},_setPositionTransform:function(a,b,c,d,e){var f=!1;e&&(this._WrapperInstacne._htIndexInfo.sDirection!==null?b<0&&this._bMoveDirection==="next"?b=this._htWElement.base.width()*-1:b>0&&this._bMoveDirection==="prev"?b=this._htWElement.base.width():(b=0,this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex,this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement,this._WrapperInstacne._htIndexInfo.sDirection=null,f=!0):(b=0,f=!0));var g=this.bH?b:0,h=this.bH?0:b,i={};i[this._sCssPrefix+"TransitionProperty"]="all",i[this._sCssPrefix+"TransitionDuration"]=d===0?"0":d+"ms",i[this._sCssPrefix+"Transform"]=this._sTranslateStart+g+"px,"+h+"px"+this._sTranslateEnd;var j=this._getZoomElement(),k=this._getCalculateZoom(c,d,e,f);e&&this._attachTransitionEnd(a.$value(),d),j&&j.css(k),a.css(i)},_getZoomElement:function(){var a=null;return this._bMoveDirection==="prev"?a=this._WrapperInstacne.getPrevElement():this._bMoveDirection==="next"&&(a=this._WrapperInstacne.getNextElement()),a&&a.$value()===this._WrapperInstacne.getElement().$value()&&(a=null),a},_getCalculateZoom:function(a,b,c,d){var e=1;e=c?e:this._getCalculate(a),e=d?0:e;var f=this._htOption.nDefaultScale,g={};return g[this._sCssPrefix+"TransitionDuration"]=b===0?"0":b+"ms",g.opacity=e,g[this._sCssPrefix+"Transform"]=this._sScaleStart+(f+e*(1-f))+","+(f+e*(1-f))+this._sScaleEnd,g},_getCalculate:function(a){var b=this.bH?this._htWElement.base.width():this._htWElement.base.height(),c=this._bMoveDirection==="prev"?1+(a-b)/b:(b-a)/b;return Math.min(1,c)},_resetInfo:function(){this._bMoveDirection=null},_onTransitionEnd:function(){this._detachTransitionEnd();var a=!0;this._WrapperInstacne._htIndexInfo.sDirection===null&&(a=!1),this._WrapperInstacne._htIndexInfo.nContentIndex=this._WrapperInstacne._htIndexInfo.nNextContentIndex;var b=this.bH?"left":"top";jindo.$A(this._htWElement.aPanel).forEach(function(a,c,d){a.$value().style[this._sCssPrefix+"TransitionDuration"]=null,this._htOption.bUseTranslate?a.$value().style[this._sCssPrefix+"Transform"]=this._sTranslateStart+"0px, 0px"+this._sTranslateEnd:a.$value().style[b]="0px"},this),this._restorePanel(this._WrapperInstacne._htIndexInfo.welNextElement.$value()),this.endAnimation(a),this._resetInfo()},_restorePanel:function(a){for(var b=0,c=this._htWElement.aPanel.length;b<c;b++){var d=this._htWElement.aPanel[b];d.$value()===a?this._htWElement.aPanel[b].show().css("zIndex",10).opacity(1):this._htWElement.aPanel[b].hide().css("zIndex",1).opacity(.2)}this._WrapperInstacne._htIndexInfo.welElement=this._WrapperInstacne._htIndexInfo.welNextElement},_moveTo:function(a,b,c,d){this._WrapperInstacne._htIndexInfo.nNextPanelIndex=a,this._WrapperInstacne._htIndexInfo.nNextContentIndex=a;var e=this._htOption.nFlickThreshold+10;a===this._WrapperInstacne.getNextIndex()?this._movePanel(e*-1,0,0,b,!0):a===this._WrapperInstacne.getPrevIndex()?this._movePanel(e,0,0,b,!0):this._refresh(a,!1,c)},movePrev:function(a){var b=this._WrapperInstacne.getPrevElement();if(b.$value()===this._WrapperInstacne.getElement().$value())return;this._prepareZoomAnim(b);var c=this._htOption.nFlickThreshold;this._WrapperInstacne._onEnd({nDistanceX:c+10,nDistanceY:c+10,nX:10,nY:10},a)},moveNext:function(a){var b=this._WrapperInstacne.getNextElement();if(b.$value()===this._WrapperInstacne.getElement().$value())return;this._prepareZoomAnim(b);var c=this._htOption.nFlickThreshold*-1,d=this.bH?this._htWElement.base.width():this._htWElement.base.height();this._WrapperInstacne._onEnd({nDistanceX:c-10,nDistanceY:c-10,nX:d-10,nY:d-10},a)}}).extend(jindo.m.FlickingAnimation),jindo.m.FlipFlicking=jindo.$Class({sAnimationName:"flip",$init:function(){this._bMoveDirection=null,this._bMove=!1},_initAnimation:function(){this._setElementSize(),this._setElementStyle(),this._prepareFlip()},_prepareFlip:function(){if(typeof this._htWElement.left=="undefined"){this._htWElement.base.css(this._sCssPrefix+"Perspective",1200);var a=this._htOption.sClassPrefix+"left",b=this._htOption.sClassPrefix+"right";this._htWElement.container.append(jindo.$('<div class="'+a+'" style="position:absolute;overflow:hidden;left:0px;top:0px;outline:1px solid rgba(255, 0, 0, .0);"></div>')),this._htWElement.container.append(jindo.$('<div class="'+b+'"  style="position:absolute;overflow:hidden;left:0px;top:0px;outline:1px solid rgba(255, 0, 0, .0);"></div>')),this._htWElement.container.height(this._htWElement.base.height()),this._htWElement.left=jindo.$Element(jindo.$$.getSingle("."+a,this._htWElement.container.$value())),this._htWElement.right=jindo.$Element(jindo.$$.getSingle("."+b,this._htWElement.container.$value())),this.bH?(this._htWElement.left.css("height","100%"),this._htWElement.right.css("height","100%")):(this._htWElement.left.css("width","100%"),this._htWElement.right.css("width","100%"))}this.bH?(this._htWElement.left.width(this.nCenter),this._htWElement.right.width(this.nCenter)):(this._htWElement.left.height(this.nCenter),this._htWElement.right.height(this.nCenter))},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden"),this._htWElement.container.css("position","relative").height(this.nHeight),jindo.$A(this._htWElement.aPanel).forEach(function(a,b,c){var d=a;d.css("position","absolute").css("width","100%").css("height","100%")})},_setElementSize:function(){this.nWidth=this._htWElement.base.width(),this.nHeight=this._htWElement.base.height(),this.nCenter=Math.round((this.bH?this.nWidth:this.nHeight)/2)},_refresh:function(a,b,c){typeof a=="undeinfed"&&(a=this._WrapperInstacne.getContentIndex());var d=a;this._htOption.bUseCircular&&(d=a%3),b&&(this._setElementSize(),this._prepareFlip()),this._htWElement.left.hide().show(),this._htWElement.right.hide().show(),this._htWElement.right.css(this.bH?"left":"top",this.nCenter+"px");var e={};e[this._sCssPrefix+"PerspectiveOrigin"]="50% 50%",this._htWElement.base.css(e);for(var f=0,g=this._htWElement.aPanel.length;f<g;f++)f===d?this._htWElement.aPanel[f].show().css("zIndex",10):this._htWElement.aPanel[f].hide().css("zIndex",1);this._WrapperInstacne._htIndexInfo.nContentIndex=a,this._WrapperInstacne._htIndexInfo.welElement=this._htWElement.aPanel[d]},_setCloneElement:function(){var a=this._WrapperInstacne.getContentElement(),b;this._bMoveDirection==="prev"?(b=this._WrapperInstacne.getPrevElement(),b.$value()===a.$value()?this._htWElement.left.empty().append(jindo.$Element(jindo.$("<div></div>")).show().width(this.nWidth)):this._htWElement.left.empty().append(jindo.$Element(b.$value().cloneNode(!0)).show().width(this.nWidth)),this._htWElement.right.empty().append(jindo.$Element(a.$value().cloneNode(!0)).css(this.bH?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight)),b.before(this._htWElement.left).after(this._htWElement.right)):this._bMoveDirection==="next"&&(b=this._WrapperInstacne.getNextElement(),this._htWElement.left.empty().append(jindo.$Element(a.$value().cloneNode(!0)).show().width(this.nWidth)),b.$value()===a.$value()?this._htWElement.right.empty().append(jindo.$Element(jindo.$("<div></div>")).show().css(this.bH?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight)):this._htWElement.right.empty().append(jindo.$Element(b.$value().cloneNode(!0)).show().css(this.bH?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight)),a.before(this._htWElement.left).after(this._htWElement.right))},_movePanel:function(a,b,c,d,e){if(e)this._bMove&&this._onEnd();else{if(this._bMoveDirection===null){if(a>0)this._bMoveDirection="prev";else if(a<0)this._bMoveDirection="next";else return;this._setCloneElement(),this._WrapperInstacne._restoreAnchor(),this._WrapperInstacne._setAnchorElement(),this._WrapperInstacne._clearAnchor()}else{var f=this.bH?this.nWidth:this.nHeight,g=this._WrapperInstacne.getContentElement(),h,i;this._bMoveDirection==="prev"?(h=this._WrapperInstacne.getPrevElement(),i=h.$value()===g.$value()?60:180,this._nDeg=Math.max(0,Math.min(i,Math.round(a*1/f*i))),this._setPrevRotate(g,h,this._htWElement.left,this._htWElement.right,this._nDeg)):this._bMoveDirection==="next"&&(h=this._WrapperInstacne.getNextElement(),i=h.$value()===g.$value()?60:180,this._nDeg=Math.max(0,Math.min(i,Math.round(a*-1/f*i))),this._setNextRotate(g,h,this._htWElement.left,this._htWElement.right,this._nDeg))}this._bMove=!0}},_rotate:function(a,b){if(a){var c=this.bH?"rotateY("+b+"deg)":"rotateX("+b+"deg)",d={};d[this._sCssPrefix+"Transition"]=this._sCssPrefix+"-transform 0s linear",d[this._sCssPrefix+"Transform"]="perspective(500px) "+c+" rotateZ(0deg)",a.css(d)}return a},_setBackgroundShadow:function(a,b){var c=b>90?180-b:b,d,e="#000000";return d=Number(Math.round(c/90*255)).toString(16),d.length<2&&(d+=d),e="#"+d+d+d,a.css("background-image","-webkit-gradient(linear, 100% 0%, 0% 0%, from("+e+"), to("+e+"))"),a.css("background-image","-ms-gradient(linear, 100% 0%, 0% 0%, from("+e+"), to("+e+"))"),a},_clearBackgrond:function(a){return a.css({"background-image":"","background-color":"#fff"})},_setNextRotate:function(a,b,c,d,e){var f=this.bH?-e:e,g=this.bH?180-e:-(180-e);a.$value()===b.$value()&&(b=null),this._rotate(a,f).addClass("gradient"),b&&this._rotate(b,g).addClass("gradient"),e===0?(c.hide(),d.hide(),b&&this._rotate(b,0).hide()):e<90?(setTimeout(function(){},0),c.show("inline-block"),d.show(),c.css("zIndex",110),a.css("zIndex",100),d.css("zIndex",90),this._clearBackgrond(c.first()),this._setBackgroundShadow(d.first(),e),a.show(),b&&b.hide()):e<180?(b.show().css("zIndex",100),a.hide(),c.show().css("zIndex",90),d.show().css("zIndex",110),this._setBackgroundShadow(c.first(),e),this._clearBackgrond(d.first()),b.show(),a.hide()):(c.hide(),d.hide())},_setPrevRotate:function(a,b,c,d,e){var f=this.bH?e:-e,g=this.bH?-(180-e):180-e;a.$value()===b.$value()&&(b=null),this._rotate(a,f).addClass("gradient"),b&&this._rotate(b,g).addClass("gradient"),e===0?(c.hide(),d.hide(),a.removeClass("gradient"),b&&this._rotate(b,0).hide().removeClass("gradient")):e<90?(c.show().css("zIndex",90),d.show().css("zIndex",110),this._setBackgroundShadow(c.first(),e),this._clearBackgrond(d.first()),a.show().css("zIndex",100),b&&b.hide()):e<180?(c.show().css("zIndex",110),d.show().css("zIndex",90),this._clearBackgrond(c.first()),this._setBackgroundShadow(d.first()),a.hide(),b&&b.show().css("zIndex",100)):(c.hide(),d.hide(),b&&b.removeClass("gradient"))},_onEnd:function(){this._bFinished=!1;var a=this._WrapperInstacne._htIndexInfo.sDirection===null?!0:!1,b=this._WrapperInstacne.getContentElement(),c=this,d=null;this._bMoveDirection==="next"?d=this._WrapperInstacne.getNextElement():this._bMoveDirection==="prev"&&(d=this._WrapperInstacne.getPrevElement()),b.$value()===d.$value()&&(a=!0,this._WrapperInstacne._htIndexInfo.sDirection=null);var e=a?this._htOption.nBounceDuration:this._htOption.nDuration,f=a?0:180;if(this._nDeg===0)this._bFinished=!0,setTimeout(function(){c._onTransitionEnd()},10);else{var g=(new Date).getTime(),h=this._nDeg;(function i(){var a=(new Date).getTime(),j;if(a>=g+e){cancelAnimationFrame(c._nTimerAnimate),c._onTransitionEnd();return}a=(a-g)/e-1,j=Math.sqrt(1-Math.pow(a,2));var k=(f-h)*j+h;c._nDeg=Math.min(k,180),c._bMoveDirection==="next"?c._setNextRotate(b,d,c._htWElement.left,c._htWElement.right,c._nDeg):c._setPrevRotate(b,d,c._htWElement.left,c._htWElement.right,c._nDeg),c._nTimerAnimate=requestAnimationFrame(i)})()}},_onStart:function(){this._resetInfo()},_resetInfo:function(){this._bMoveDirection=null,this._bMove=!1,this._nDeg=-1,this._bFinished=!0,this._htWElement.left.css("zIndex",1),this._htWElement.right.css("zIndex",1)},_onTransitionEnd:function(){this._detachTransitionEnd();var a=!0;this._WrapperInstacne._htIndexInfo.sDirection===null&&(a=!1),jindo.$A(this._htWElement.aPanel).forEach(function(a,b,c){a.$value().style[this._sCssPrefix+"TransitionDuration"]=null,a.$value().style[this._sCssPrefix+"Transform"]=""},this),this._resetInfo(),this.endAnimation(a)},movePrev:function(a){var b=this._WrapperInstacne.getPrevElement();if(b.$value()===this._WrapperInstacne.getElement().$value())return;this._bMoveDirection="prev",this._bMove=!0,this._nDeg=1,this._setCloneElement();var c=this._htOption.nFlickThreshold;this._bMoveDirection="prev",this._WrapperInstacne._onEnd({nDistanceX:c+10,nDistanceY:c+10,nX:10,nY:10},a)},moveNext:function(a){var b=this._WrapperInstacne.getNextElement();if(b.$value()===this._WrapperInstacne.getElement().$value())return;this._bMoveDirection="next",this._bMove=!0,this._nDeg=1,this._setCloneElement();var c=this._htOption.nFlickThreshold*-1,d=this.bH?this._htWElement.base.width():this._htWElement.base.height();this._WrapperInstacne._onEnd({nDistanceX:c-10,nDistanceY:c-10,nX:d-10,nY:d-10},a)}}).extend(jindo.m.FlickingAnimation),jindo.m.DynamicScrollPlugin=jindo.$Class({$init:function(a,b){this.option({nRatio:1.5,sListElement:"li",sDirection:"V"}),this.option(b||{}),this._initVar(a)},_initVar:function(a){this._wel=jindo.$Element(a),this._aListElement=null,this._nStartIdx=-1,this._nEndIdx=-1,this._nRatio=parseInt(this.option("nRatio"),10),this._nPos=-1,this._nSize=-1,this._sDirection=this.option("sDirection")},refresh:function(a){var b=this._wel.queryAll(this.option("sListElement"));if(!b)return;this._aListElement=[];for(var c=0,d=b.length;c<d;c++)wel=jindo.$Element(b[c]),this._aListElement.push({el:wel.$value(),wel:wel,htRange:this._getElementPos(wel),sDisplay:wel.css("display"),sPosition:wel.css("position")});this._nPos=a||0,this._nSize=this._sDirection=="V"?this._wel.height():this._wel.width(),this._covertPositionType()},_covertPositionType:function(){var a=this._getStartBoundary(),b=this._getEndBoundary();for(var c=0,d,e=this._aListElement.length;c<e;c++)d=this._aListElement[c],this._sDirection=="V"?d.wel.css({top:d.htRange.nStartPos+"px",width:"100%"}):d.wel.css({left:d.htRange.nStartPos+"px",height:"100%"}),d.wel.css("position","absolute"),d.htRange.nStartPos<=-a?this._nStartIdx=c:d.htRange.nEndPos<=-b?(d.el.style.display=d.sDisplay,this._nEndIdx=c):d.el.style.display="none"},updateListStatus:function(a,b){if(!this._aListElement)return;this._nPos=b;var c=this._getStartBoundary(),d=this._getEndBoundary(),e=this._aListElement.length,f,g,h;if(a=="forward"){for(g=this._nStartIdx+1;g<e;g++){f=this._aListElement[g],h=f.htRange.nEndPos;if(h<-c)f.el.style.display="none",this._nStartIdx=g;else break}for(g=this._nEndIdx;g<e;g++){f=this._aListElement[g],h=f.htRange.nStartPos;if(h<-d)f.el.style.display=f.sDisplay,this._nEndIdx++;else break}}else if(a=="backward"){for(g=this._nEndIdx-1;g>=0;g--){f=this._aListElement[g],h=f.htRange.nStartPos;if(h<-d)break;f.el.style.display="none",this._nEndIdx--}for(g=this._nStartIdx;g>=0;g--){f=this._aListElement[g],h=f.htRange.nEndPos;if(h<-c)break;f.el.style.display=f.sDisplay,this._nStartIdx--}}},_getStartBoundary:function(){return this._nPos+this._nSize*this._nRatio},_getEndBoundary:function(){return this._nPos-this._nSize-this._nSize*this._nRatio},_getElementPos:function(a){var b,c;return this._sDirection=="V"?(b=a.offset().top-this._wel.offset().top,c=b+a.height()):(b=a.offset().left-this._wel.offset().left,c=b+a.width()),{nStartPos:b,nEndPos:c}}}).extend(jindo.m.Component),jindo.m.CoreScroll=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,bUseHScroll:!1,bUseVScroll:!0,bUseMomentum:!0,nDeceleration:6e-4,nOffsetTop:0,nOffsetBottom:0,nHeight:0,nWidth:0,bUseBounce:!0,bUseHighlight:!0,sClassPrefix:"scroll_",bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction(),sListElement:"",nRatio:1.5,bUseTranslate:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){var a=jindo.m.getDeviceInfo();this.isPositionBug=a.android&&!a.bChrome,this.isIos=a.ipad||a.iphone,this.isClickBug=jindo.m.hasClickBug(),this.nVersion=parseFloat(a.version.substr(0,3)),this.sCssPrefix=jindo.m.getCssPrefix(),this.sTranOpen=null,this.sTranEnd=null,this.nWrapperW=null,this.nWrapperH=null,this.nScrollW=null,this.nScrollH=null,this.nMaxScrollLeft=null,this.nMaxScrollTop=null,this.nMinScrollTop=null,this.bUseHScroll=null,this.bUseVScroll=null,this._nLeft=0,this._nTop=0,this.bUseHighlight=this.option("bUseHighlight"),this._aAni=[],this._nAniTimer=-1,this._nFixedPositionBugTimer=-1,this._nTouchEndTimer=-1,this._oTouch=null,this._oDynamicScrollPlugin=null,this._bUseDynamicScroll=!1,this._isAnimating=!1,this._isControling=!1,this._isStop=!1,this.option("sListElement")&&this.option("bUseCss3d",!1),this._setTrans(),this.bUseHighlight&&(this.isPositionBug&&(this._elDummyTag=null),this.isClickBug&&(this._aAnchor=null,this._fnDummyFnc=function(){return!1},this._bBlocked=!1))},_setTrans:function(){this.option("bUseCss3d")?(this.sTranOpen="3d(",this.sTranEnd=",0)"):(this.sTranOpen="(",this.sTranEnd=")")},getCurrentPos:function(){return{nTop:this._nTop,nLeft:this._nLeft}},setLayer:function(a){this._htWElement.wrapper=jindo.$Element(a),this._htWElement.wrapper.css("overflow","hidden"),this._htWElement["wrapper"].css("position")=="static"&&this._htWElement.wrapper.css("position","relative"),this.bUseHighlight||this._htWElement.wrapper.css("-"+this.sCssPrefix+"-tap-highlight-color","rgba(0,0,0,0)"),this.setScroller()},setScroller:function(){this._htWElement.scroller=this._htWElement.wrapper.first(),this._htWElement.scroller.css({position:"absolute",zIndex:1,left:0,top:0}),(this.option("bUseTranslate")||this.option("bUseCss3d"))&&this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-property","-"+this.sCssPrefix+"-transform").css("-"+this.sCssPrefix+"-transform","translate"+this.sTranOpen+"0,0"+this.sTranEnd),this.option("bUseTimingFunction")&&this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-timing-function","cubic-bezier(0.33,0.66,0.66,1)"),this.isPositionBug&&this.bUseHighlight&&this.nVersion<3&&(this._elDummyTag=this._htWElement.scroller.query("._scroller_dummy_atag_"),this._elDummyTag||(this._elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_scroller_dummy_atag_'></a>"),this._htWElement.scroller.append(this._elDummyTag)))},_setWrapperElement:function(a){this._htWElement={},this.setLayer(a)},refresh:function(a){if(!this.isActivating())return;this.option("nWidth")&&this._htWElement.wrapper.width(parseInt(this.option("nWidth"),10)),this.option("nHeight")&&this._htWElement.wrapper.height(parseInt(this.option("nHeight"),10));var b=parseInt(this._htWElement.wrapper.css("border-left-width"),10),c=parseInt(this._htWElement.wrapper.css("border-right-width"),10),d=parseInt(this._htWElement.wrapper.css("border-top-width"),10),e=parseInt(this._htWElement.wrapper.css("border-bottom-width"),10);b=isNaN(b)?0:b,c=isNaN(c)?0:c,d=isNaN(d)?0:d,e=isNaN(e)?0:e,this.nWrapperW=this._htWElement.wrapper.width()-b-c,this.nWrapperH=this._htWElement.wrapper.height()-d-e,this.nScrollW=this._htWElement.scroller.width(),this.nScrollH=this._htWElement.scroller.height()-this.option("nOffsetBottom"),this.nMaxScrollLeft=this.nWrapperW-this.nScrollW,this.nMaxScrollTop=this.nWrapperH-this.nScrollH,this.nMinScrollTop=-this.option("nOffsetTop"),this.bUseHighlight&&this.isClickBug&&(this._aAnchor=jindo.$$("A",this._htWElement.scroller.$value())),this.bUseHScroll=this.option("bUseHScroll")&&this.nWrapperW<=this.nScrollW,this.bUseVScroll=this.option("bUseVScroll")&&this.nWrapperH<=this.nScrollH,this.bUseHScroll&&!this.bUseVScroll&&(this._htWElement.scroller.$value().style.height="100%"),!this.bUseHScroll&&this.bUseVScroll&&(this._htWElement.scroller.$value().style.width="100%"),this._bUseDynamicScroll=!1;if(this.option("sListElement")&&(!this.bUseVScroll||!this.bUseHScroll)){var f=this.option("nRatio")*2;this.bUseVScroll&&this.nScrollH>this.nWrapperH*f?this._createDynamicScrollPlugin("V"):this.bUseHScroll&&this.nScrollW>this.nWrapperW*f&&this._createDynamicScrollPlugin("H")}!this.bUseHScroll&&!this.bUseVScroll&&this._fixPositionBug(),a||this.restorePos(0)},_createDynamicScrollPlugin:function(a){this._oDynamicScrollPlugin||(this._oDynamicScrollPlugin=new jindo.m.DynamicScrollPlugin(this._htWElement.wrapper,{nRatio:this.option("nRatio"),sListElement:this.option("sListElement"),sDirection:a})),this._oDynamicScrollPlugin.refresh(a=="V"?this._nTop:this._nLeft),this.option("bUseTimingFunction",!1),this._bUseDynamicScroll=!0},_setPos:function(a,b){var c;a=this.bUseHScroll?a:0,b=this.bUseVScroll?b:0,this._bUseDynamicScroll&&(c=this._checkDirection(a,b));if(this._fireEvent("beforePosition")){this._isControling=!0,this._nLeft=a,this._nTop=b,this._bUseDynamicScroll&&this._oDynamicScrollPlugin.updateListStatus(c,this.bUseVScroll?this._nTop:this._nLeft);if(this.option("bUseTranslate")){if(this.bUseHighlight&&this.isPositionBug){var d=this.getStyleOffset(this._htWElement.scroller);a-=d.left,b-=d.top}this._htWElement.scroller.css("-"+this.sCssPrefix+"-transform","translate"+this.sTranOpen+a+"px, "+b+"px"+this.sTranEnd)}else this._htWElement.scroller.css({left:a+"px",top:b+"px"});this._fireEvent("position")}},_checkDirection:function(a,b){var c=this.bUseVScroll?this._nTop:this._nLeft,d=this.bUseVScroll?b:a,e;return c>d?e="forward":e="backward",e},restorePos:function(a){if(!this.bUseHScroll&&!this.bUseVScroll)return;var b=this.getPosLeft(this._nLeft),c=this.getPosTop(this._nTop);if(b===this._nLeft&&c===this._nTop){this._isControling=!1,this._fireEvent("afterScroll"),this._fixPositionBug();return}this.scrollTo(b,c,a)},_getMomentum:function(a,b,c,d,e,f){var g=this.option("nDeceleration"),h=c/g,i=0,j=0;return a<0&&h>e?(j=d/(6/(h/b*g)),e+=j,b=b*e/h,h=e):a>0&&h>f&&(j=d/(6/(h/b*g)),f+=j,b=b*f/h,h=f),h*=a>0?-1:1,i=b/g,{nDist:h,nTime:Math.round(i)}},_stop:function(){this.option("bUseTimingFunction")?jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd):cancelAnimationFrame(this._nAniTimer),this._aAni=[],this._isAnimating=!1,this._isStop=!0},scrollTo:function(a,b,c){this._stop(),a=this.bUseHScroll?a:0,b=this.bUseVScroll?b:0,this._aAni.push({nLeft:a,nTop:b,nDuration:c||0}),this._animate()},isMoving:function(){return this._isControling},_animate:function(){var a=this,b;if(this._isAnimating)return;if(!this._aAni.length){this.restorePos(300);return}do{b=this._aAni.shift();if(!b)return}while(b.nLeft==this._nLeft&&b.nTop==this._nTop);if(b.nDuration==0)this.option("bUseTimingFunction")&&this._transitionTime(0),this._setPos(b.nLeft,b.nTop),this._animate();else{this._isAnimating=!0;if(this.option("bUseTimingFunction"))this._transitionTime(b.nDuration),this._setPos(b.nLeft,b.nTop),this._isAnimating=!1,jindo.m.attachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);else{var c=(new Date).getTime(),d=this._nLeft,e=this._nTop;(function f(){var g=(new Date).getTime(),h;if(g>=c+b.nDuration){a._setPos(b.nLeft,b.nTop),a._isAnimating=!1,a._animate();return}g=(g-c)/b.nDuration-1,h=Math.sqrt(1-Math.pow(g,2)),a._setPos((b.nLeft-d)*h+d,(b.nTop-e)*h+e),a._isAnimating&&(a._nAniTimer=requestAnimationFrame(f))})()}}},_transitionTime:function(a){a+="ms",this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-duration",a),this._fireEventSetDuration(a)},_clearAnchor:function(){if(this.isClickBug&&this._aAnchor&&!this._bBlocked){var a=null;for(var b=0,c=this._aAnchor.length;b<c;b++)if(!this._aAnchor[b].___isClear___){this._fnDummyFnc!==this._aAnchor[b].onclick&&(this._aAnchor[b]._onclick=this._aAnchor[b].onclick),this._aAnchor[b].onclick=this._fnDummyFnc,this._aAnchor[b].___isClear___=!0,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;d<e;d++)___Old__removeEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this.isClickBug&&this._aAnchor&&this._bBlocked){var a=null;for(var b=0,c=this._aAnchor.length;b<c;b++)if(this._aAnchor[b].___isClear___){this._fnDummyFnc!==this._aAnchor[b]._onclick?this._aAnchor[b].onclick=this._aAnchor[b]._onclick:this._aAnchor[b].onclick=null,this._aAnchor[b].___isClear___=null,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;d<e;d++)___Old__addEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!1}},_stopScroll:function(){var a=jindo.m.getCssOffset(this._htWElement.scroller.$value()),b={left:0,top:0},c,d;if(this.isPositionBug&&this.bUseHighlight||!this.option("bUseTranslate"))b=this.getStyleOffset(this._htWElement.scroller);d=a.left+b.left,c=a.top+b.top;if(d!==parseInt(this._nLeft,10)||c!==parseInt(this._nTop,10))this._stop(),this._setPos(this.getPosLeft(d),this.getPosTop(c)),this._isControling=!1,this._fireEvent("afterScroll"),this._fixPositionBug()},getStyleOffset:function(a){var b=parseInt(a.css("left"),10),c=parseInt(a.css("top"),10);return b=isNaN(b)?0:b,c=isNaN(c)?0:c,{left:b,top:c}},getPosLeft:function(a){return a>=0?0:a<=this.nMaxScrollLeft?this.nMaxScrollLeft:a},getPosTop:function(a){return a>=this.nMinScrollTop?this.nMinScrollTop:a<=this.nMaxScrollTop?this.nMaxScrollTop:a},_fireEventSetDuration:function(a){this.fireEvent("setDuration",{nDuration:a,bUseHScroll:this.bUseHScroll,bUseVScroll:this.bUseVScroll})},_fireEventbeforeScroll:function(a){return this.fireEvent("beforeScroll",a)},_fireEventScroll:function(a){this.fireEvent("scroll",a)},_fireEvent:function(a){return this.fireEvent(a,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop})},_fireTouchEvent:function(a,b){return this.fireEvent(a,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop,oEvent:b})},_onStart:function(a){this._clearPositionBug(),this._fireTouchEvent("beforeTouchStart",a)?(this._clearAnchor(),this._isAnimating=!1,this._isControling=!0,this._isStop=!1,this.option("bUseTimingFunction")&&this._transitionTime(0),this._stopScroll(),this._fireTouchEvent("touchStart",a)||a.stop()):a.stop()},_onMove:function(a){this._clearTouchEnd();var b=a.oEvent;if(a.sMoveType===jindo.m.MOVETYPE[0]){if(!this.bUseHScroll)return!0;if(!this.option("bUseBounce")&&(this._nLeft>=0&&a.nVectorX>0||this._nLeft<=this.nMaxScrollLeft&&a.nVectorX<0)){this._forceRestore(a);return}b.stop(jindo.$Event.CANCEL_ALL)}else if(a.sMoveType===jindo.m.MOVETYPE[1]){if(!this.bUseVScroll)return!0;if(!this.option("bUseBounce")&&(this._nTop>=this.nMinScrollTop&&a.nVectorY>0||this._nTop<=this.nMaxScrollTop&&a.nVectorY<0)){this._forceRestore(a);return}b.stop(jindo.$Event.CANCEL_ALL)}else if(a.sMoveType===jindo.m.MOVETYPE[2])b.stop(jindo.$Event.CANCEL_ALL);else return b.stop(jindo.$Event.CANCEL_ALL),!0;if(this._fireTouchEvent("beforeTouchMove",a)){var c,d;this._clearPositionBug();if(this.option("bUseBounce")){c=this._nLeft+(this._nLeft>=0||this._nLeft<=this.nMaxScrollLeft?a.nVectorX/2:a.nVectorX),d=this._nTop+(this._nTop>=this.nMinScrollTop||this._nTop<=this.nMaxScrollTop?a.nVectorY/2:a.nVectorY);var e=this;this._nTouchEndTimer=setTimeout(function(){e._forceRestore(a)},500)}else c=this.getPosLeft(this._nLeft+a.nVectorX),d=this.getPosTop(this._nTop+a.nVectorY);this._setPos(c,d),this._fireTouchEvent("touchMove",a)||a.stop()}else a.stop()},_onEnd:function(a){this._fireTouchEvent("beforeTouchEnd",a)?(this._clearPositionBug(),this._clearTouchEnd(),a.sMoveType===jindo.m.MOVETYPE[0]||a.sMoveType===jindo.m.MOVETYPE[1]||a.sMoveType===jindo.m.MOVETYPE[2]?(this._endForScroll(a),(this.isClickBug||this.nVersion<4.1)&&a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)):(this._isControling=!1,this._isStop||this.bUseHighlight&&this._restoreAnchor()),this._fireTouchEvent("touchEnd",a)||a.stop()):a.stop()},_forceRestore:function(a){a.nMomentumX=a.nMomentumY=null,this._endForScroll(a),this._clearPositionBug(),this._clearTouchEnd()},_endForScroll:function(a){clearTimeout(this._nFixedDubbleEndBugTimer);var b={nDist:0,nTime:0},c={nDist:0,nTime:0},d={nMomentumX:a.nMomentumX,nMomentumY:a.nMomentumY,nDistanceX:a.nDistanceX,nDistanceY:a.nDistanceY,nLeft:this._nLeft,nTop:this._nTop};this.option("bUseMomentum")&&(a.nMomentumX||a.nMomentumY)?(this.bUseHScroll&&(b=this._getMomentum(-a.nDistanceX,a.nSpeedX,a.nMomentumX,this.nWrapperW,-this._nLeft,-this.nMaxScrollLeft+this._nLeft)),this.bUseVScroll&&(c=this._getMomentum(-a.nDistanceY,a.nSpeedY,a.nMomentumY,this.nWrapperH,-this._nTop,-this.nMaxScrollTop+this._nTop)),d.nNextLeft=this._nLeft+b.nDist,d.nNextTop=this._nTop+c.nDist,d.nTime=Math.max(Math.max(b.nTime,c.nTime),10),this._fireEventbeforeScroll(d)&&(this.option("bUseBounce")?this.scrollTo(d.nNextLeft,d.nNextTop,d.nTime):this.scrollTo(this.getPosLeft(d.nNextLeft),this.getPosTop(d.nNextTop),d.nTime),this._fireEventScroll(d))):(d.nNextLeft=this._nLeft,d.nNextTop=this._nTop,d.nTime=0,this._fireEventbeforeScroll(d)&&(this._nLeft!==d.nNextLeft||this._nTop!==d.nNextTop?this.scrollTo(d.nNextLeft,d.nNextTop,d.nTime):this.restorePos(300),this._fireEventScroll(d)))},_onTransitionEnd:function(a){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._animate()},_onDocumentStart:function(a){if(this._htWElement.wrapper.visible()){if(this._htWElement.wrapper.isChildOf(a.element))return!0;this._stopScroll()}},_onActivate:function(){this._oTouch?this._oTouch.activate():this._oTouch=new jindo.m.Touch(this._htWElement.wrapper.$value(),{nMoveThreshold:0,nMomentumDuration:jindo.m.getDeviceInfo().android?500:200,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0}),this._attachEvent(),this.refresh()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.TransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart"),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd})},_fixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight&&this.option("bUseTranslate")){var a=this;this._clearPositionBug(),this._nFixedPositionBugTimer=setTimeout(function(){a._htWElement&&a._htWElement.scroller&&(a.makeStylePos(a._htWElement.scroller),a.nVersion<3&&a._elDummyTag.focus())},200)}},makeStylePos:function(a){var b=a.$value(),c=jindo.m.getCssOffset(b),d=a.offset();this.nVersion>=4?b.style["-"+this.sCssPrefix+"-transform"]="translate"+this.sTranOpen+"0px, 0px"+this.sTranEnd:b.style["-"+this.sCssPrefix+"-transform"]=null,b.style["-"+this.sCssPrefix+"-transition-duration"]=null,a.offset(c.top+d.top,c.left+d.left)},_clearPositionBug:function(){this.isPositionBug&&this.bUseHighlight&&(clearTimeout(this._nFixedPositionBugTimer),this._nFixedPositionBugTimer=-1)},_clearTouchEnd:function(){clearTimeout(this._nTouchEndTimer),this._nTouchEndTimer=-1},_detachEvent:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._htEvent.document.detach(document,"touchstart"),this._oTouch.detachAll(),this._elDummyTag&&this._htWElement.scroller.remove(this._elDummyTag)},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._oTouch.destroy(),delete this._oTouch}}).extend(jindo.m.UIComponent),jindo.m.SlideFlicking=jindo.$Class({sAnimationName:"slide",$init:function(){this._bFlickEvent=!1,this._bMoveEvent=!1,this._htDefaultOption={bUseHighlight:!0}},_initCoreScroll:function(){this._oCore=new jindo.m.CoreScroll(this._htWElement.base.$value(),{bUseHScroll:this.bH,bUseVScroll:!this.bH,bUseMomentum:!1,bUseCss3d:this._htOption.bUseCss3d,bUseTimingFunction:this._htOption.bUseTimingFunction,bUseTranslate:this._htOption.bUseTranslate,bUseHighlight:this._htOption.bUseHighlight}),this._oCore.attach({beforeScroll:jindo.$Fn(this._onBeforeScrollEnd,this).bind(),afterScroll:jindo.$Fn(this._onScrollEnd,this).bind(),beforeTouchStart:jindo.$Fn(this._onBeforeTouchStart,this).bind(),beforeTouchMove:jindo.$Fn(this._onBeforeTouchMove,this).bind(),beforeTouchEnd:jindo.$Fn(this._onBeforeTouchMove,this).bind()})},_initAnimation:function(){this._initOption(),this._setElementStyle(),this._setElementSize(),this._updateSizeInfo(),this._initCoreScroll()},_initOption:function(){for(var a in this._htDefaultOption)typeof this._htOption[a]=="undefined"&&(this._htOption[a]=this._htDefaultOption[a])},_updateSizeInfo:function(){var a=this.bH?"width":"height",b=this.bH?"left":"top";this._htPosition=[];var c=0,d=0;for(var e=0,f=this._htWElement.aPanel.length;e<f;e++){if(e!=0)if(this._htOption.nFlickDistanceOffset===null)c+=this._htWElement.aPanel[e-1][a]()*-1;else{var g=this._htWElement.aPanel[e-1][a]()*-1;c=d+g+this._htOption.nFlickDistanceOffset*-1,d+=g}this._htPosition.push(c)}},_setElementSize:function(){var a=this._htWElement.aPanel.length,b=this._htWElement.base.width(),c=this._htWElement.base.height(),d=0;this._htOption.bAutoSize&&(this.bH?(d=b*a,this._htWElement.container.width(d).height(this._htWElement.base.height()),jindo.$A(this._htWElement.aPanel).forEach(function(a){a.width(b)})):(jindo.$A(this._htWElement.aPanel).forEach(function(a){a.height(c)}),d=c*a,this._htWElement.container.css("height",d+"px").width(b)))},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden"),this.bH&&this._htWElement.container.css("clear","both");var a=this.bH;jindo.$A(this._htWElement.aPanel).forEach(function(b,c,d){var e=b;a&&e.css("float","left")})},_onBeforeTouchStart:function(a){var b={element:a.oEvent.element,nX:a.oEvent.nX,nY:a.oEvent.nY,oEvent:a.oEvent.oEvent};if(!this._WrapperInstacne._fireCustomEvent("touchStart",b)){a.stop();return}},_onBeforeTouchMove:function(a){var b=a.sType.indexOf("End")>-1?"touchEnd":"touchMove",c={};for(var d in a.oEvent)typeof a.oEvent[d]!="object"&&typeof a.oEvent[d]!="function"&&(c[d]=a.oEvent[d]);c.sType=b,this._WrapperInstacne._fireCustomEvent(b,c)},_onBeforeScrollEnd:function(a){var b=a.nTime,c=this._getSnap(a.nLeft,a.nTop,a.nDistanceX,a.nDistanceY,a.nMomentumX,a.nMomentumY);a.nNextLeft=c.nX,a.nNextTop=c.nY,a.nTime=c.nTime;var d={nContentsIndex:this._WrapperInstacne.getContentIndex(),nContentsNextIndex:c.nIndex};this.bH?d.bLeft=c.nFlickLeft:d.bTop=c.nFlickLeft;if(!this._WrapperInstacne._fireCustomEvent("beforeFlicking",d)){a.stop();return}this._bFlickEvent=!0,this._WrapperInstacne._bAnimation=!0,this._WrapperInstacne._bFlickLeft=c.nFlickLeft,this._WrapperInstacne._htIndexInfo.nNextContentIndex=c.nIndex},_onScrollEnd:function(){var a=this._WrapperInstacne._htIndexInfo.nContentIndex;if(this._WrapperInstacne._htIndexInfo.nContentIndex!==this._WrapperInstacne._htIndexInfo.nNextContentIndex&&(this._bFlickEvent||this._bMoveEvent)){this._WrapperInstacne._htIndexInfo.nContentIndex=this._WrapperInstacne._htIndexInfo.nNextContentIndex;var b={nContentsIndex:this._WrapperInstacne.getContentIndex()};this.bH?b.bLeft=this._WrapperInstacne._bFlickLeft:b.bTop=this._WrapperInstacne._bFlickLeft;var c=this._bFlickEvent?"afterFlicking":"move";this._WrapperInstacne.fireEvent(c,b)}this._bFlickEvent=!1,this._bMoveEvent=!1,this._WrapperInstacne._bFlickLeft=null,this._WrapperInstacne._bAnimation=!1},_getSnap:function(a,b,c,d,e,f){var g=nPosY=nNewPos=0,h=this._htWElement.aPanel.length-1,i=this.bH?a:b,j=this.bH?c:d,k=this.bH?e:f,l=!1;for(var m=0,n=this._htPosition.length;m<n;m++)if(i>=this._htPosition[m]){h=m;break}h==this._WrapperInstacne.getContentIndex()&&h>0&&j>0&&h--,Math.abs(j)<=this._htOption.nFlickThreshold&&(h=this._WrapperInstacne.getContentIndex()),nNewPos=this._htPosition[h];var o=this._htOption.nDuration;return j<0&&(l=!0),{nX:this.bH?nNewPos:g,nY:this.bH?nPosY:nNewPos,nTime:Math.round(o),nIndex:h,nFlickLeft:l}},_getPosition:function(a){var b=nPosY=0;return typeof a=="undefined"&&(a=this.getContentIndex()),a=Math.max(0,a),a=Math.min(this._htPosition.length-1,a),{nX:this.bH?this._htPosition[a]:b,nY:this.bH?nPosY:this._htPosition[a]}},_refresh:function(a,b,c){b&&(this._setElementSize(),this._updateSizeInfo(),this._oCore&&this._oCore.refresh(!0)),this._moveTo(a,0,c,!1)},_moveTo:function(a,b,c,d){var e=this._getPosition(a);this._WrapperInstacne._htIndexInfo.nNextContentIndex=a;var f=this._WrapperInstacne.getContentIndex();f<a?this._WrapperInstacne._bFlickLeft=!0:this._WrapperInstacne._bFlickLeft=!1,this._bMoveEvent=c,this._bFlickEvent=d,this._oCore.scrollTo(e.nX,e.nY,b)},moveNext:function(a){var b=this._WrapperInstacne.getNextIndex();if(!this._WrapperInstacne._fireCustomEvent("beforeFlicking",{nContentsIndex:this._WrapperInstacne.getContentIndex(),nContentsNextIndex:b}))return;this._moveTo(b,a,!1,!0)},movePrev:function(a){var b=this._WrapperInstacne.getPrevIndex();if(!this._WrapperInstacne._fireCustomEvent("beforeFlicking",{nContentsIndex:this._WrapperInstacne.getContentIndex(),nContentsNextIndex:b}))return;this._moveTo(b,a,!1,!0)}}).extend(jindo.m.FlickingAnimation),jindo.m.Validator=jindo.$Class({validate:function(a,b){var c=this._getCorrectedValue(a,b),d={bValid:this._isValid(c,b),sCorrectedValue:null};return c!==a&&(d.sCorrectedValue=c),d}}),jindo.m.NumberValidator=jindo.$Class({rx:/^[+\-]?(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_isValid:function(a,b){return this.rx.test(a)},_getCorrectedValue:function(a,b){return a=this._filterNumber(a),b&&(a=this._applyComma(a)),a},_applyComma:function(a){var b="",c=0,d=null,e=null,f=a.indexOf("."),g=f!==-1?a.substring(0,f):a,h=f!==-1?a.substr(f):"";if(g.length>3){for(var i=g.length-1;i>=0;i--,c++)d=g.charAt(i),e=g.charCodeAt(i),b=c!==0&&c%3===0&&e>47&&e<58?d+","+b:d+b;return h!==""?b+h:b}return a},_filterNumber:function(a){var b,c,d,e;return a=a.replace(/[^\d\.\-]/g,""),b=a.charAt(0),a=a.replace(/-/g,""),a=b==="-"?b+a:a,a.length<=0||a==="-"?a:(c=a.split("."),c.length>1?(d=c.shift(),b=d.charAt(0),d=d===""?0:parseInt(d,10),b==="-"&&d===0&&(d="-"+d),e=c.join(""),a=d+"."+e):a=String(parseFloat(c.join(""),10)),a)}}).extend(jindo.m.Validator),jindo.m.CurrencyValidator=jindo.$Class({rx:/^[+\-]?[^\s\t\v\d]+(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_getCorrectedValue:function(a,b){return a=this._applyComma(this._filterNumber(a)),b=b||"\\",a=a.charAt(0)==="-"?"-"+b+a.substring(1):b+a,a}}).extend(jindo.m.NumberValidator),jindo.m.DateValidator=jindo.$Class({_isValid:function(a,b){b=b||"yyyy-mm-dd",a=a.replace(/[\.\-]/g,"");var c=b.replace(/[\d\.\-]/g,""),d=a.substr(c.indexOf("yyyy"),4)*1,e=a.substr(c.indexOf("mm"),2)*1,f=a.substr(c.indexOf("dd"),2)*1;return e>=1&&e<=12&&f>=1&&f<=31&&d>=1e3?!0:!1},_getCorrectedValue:function(a,b){b=b||"yyyy-mm-dd";var c=b.replace(/[\d\.\-]/g,"");return a=a.replace(/[^\d]/g,"").substr(0,c.length),a.length>=c.length-1&&(a=this._getFormatted(a,b)),a},_getFormatted:function(a,b){var c=b.replace(/[\.\-]/g,""),d=a.substr(c.indexOf("yyyy"),4),e=a.substr(c.indexOf("mm"),2),f=a.substr(c.indexOf("dd"),2);return b.replace(/(yyyy|mm|dd)/gi,function(a){switch(a){case"yyyy":return d;case"mm":return e;case"dd":return f}})}}).extend(jindo.m.Validator),jindo.m.EmailValidator=jindo.$Class({rx:/^(([\w\-]+\.)+[\w\-]+|([a-zA-Z]{1}|[\w\-]{2,}))@((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|([a-zA-Z]+[\w\-]+\.)+[a-zA-Z]{2,4})$/,_isValid:function(a){return this.rx.test(a)?!0:!1},_getCorrectedValue:function(a){a=a.replace(/[^\w\.\@]/g,"").replace(/\.{2,}/g,".");var b=a.split("@");return b.length>2&&(a=b.shift()+"@"+b.join("")),a}}).extend(jindo.m.Validator),jindo.m.RequireValidator=jindo.$Class({validate:function(a){a=jindo.$S(a).trim();var b={bValid:!1,sCorrectedValue:null};return b.bValid=a!=""?!0:!1,b}}).extend(jindo.m.Validator),jindo.m.TelValidator=jindo.$Class({rx:/^(\d{2,3})(\d{3,4})(\d{4})$/,_isValid:function(a){a=a.replace(/[^\d]/g,"");if(this.rx.test(a)){var b=a.length,c=!1;return a.charAt(0)==="0"&&(b===9&&a.substring(0,2)==="02"||b===10||b===11)&&(c=!0),c}return!1},_getCorrectedValue:function(a,b){return a=a.replace(/[^\d]/g,""),a=a.length>11?a.substr(0,11):a,this._applyFormat(a,b)},_applyFormat:function(a,b){b=b||"-";var c=a.length;return a.charAt(0)==="0"&&(c===9&&a.substring(0,2)==="02"?a=a.substr(0,2)+b+a.substr(2,3)+b+a.substr(5,4):c===10?a.substr(0,2)==="02"?a=a.substr(0,2)+b+a.substr(2,4)+b+a.substr(6,4):a=a.substr(0,3)+b+a.substr(3,3)+b+a.substr(6,4):c===11&&(a.substr(0,4)==="0505"?a=a.substr(0,4)+b+a.substr(4,3)+b+a.substr(7,4):a=a.substr(0,3)+b+a.substr(3,4)+b+a.substr(7,4))),a}}).extend(jindo.m.Validator),jindo.m.UrlValidator=jindo.$Class({rx:/(^(http:\/\/)|^(https:\/\/)|(^[A-Za-z0-9\.\-]+))+([A-Za-z0-9\.\-])*(\.[A-Za-z]{2,}(\/([A-Za-z0-9\.\-])*)*)$/,_isValid:function(a,b){return this.rx.test(a)?!0:!1},_getCorrectedValue:function(a){return a.replace(/[^A-Za-z0-9-\?&\.\:\/]/g,"").replace(/\.{2,}/g,"").replace(/\?{2,}/g,"").replace(/&{2,}/g,"").replace(/\:{3,}/g,"")}}).extend(jindo.m.Validator),jindo.m.Accordion=jindo.$Class({$init:function(a,b){var c={bActivateOnload:!0,sClassPrefix:"accordion-",sDirection:"vertical",nDefalutIndex:-1,bUseToggle:!1,sTransitionTimingFunction:"ease",nDuration:500};this.option(c),this.option(b||{}),this._initVar(a),this._setWrapperElement(),this.option("bActivateOnload")&&this.activate(),this._setSize(),this._setDefaultExpand()},_initVar:function(a){this._elContainer=typeof a=="string"?jindo.$(a):a,this._aAccordionBlock=jindo.$$("."+this.option("sClassPrefix")+"block",this._elContainer);var b=jindo.m.getDeviceInfo(),c=parseFloat(b.version,10);if(b.android&&c<3){var d=jindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);d||(d=jindo.$("<a href='javascript:void(0);' class='_accordion_dummy_atag_'></a>"),d.style.position="absolute",d.style.left="-1000px",d.style.top="-1000px",d.style.width=0,d.style.height=0,jindo.$Element(this._elContainer).append(d))}this._nExpand=-1,this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind()},_setWrapperElement:function(){},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},jindo.$A(this._aAccordionBlock).forEach(function(a,b,c){this._htEvent["click_"+b]={ref:jindo.$Fn(this._onClick,this).attach(this.getHandler(b),"click"),el:this.getHandler(b)}},this)},_detachEvent:function(a){if(a){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(0,a.indexOf("_")))}},_detachEventAll:function(){for(var a in this._htEvent)this._detachEvent(a);this._htEvent=null},_onClick:function(a){a.stop();var b=this._getBlock(a.element),c=b?jindo.$A(this._aAccordionBlock).indexOf(b):null,d=this.getExpandIndex(),e=this.option("bUseToggle");typeof c=="number"&&(c==d?e&&(this.collapse(d),this._nExpand=-1):(this.expand(c),d>-1&&this.collapse(d)))},_setSize:function(){this._htBlockSize={};var a,b;jindo.$A(this._aAccordionBlock).forEach(function(c,d,e){a=this._getHeaderSize(d),b=this._getBodySize(d),this._htBlockSize[d]={nHeaderSize:a,nBodySize:b},this.option("sDirection")=="vertical"?jindo.$Element(c).height(a):jindo.$Element(c).width(a)},this)},_getHeaderSize:function(a){var b=jindo.$Element(this.getHead(a)),c=this.option("sDirection")=="vertical"?b.height():b.width();return c},_getBodySize:function(a){var b=jindo.$Element(this.getBody(a)),c=this.option("sDirection")=="vertical"?b.height():b.width();return c},_getSize:function(a){(!this._htBlockSize||!this._htBlockSize[a])&&this._setSize();var b=this._htBlockSize[a].nHeaderSize+this._htBlockSize[a].nBodySize;return b},_setDefaultExpand:function(){var a=this.option("nDefalutIndex");a>-1&&setTimeout(jindo.$Fn(function(){this.expand(a)},this).bind(),100)},getHead:function(a){return jindo.$$.getSingle("dt",this._aAccordionBlock[a])},getBody:function(a){return jindo.$$.getSingle("dd",this._aAccordionBlock[a])},_getBlock:function(a){var b=this.option("sClassPrefix")+"block",c=jindo.m.getClosest(b,a);return c},getHandler:function(a){var b=this.getHead(a);return jindo.$$.getSingle("."+this.option("sClassPrefix")+"handler",b)||b},getExpandIndex:function(){return this._nExpand},expand:function(a){this._elBlock=this._aAccordionBlock[a];if(typeof this._elBlock=="undefined")return;if(!this.fireEvent("beforeExpand",{sType:"beforeExpand",elBlock:this._elBlock,nBeforeIndex:this._nExpand,nIndex:a}))return;this._setTransition(this._elBlock,this._getSize(a)),this._nExpand=a,this.fireEvent("expand",{sType:"expand",elBlock:this._elBlock,nIndex:a})},collapse:function(a){this._elBlock=this._aAccordionBlock[a];if(typeof this._elBlock=="undefined")return;if(!this.fireEvent("beforeCollapse",{sType:"beforeCollapse",elBlock:this._elBlock,nIndex:a}))return;this._setTransition(this._elBlock,this._getHeaderSize(a)),this._nExpand==a&&(this._nExpand=-1),this.fireEvent("collapse",{sType:"collapse",elBlock:this._elBlock,nIndex:a})},collapseAll:function(){var a=this.getExpandIndex();a>-1&&this.collapse(a),this._nExpand=-1},setEffect:function(a){a.sTransitionTimingFunction&&(a.sTransitionTimingFunction=="ease"||a.sTransitionTimingFunction=="linear"||a.sTransitionTimingFunction=="ease-in"||a.sTransitionTimingFunction=="ease-out"||a.sTransitionTimingFunction=="ease-in-out")&&this.option("sTransitionTimingFunction",a.sTransitionTimingFunction),a.nDuration&&a.nDuration>0&&this.option("nDuration",a.nDuration)},_setTransition:function(a,b,c,d){c=c||this.option("sTransitionTimingFunction"),d=d||this.option("nDuration"),d>0&&this._attachTransitionEnd(a);var e="",f=this.option("sDirection");a.style.webkitTransition="",a.style.mozTransition="",f==="vertical"?(e="height "+d+"ms "+c,a.style.webkitTransition=e,a.style.mozTransition=e,a.style.height=b+"px"):f==="horizontal"&&(e="width "+d+"ms "+c,a.style.webkitTransition=e,a.style.mozTransition=e,a.style.width=b+"px"),d===0&&this._onTransitionEnd({srcElement:a})},_attachTransitionEnd:function(a){this._elTransition=a,this._elTransition.addEventListener("webkitTransitionEnd",this._wfTransitionEnd,!1)},_detachTransitionEnd:function(a){a.removeEventListener("webkitTransitionEnd",this._wfTransitionEnd,!1),this._elTransition=null},_onTransitionEnd:function(a){var b=jindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);b&&b.focus(),this._detachTransitionEnd(a.srcElement)},destroy:function(){this._detachEventAll(),this._elContainer=null,this._aAccordionBlock=null,this._elBlock=null,this._htBlockSize=null,this._nExpand=null}}).extend(jindo.m.UIComponent),jindo.m.AjaxHistory=jindo.$Class({bHashEvent:!1,bPushState:!1,_nIntervalId:0,_htLastState:{},$init:function(a){this.option({nCheckInterval:100,bUseHash:!1}),this.option(a||{})},initialize:function(){this._initVar(),this._attachEvent();var a=this._getHash();return a?(this._htLastState=this._getDecodedData(a),this.fireEvent("change",{bLoad:!0,htHistoryData:this._htLastState})):this.fireEvent("load"),this},_initVar:function(){var a=jindo.m.getDeviceInfo();this.bHashEvent="onhashchange"in window,this.bPushState=typeof window.history!="undefined"&&typeof window.history.pushState!="undefined"&&typeof window.history.replaceState!="undefined"&&!((a.iphone||a.ipad)&&parseFloat(a.version,10)<4.3),this._nIntervalId=0,this._oAgent=jindo.$Agent().navigator(),this._bAndroid=a.android,this.option("bUseHash")&&(this.bPushState=!1)},_attachEvent:function(){this._htEvent={},this.bPushState?this._htEvent.popstate={ref:jindo.$Fn(this._onPopState,this).attach(window,"popstate"),el:window}:this.bHashEvent?this._htEvent.hashchange={ref:jindo.$Fn(this._onHashChange,this).attach(window,"hashchange"),el:window}:(clearInterval(this._nIntervalId),this._nIntervalId=setInterval(jindo.$Fn(this._onHashChange,this).bind(),this.option("nCheckInterval")))},_onPopState:function(a){var b=a.$value().state;if(b){var c=this._cloneObject(b);this._compareData(c,this._htLastState)||(this._htLastState=c,this._onChange())}},_onHashChange:function(){var a=this._getDecodedData(this._getHash());this._compareData(a,this._htLastState)||(this._htLastState=a,this._onChange())},_onChange:function(){this.fireEvent("change",{bLoad:!1,htHistoryData:this._htLastState})},addHistory:function(a,b){typeof b=="undefined"&&(b=!1);if(a&&typeof a=="object"&&jindo.$H(a).length()>0){var c=this._cloneObject(a);if(this._compareData(c,this._htLastState))return;this._htLastState=c;var d=this._getEncodedData(this._htLastState);if(this.bPushState)b?this._replaceState(this._htLastState):this._pushState(this._htLastState);else{var e=this;this._bAndroid?setTimeout(function(){e._setHash(d)},0):this._setHash(d)}}},_replaceState:function(a){history.replaceState(a,document.title,location.href)},_pushState:function(a){history.pushState(a,document.title,location.href)},_setHash:function(a){location.hash=a},_compareData:function(a,b){if(a&&b){if(jindo.$H(a).length()==jindo.$H(b).length()){for(var c in a)if(typeof a[c]=="object"){if(!arguments.callee(a[c],b[c]))return!1}else if(a[c]!=b[c])return!1;return!0}return!1}return!1},_getEncodedData:function(a){return a?typeof JSON=="object"&&typeof JSON.stringify=="function"?encodeURIComponent(JSON.stringify(a)):encodeURIComponent(jindo.$Json(a).toString()):""},_getDecodedData:function(a){try{if(a){var b=decodeURIComponent(a);return typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(b):jindo.$Json(b).toObject()}}catch(c){}return{}},_cloneObject:function(a){var b,c;return a?(b=jindo.$Json(a).toString(),c=jindo.$Json(b).toObject()):c={},c},_getHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a)}this._htEvent=null},destroy:function(){this._detachEvent(),clearInterval(this._nIntervalId),this._nIntervalId=null}}).extend(jindo.m.Component),jindo.m.Calendar=jindo.$Class({$init:function(a,b){var c=new Date;this.option({bActivateOnload:!0,sClassPrefix:"calendar-",bUseEffect:!1,nEffectDuration:200,sTitleFormat:"yyyy.mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],htToday:{nYear:c.getFullYear(),nMonth:c.getMonth()+1,nDate:c.getDate()}}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._bVisible=!1,this._oToday=this.option("htToday"),this._oViewDate=null,this._nSelectDate=-1,this._sClassPrefix=this.option("sClassPrefix"),this._aDayInfo=[],this.option("bUseEffect")&&(this._oTransition=new jindo.m.Transition)},_setWrapperElement:function(a){this._htWElement={},this._htWElement.calendarBase=jindo.$Element(a),this._htWElement.calendarBase.css({position:"absolute",display:"none"}),aTh=this._htWElement.calendarBase.queryAll("th");for(var b=0,c=aTh.length;b<c;b++)this._aDayInfo.push(jindo.$Element(aTh[b]).text());this._htWElement.calendarTitle=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"title")),this._htWElement.calendarTable=jindo.$Element(this._htWElement.calendarBase.query("table")),this._htWElement.calendarTbody=jindo.$Element(this._htWElement.calendarTable.query("tbody")),this._htWElement.yearPreBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-prev-year")),this._htWElement.preBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-prev-mon")),this._htWElement.yearNextBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-next-year")),this._htWElement.nextBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-next-mon")),this._htWElement.closeBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-close"))},getCalendarBase:function(){return this._htWElement.calendarBase},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htWElement.yearPreBtn&&(this._htEvent.pre_year_click={el:this._htWElement.yearPreBtn,ref:jindo.$Fn(this._onYearPre,this).attach(this._htWElement.yearPreBtn,"click")}),this._htWElement.preBtn&&(this._htEvent.pre_click={el:this._htWElement.preBtn,ref:jindo.$Fn(this._onPre,this).attach(this._htWElement.preBtn,"click")}),this._htWElement.yearNextBtn&&(this._htEvent.next_year_click={el:this._htWElement.yearNextBtn,ref:jindo.$Fn(this._onYearNext,this).attach(this._htWElement.yearNextBtn,"click")}),this._htWElement.nextBtn&&(this._htEvent.next_click={el:this._htWElement.nextBtn,ref:jindo.$Fn(this._onNext,this).attach(this._htWElement.nextBtn,"click")}),this._htWElement.closeBtn&&(this._htEvent.close_click={el:this._htWElement.closeBtn,ref:jindo.$Fn(this._onClose,this).attach(this._htWElement.closeBtn,"click")}),this._htEvent.table_click={el:this._htWElement.calendarTable,ref:jindo.$Fn(this._onDate,this).attach(this._htWElement.calendarTable,"click")}},_onPre:function(a){this._moveDate("pre"),a.stop()},_onYearPre:function(a){this._moveDate("preYear"),a.stop()},_onNext:function(a){this._moveDate("next"),a.stop()},_onYearNext:function(a){this._moveDate("nextYear"),a.stop()},_onClose:function(a){this.hide(),a.stop()},_onDate:function(a){if(!this._bVisible)return;var b=jindo.$Element(a.element),c="";return b.$value().tagName!="td"&&(b=b.parent(function(a){return a.$value().tagName.toLowerCase()=="td"})[0]),b&&(c=b.attr("data-cal-date"),c&&c.length==8&&(this._nSelectDate=c*1,this.fireEvent("selectDate",{oSelectDate:this.getSelectDate()})&&(b.addClass(this._sClassPrefix+"selected"),this.hide()))),a.stopDefault(),!1},_moveDate:function(a){if(!this._bVisible)return;var b={nYear:this._oViewDate.nYear,nMonth:this._oViewDate.nMonth,nDate:this._oViewDate.nDate},c={nDate:this._oViewDate.nDate};switch(a){case"pre":c.nYear=b.nMonth==1?b.nYear-1:b.nYear,c.nMonth=b.nMonth==1?12:b.nMonth-1;break;case"preYear":c.nYear=b.nYear-1,c.nMonth=b.nMonth;break;case"next":c.nYear=b.nMonth==12?b.nYear+1:b.nYear,c.nMonth=b.nMonth==12?1:b.nMonth+1;break;case"nextYear":c.nYear=b.nYear+1,c.nMonth=b.nMonth}this.fireEvent("beforeMoveDate",{oOldDate:b,oMoveDate:c})&&(this._drawCalendar(c),this.fireEvent("moveDate",{oOldDate:b,oMoveDate:c}))},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")+1))}this._htEvent=null},show:function(a,b){a||(a=this._oToday);if(this.fireEvent("beforeShowCalendar",{oDrawDate:a})){this._nSelectDate=this._getDateNumber(b),(this._getDateNumber(a,"YearMonth")!=this._oViewDate?this._getDateNumber(this._oViewDate,"YearMonth"):0)?this._drawCalendar(a):this._drawDayColor();var c=this;this._htWElement.calendarBase.show(),this.option("bUseEffect")?(this._htWElement.calendarBase.opacity(0),this._oTransition.queue(this._htWElement.calendarBase.$value(),this.option("nEffectDuration"),{htStyle:{opacity:1},fCallback:function(){c._afterShow(a)}}),setTimeout(function(){c._oTransition.start()},10)):this._afterShow(a)}},_afterShow:function(a){this._htWElement.calendarBase.css("zIndex","1000"),this._bVisible=!0,this.fireEvent("showCalendar",{oDrawDate:a})},hide:function(){var a=this.getSelectDate();if(this.fireEvent("beforeHideCalendar",{oSelectDate:a})){this._bVisible=!1;if(this.option("bUseEffect")){var b=this;this._oTransition.queue(this._htWElement.calendarBase.$value(),this.option("nEffectDuration"),{htStyle:{opacity:0},fCallback:function(){b._afterHide(a)}}),b._oTransition.start()}else this._afterHide(a)}},_afterHide:function(a){this._htWElement.calendarBase.css("zIndex","0").hide(),this.fireEvent("hideCalendar",{oSelectDate:a})},isVisible:function(){return this._bVisible},getSelectDate:function(){var a,b;return this._nSelectDate&&this._nSelectDate>0&&(a=this._nSelectDate+"",b={nYear:Number(a.substr(0,4)),nMonth:Number(a.substr(4,2)),nDate:Number(a.substr(6,4))}),b},_drawCalendar:function(a){this._oViewDate={nYear:a.nYear,nMonth:a.nMonth,nDate:a.nDate},this._drawCalendarHeaderHtml(),this._drawCalendarBodyHtml(),this._drawDayColor()},_drawDayColor:function(){var a=this._getDateNumber(this._oToday),b=this._nSelectDate,c=this._htWElement.calendarTbody.queryAll("td");for(var d=0,e=c.length,f;d<e;d++){f=jindo.$Element(c[d]);if(!f.hasClass(this._sClassPrefix+"prev-mon")&&!f.hasClass(this._sClassPrefix+"next-mon")){var g=f.attr("data-cal-date")*1;f[a===g?"addClass":"removeClass"](this._sClassPrefix+"today"),f[b>-1&&b===g?"addClass":"removeClass"](this._sClassPrefix+"selected"),a==b&&f.removeClass(this._sClassPrefix+"today")}}},_drawCalendarHeaderHtml:function(){var a=this._oViewDate.nYear,b=this._oViewDate.nMonth;b<10&&(b=("0"+b*1).toString()),this._htWElement.calendarTitle&&this._htWElement.calendarTitle.text(this.option("sTitleFormat").replace(/yyyy/g,a).replace(/y/g,a.toString().substr(2,2)).replace(/mm/g,b).replace(/m/g,b*1).replace(/M/g,this.option("aMonthTitle")[b-1]))},_drawCalendarBodyHtml:function(){var a=[],b,c,d,e=!1,f,g,h,i;b=new Date(this._oViewDate.nYear,this._oViewDate.nMonth,0),d=b.getTime(),b=new Date(this._oViewDate.nYear,this._oViewDate.nMonth-1,1),c=b.getTime();while(b.getDay()!==0)b.setDate(b.getDate()-1);while(!e){a.push("<tr>");for(var j=0;j<7;j++)f=b.getTime(),g=[],h="",i=b.getDay(),bPrevMonth=!1,bNextMonth=!1,f<c&&(g.push(this._sClassPrefix+"prev-mon"),bPrevMonth=!0),d<f&&(g.push(this._sClassPrefix+"next-mon"),bNextMonth=!0),i===0&&g.push(this._sClassPrefix+"sun"),i===6&&g.push(this._sClassPrefix+"sat"),h=b.getFullYear()*1e4+(b.getMonth()+1)*100+b.getDate(),a.push('<td class="'+g.join(" ")+'" data-cal-date="'+h+'"><a href="javascript:void(0)" class="'+this._sClassPrefix+'date">'+b.getDate()+"</a></td>"),b.setDate(b.getDate()+1),d===f&&(e=!0);a.push("</tr>")}this._htWElement.calendarTbody.html(a.join(""))},isBetween:function(a,b,c){return this.getDateObject(a).getTime()>this.getDateObject(c).getTime()||this.getDateObject(a).getTime()<this.getDateObject(b).getTime()?!1:!0},getDayName:function(a){return this._aDayInfo[a]},getDateObject:function(a){return arguments.length==3?new Date(arguments[0],arguments[1]-1,arguments[2]):new Date(a.nYear,a.nMonth-1,a.nDate)},_getDateNumber:function(a,b){var c;return b==="YearMonth"?c=a?a.nYear*1e4+a.nMonth*100:-1:c=a?a.nYear*1e4+a.nMonth*100+a.nDate:-1,c},destroy:function(){this.deactivate(),this._bVisible=!1,this._oToday=null,this._oViewDate=null,this._nSelectDate=-1,this._sClassPrefix=null,this.option("bUseEffect")&&(this._oTransition.destroy(),this._oTransition=null),this._aDayInfo=null}}).extend(jindo.m.UIComponent),jindo.m.CheckRadioCore=jindo.$Class({$init:function(a,b){},_initVar:function(a,b){this._sFormType=a,this._sFormFixClass=b,this._sUnitClass=this.option("sClassPrefix")+b+"-unit",this._sOnClass=this.option("sClassPrefix")+b+"-on",this._sFormClass=this.option("sClassPrefix")+b,this._sDisableClass=this.option("sClassPrefix")+b+"-disable";var c=jindo.m.getDeviceInfo();this._bMobile=c.iphone||c.ipad||c.android,this._sClickEvent=this._bMobile?"touchend":"click",this._bMove=!1},_setWrapperElement:function(a,b){this._htWElement={},this._aWElUnitList=[],this._aWElFormList=[],a=typeof a=="string"?jindo.$(a):a,this._htWElement.base=jindo.$Element(a),this._htWElement.container=jindo.$Element(jindo.$$.getSingle("."+b+this._sFormFixClass+"-cont",a));var c=this._htWElement.container.queryAll("."+this._sUnitClass),d=this._htWElement.container.queryAll("."+this._sFormClass);for(var e=0;e<c.length;e++)this._aWElUnitList[e]=jindo.$Element(c[e]),this._aWElFormList[e]=jindo.$Element(d[e])},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.form_touchmove={el:this._htWElement.container.$value(),ref:jindo.$Fn(this._onTouchMove,this).attach(this._htWElement.container.$value(),"touchmove")},this._htEvent["form_"+this._sClickEvent]={el:this._htWElement.container.$value(),ref:jindo.$Fn(this._onCheck,this).attach(this._htWElement.container.$value(),this._sClickEvent)};if(this._bMobile)for(var a=0;a<this._aWElFormList.length;a++)this._htEvent["form"+a+"_click"]={el:this._aWElFormList[a].$value(),ref:jindo.$Fn(this._onFormClick,this).attach(this._aWElFormList[a].$value(),"click")}},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")+1))}this._htEvent=null},_onTouchMove:function(a){this._bMove=!0},_onFormClick:function(a){var b=this._sUnitClass,c=jindo.$Element(a.element);c=c.parent(function(a){return a.hasClass(b)})[0];var d=a.element.checked,e=c.attr("data-cb-checked"),f=e&&e=="on"?!0:!1;d!=f&&(a.element.checked=f)},_onCheck:function(a){if(a.element&&!this._bMove){var b=jindo.m.getNodeElement(a.element),c=jindo.$Element(b),d=this._sUnitClass,e=b.tagName.toLowerCase(),f=b.getAttribute("type");f=f?f:"";if(this._htWElement.container.isParentOf(c)&&!c.hasClass(d))c=c.parent(function(a){return a.hasClass(d)})[0];else if(c.$value()===this._htWElement.container.$value())return!1;if(c.hasClass(this._sDisableClass))return!1;var g=!1;e=="input"&&f.toLowerCase()==this._sFormType&&(g=!0),this._afterCheck(c,g)}this._bMove=!1},_afterCheck:function(a,b){},_getFormIdx:function(a){var b=[],c=[],d=this._sUnitClass,e=this._sFormClass,f=jindo.$A(this._aWElUnitList),g=jindo.$A(this._aWElFormList);if(a instanceof Array)c=a;else if(typeof a=="object")c.push(a);else if(!a||a===null){var h=this._aWElUnitList.length;for(var i=0;i<h;i++)b.push(i)}var j=-1;return c.length>0&&(f.forEach(function(a,d){for(var e=0;e<c.length;e++)c[e]===a.$value()&&b.push(d)}),c.length>b.length&&g.forEach(function(a,d){for(var e=0;e<c.length;e++)c[e]===a.$value()&&b.push(d)})),b},_useSettingForm:function(a,b){var c=this._getFormIdx(a),d=[],e=[],f=b?"enable":"disable";for(var g=0;g<c.length;g++)this._setUsedForm(b,this._aWElFormList[c[g]].$value(),this._aWElUnitList[c[g]]),d[g]=this._aWElFormList[c[g]].$value(),e[g]=this._aWElUnitList[c[g]].$value();return{aFormList:d,aUnitList:e}},_setUsedForm:function(a,b,c){a?(c.removeClass(this._sDisableClass),b.disabled=!1):(c.addClass(this._sDisableClass),b.disabled=!0)},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._sUnitClass=null,this._sOnClass=null,this._sFormClass=null,this._sDisableClass=null,this._aWElUnitList=null,this._aWElFormList=null}}).extend(jindo.m.UIComponent),jindo.m.CheckBox=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"fcb-",sType:"v",bActivateOnload:!0,sUncheckBgColor:"transparent"}),this.option(b||{}),this._initVar(),this._setWrapperElement(a,this.option("sClassPrefix")),this._initCheckLoad(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this.$super._initVar("checkbox","checkbox")},_initCheckLoad:function(){var a=this._htWElement.container.queryAll("."+this._sUnitClass),b,c;for(var d=0;d<a.length;d++)b=jindo.$Element(a[d]),c=jindo.$$.getSingle("input[type=checkbox]",b.$value()),this._setChecked(c.checked,c,b);b=c=null},_afterCheck:function(a,b){var c=jindo.$$.getSingle("."+this._sFormClass,a.$value()),d=a.attr("data-cb-checked"),e=d&&d=="on"?!1:!0;c.checked=e,this._setChecked(e,c,a)},_setChecked:function(a,b,c){var d="unchecked",e=this.option("sCheckBgColor");a?(c.addClass(this._sOnClass),c.attr("data-cb-checked","on"),d="checked"):(e=e?this.option("sUncheckBgColor"):null,c.removeClass(this._sOnClass),c.attr("data-cb-checked","off")),this.fireEvent(d,{elCheckBoxUnit:c.$value(),elCheckBox:b})},getCheckedValue:function(){var a=[],b=this._aWElFormList,c=null;for(var d=0;d<b.length;d++)c=b[d].$value(),!c.disabled&&c.checked&&a.push(c.value);return a},setCheckedBox:function(a,b){var c=this._getFormIdx(b),d=null;for(var e=0;e<c.length;e++)d=this._aWElFormList[c[e]].$value(),d.disabled||(d.checked=a,this._setChecked(a,d,this._aWElUnitList[c[e]]))},enable:function(a){var b=this._useSettingForm(a,!0);this.fireEvent("enable",{aCheckBoxList:b.aFormList,aCheckBoxUnitList:b.aUnitList})},disable:function(a){var b=this._useSettingForm(a,!1);this.fireEvent("disable",{aCheckBoxList:b.aFormList,aCheckBoxUnitList:b.aUnitList})},geElementtByIndex:function(a){return{elCheckBox:this._aWElFormList[a].$value(),elCheckBoxUnit:this._aWElUnitList[a].$value()}},destroy:function(){this.$super.destroy()}}).extend(jindo.m.CheckRadioCore),jindo.m.CircularFlicking=jindo.$Class({$init:function(a,b){this.option({bHorizontal:!0,sClassPrefix:"flick-",nFlickThreshold:40,nDuration:100,nTotalContents:3,nBounceDuration:100,bActivateOnload:!0,bSetNextPanelPos:!1,bUseCss3d:jindo.m._isUseCss3d(!0),bUseTimingFunction:jindo.m._isUseTimingFunction(),bUseTranslate:!0,bUseDiagonalTouch:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._initFlicking(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oFlicking=null},_initFlicking:function(){var a=this.option();a.sContentClass="panel",a.sAnimation="slide",a.bUseCircular=!0,a.bActivateOnload=!1,this._oFlicking=(new jindo.m.Flicking(this._htWElement.base.$value(),a)).attach({touchStart:jindo.$Fn(this._onTouchStart,this).bind(),touchMove:jindo.$Fn(this._onTouchMove,this).bind(),touchEnd:jindo.$Fn(this._onTouchEnd,this).bind(),beforeMove:jindo.$Fn(this._onBeforeMove,this).bind(),move:jindo.$Fn(this._onMove,this).bind(),rotate:jindo.$Fn(this._onRotate,this).bind(),scroll:jindo.$Fn(this._onScroll,this).bind(),beforeFlicking:jindo.$Fn(this._onBeforeFlicking,this).bind(),afterFlicking:jindo.$Fn(this._onAfterFlicking,this).bind()})},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a);var b="."+this.option("sClassPrefix");this._htWElement.base=jindo.$Element(a),this._htWElement.container=jindo.$Element(jindo.$$.getSingle(b+"container",a));var c=jindo.$$(b+"panel",a);this._htWElement.aPanel=jindo.$A(c).forEach(function(a,b,c){var d=jindo.$Element(a);c[b]=d}).$value()},getPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getPanelElement().$value())},getPanelElement:function(){return this._oFlicking.getElement()},getRightPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getRightPanelElement().$value())},getRightPanelElement:function(){return this._oFlicking.getNextElement()},getLeftPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getLeftPanelElement().$value())},getLeftPanelElement:function(){return this._oFlicking.getPrevElement()},getContentIndex:function(){return this._oFlicking.getContentIndex()},getRightContentIndex:function(){return this._oFlicking.getNextIndex()},getLeftContentIndex:function(){return this._oFlicking.getPrevIndex()},_onTouchStart:function(a){var b=this.fireEvent("touchStart",a);if(!b){a.stop();return}},_onTouchMove:function(a){this.fireEvent("touchMove",a)},_onTouchEnd:function(a){this.fireEvent("touchEnd",a)},_onBeforeMove:function(a){var b=a.nContentsNextIndex%3;this.fireEvent("beforeMove",{nPanelIndex:this.getPanelIndex(),nContentIndex:a.nContentsIndex,nNextPanelIndex:b,nNextContentIndex:a.nContentsNextIndex})||a.stop()},_onMove:function(a){this.fireEvent("move",{nPanelIndex:this.getPanelIndex(),nPanelLeftIndex:this.getLeftPanelIndex(),nPanelRightIndex:this.getRightPanelIndex(),nContentIndex:this.getContentIndex(),nContentLeftIndex:this.getLeftContentIndex(),nContentRightIndex:this.getRightContentIndex()})},_onRotate:function(a){this.fireEvent("rotate",a)},_onScroll:function(){this.fireEvent("scroll")},_onBeforeFlicking:function(a){var b={nContentIndex:a.nContentsIndex,nNextContentIndex:a.nContentsNextIndex,nPanelIndex:this.getPanelIndex(),nNextPanelIndex:this.getLeftPanelIndex()};a.bTop&&(b.bTop=a.bTop),a.bLeft&&(b.bLeft=a.bLeft);if(b.bTop||b.bLeft)b.nNextPanelIndex=this.getRightPanelIndex();this.fireEvent("beforeFlicking",b)||a.stop()},_onAfterFlicking:function(a){var b={nPanelIndex:this.getPanelIndex(),nPanelLeftIndex:this.getLeftPanelIndex(),nPanelRightIndex:this.getRightPanelIndex(),nContentIndex:this.getContentIndex(),nContentLeftIndex:this.getLeftContentIndex(),nContentRightIndex:this.getRightContentIndex()};a.bTop&&(b.bTop=a.bTop),a.bLeft&&(b.bLeft=a.bLeft),this._htWElement.aPanel=this._oFlicking._htWElement.aPanel,this.fireEvent("afterFlicking",b)},moveNext:function(a){if(!this.isActivating())return;this._oFlicking.moveNext()},movePrev:function(a){if(!this.isActivating())return;this._oFlicking.movePrev()},refresh:function(a,b,c){var d=this;if(!this.isActivating())return;typeof b=="undefined"&&(b=!1),typeof c=="undefined"&&(c=!1),this._oFlicking.refresh(a,b,c)},setContentIndex:function(a,b){if(!this.isActivating())return;a=parseInt(a,10);if(a<0||a>this.option("nTotalContents")-1)return;typeof b=="undefined"&&(b=!0),this.refresh(a,b,!0)},_onActivate:function(){this._oFlicking.activate()},_onDeactivate:function(){this._oFlicking.deactivate()},destroy:function(){this.deactivate(),this._oFlicking=null;for(var a in this._htWElement)this._htWElement[a]=null}}).extend(jindo.m.UIComponent),jindo.m.CorePagination=jindo.$Class({_nCurrentPage:1,$init:function(a){this.option({nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0}),this.option(a||{}),this._nCurrentPage=this.option("nPage")},getItemCount:function(){return this.option("nItem")},getItemPerPage:function(){return this.option("nItemPerPage")},getCurrentPage:function(){return this._nCurrentPage},setItemCount:function(a){this.option("nItem",a)},setItemPerPage:function(a){this.option("nItemPerPage",a)},movePageTo:function(a){var b=this._nCurrentPage,c=this._convertToAvailPage(a);c!=this._nCurrentPage&&(this._nCurrentPage=c)},nextPageTo:function(){var a=this._nCurrentPage+1;this.movePageTo(a)},previousPageTo:function(){var a=this._nCurrentPage-1;this.movePageTo(a)},hasNextPage:function(){var a=this.getCurrentPage(),b=this.getTotalPages();return a&&a<b},hasPreviousPage:function(){return this.getCurrentPage()>1},getTotalPages:function(){var a=this.option("nItem"),b=this.option("nItemPerPage");return b?Math.ceil(a/b):null},getPageItemIndex:function(a){a=this._convertToAvailPage(a);var b=this.option("nItem"),c=this.option("nItemPerPage"),d,e;return!a||!c?null:(d=(a-1)*c,e=Math.min(d+c,b)-1,{nStart:d,nEnd:e})},getPageOfItem:function(a){return Math.ceil(a/this.getItemPerPage())},_convertToAvailPage:function(a){var b=this.getTotalPages();return a=Math.max(a,1),a=Math.min(a,b),a}}).extend(jindo.m.UIComponent),jindo.m.CoreTab=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"tc-",nDefaultIndex:0,nPanelDuration:0,nHeight:0,nWidth:0,bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a)},_initVar:function(){this._sPrefix=this.option("sClassPrefix"),this._nCurrentIndex=-1,this._aTab=[],this._aPanel=[],this._oPanelEffect=null},_setWrapperElement:function(a){this._htWElement={},a=typeof a=="string"?jindo.$(a):a;if(!a)return;this._htWElement.baseElement=jindo.$Element(a),this._htWElement.tab_container=jindo.$Element(this._htWElement.baseElement.query("."+this._sPrefix+"tab-cont")),this._htWElement.panel_container=jindo.$Element(this._htWElement.baseElement.query("."+this._sPrefix+"panel-cont")),this._htWElement.tab_container&&this._htWElement.tab_container.css("-"+jindo.m.getCssPrefix()+"-tap-highlight-color","rgba(0,0,0,0)")},_initData:function(){var a=this.option("nPanelDuration"),b,c;this._aTab=this._htWElement.tab_container.queryAll("."+this._sPrefix+"tab"),this._aPanel=this._htWElement.panel_container.queryAll("."+this._sPrefix+"panel"),a&&(b=(this.option("nWidth")==0?this._htWElement.panel_container.width()-parseInt(this._aPanel[0].css("paddingLeft"),10)-parseInt(this._aPanel[0].css("paddingRight"),10):this.option("nWidth"))+"px",c=this.option("nHeight")+"px");for(var d=0,e=this._aTab.length;d<e;d++)this._aTab[d]=jindo.$Element(this._aTab[d]).attr("data-index",d),this._aPanel[d]=jindo.$Element(this._aPanel[d]),a&&this._aPanel[d].css({width:b,height:c,position:"absolute"});a&&(this._oPanelEffect=new jindo.m.LayerEffect(this._aPanel[0].$value()),this._htWElement.panel_container.css({position:"relative",overflow:"hidde",height:c}))},_getIdx:function(a){return parseInt(a.attr("data-index"),10)},_getTabElement:function(a){var b=this._sPrefix+"tab",c=this._sPrefix+"more-tab";return a.hasClass(b)||a.hasClass(c)?a:this._htWElement.tab_container.isParentOf(a)&&(!a.hasClass(b)||!a.hasClass(c))?a.parent(function(a){return a.hasClass(b)||a.hasClass(c)},2)[0]:a},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.tab_click={el:this._htWElement.tab_container,ref:jindo.$Fn(this._onSelect,this).attach(this._htWElement.tab_container,"click")}},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")+1))}this._htEvent=null,this._oPanelEffect&&this._oPanelEffect.detachAll()},getCurrentIndex:function(){return this._nCurrentIndex},getTab:function(a){return a!==null&&this._aTab.length>a?this._aTab[a]:this._aTab},getPanel:function(a){return a!==null&&this._aPanel.length>a?this._aPanel[a]:this._aPanel},_onSelect:function(a){if(a.element){if(this._oPanelEffect&&this._oPanelEffect.isPlaying())return a.stop(jindo.$Event.CANCEL_ALL),!1;var b=this._getTabElement(jindo.$Element(a.element));this._onAfterSelect(b)}},select:function(a){if(a!==null&&a>=0&&this._aTab.length>a&&this._nCurrentIndex!=a&&this._fireEventBefore("beforeSelect")){var b=this._sPrefix+"selected";this._beforeSelect(a),this._aTab[a].addClass(b),this._aPanel[a].addClass(b),this._aPanel[a].show(),this._nCurrentIndex>-1&&(this._aTab[this._nCurrentIndex].removeClass(b),this._oPanelEffect?this._slide(this._nCurrentIndex,a):(this._aPanel[this._nCurrentIndex].removeClass(b),this._aPanel[this._nCurrentIndex].hide())),this._nCurrentIndex=a,this._fireEvent("select")}},_slide:function(a,b){var c=this,d=a<b,e=this._aPanel[b].width();this._fireEventBefore("beforeSlide")&&(this._oPanelEffect.setLayer(this._aPanel[b].$value()),this._oPanelEffect.attach("afterEffect",function(){c._onPannelAfterEffct(a,b)}),this._aPanel[b].css({left:d?e:-e,zIndex:9}),this._oPanelEffect.slide({sDirection:d?"left":"right",nDuration:this.option("nPanelDuration"),nSize:e}))},_onPannelAfterEffct:function(a,b){this._aPanel[a].removeClass(this._sPrefix+"selected"),this._aPanel[a].hide(),this._aPanel[a].css("zIndex",1),this._aPanel[b].css("zIndex",2),this._oPanelEffect.detachAll("afterEffect"),this._fireEvent("slide")},_fireEventBefore:function(a){return this.fireEvent(a,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]})},_fireEvent:function(a){this.fireEvent(a,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]})},destroy:function(){for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null;for(a in this._aTab)this._aTab[a]=null;this._aTab=null;for(a in this._aPanel)this._aPanel[a]=null;this._aPanel=null,this._oPanelEffect&&(this._oPanelEffect.destroy(),this._oPanelEffect=null)}}).extend(jindo.m.UIComponent),jindo.m.Datepicker=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"calendar-",sFormat:"yyyy-mm-dd",bActivateOnload:!0,bAutoHide:!1}),this.option(b||{}),this._initVar(),this._initCalendar(a),this.option("bActivateOnload")&&this.activate()},$static:{INDEX_ATTR:"data-datepickerid"},_initVar:function(){this._oCalendar=null,this._htDatePickerSet={},this._htSelectedDatePickerSet=null},_initCalendar:function(a){var b=this.option("sClassPrefix"),c=this.option();c.bActivateOnload=!0,this._oCalendar=new jindo.m.Calendar(jindo.$Element(a)?jindo.$Element(a):this._insertCalendarTemplate(),c)},_isSelectable:function(a,b){return this._oCalendar.isBetween(b,a.htSelectableDateFrom,a.htSelectableDateTo)},addDatePickerSet:function(a,b){if(typeof a=="undefined")return this;var c="DATEPICKER_"+(new Date).getTime()+"_"+Math.floor(Math.random()*100),d=jindo.$Element(a),e=this._oCalendar.option(),f={nYear:e.htToday.nYear,nMonth:e.htToday.nMonth,nDate:e.htToday.nDate,htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31},sPosition:"bottomLeft",zIndex:50,sDatePikerSetId:c};if(typeof b!="undefined")for(var g in b)typeof f[g]!="undefined"&&(f[g]=b[g]);return b=f,d.replace("<span style='position:relative;display:inline-block;'>"+d.toString()+"</span>"),d=jindo.$Element(a),d.attr("readOnly",!0).attr(jindo.m.Datepicker.INDEX_ATTR,c),b.elInput=d.$value(),b.wfFocusFunc=this._attachFocusEvent(d),this._htSelectedDatePickerSet=this._htDatePickerSet[c]=b,this},removeDatePickerSet:function(a){var b=jindo.$Element(a),c=b.attr(jindo.m.Datepicker.INDEX_ATTR),d=this._htDatePickerSet[c];return this._detachFocusEvent(d.wfFocusFunc,b),d===this._htSelectedDatePickerSet&&(this._htSelectedDatePickerSet=null),delete this._htDatePickerSet[c],this},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this.hide(),this._detachEvent()},_attachEvent:function(){this._htEvent={},this.option("bAutoHide")&&(this._htEvent.document=jindo.$Fn(this._onDocument,this).attach(document,"touchend")),this._htEvent.selectDate=jindo.$Fn(this._onSelectDate,this).bind(),this._htEvent.deliveryEvent=jindo.$Fn(this._onDeliveryEvent,this).bind(),this._oCalendar.attach({selectDate:this._htEvent.selectDate,beforeMoveDate:this._htEvent.deliveryEvent,moveDate:this._htEvent.deliveryEvent,beforeHideCalendar:this._htEvent.deliveryEvent,hideCalendar:this._htEvent.deliveryEvent,beforeShowCalendar:this._htEvent.deliveryEvent,showCalendar:this._htEvent.deliveryEvent})},_insertCalendarTemplate:function(){var a=[],b=jindo.$Element("jmc_calt"),c=this.option("sClassPrefix");return b||(a.push("<div>"),a.push('<a href="javascript:void(0)" class="'+c+"btn "+c+'btn-prev-year">&lt;&lt;</a>'),a.push('<a href="javascript:void(0)" class="'+c+"btn "+c+'btn-prev-mon">&lt;</a>'),a.push('<strong class="'+c+'title"></strong>'),a.push('<a href="javascript:void(0)" class="'+c+"btn "+c+'btn-next-mon">&gt;</a>'),a.push('<a href="javascript:void(0)" class="'+c+"btn "+c+'btn-next-year">&gt;&gt;</a>'),a.push('</div><table cellspacing="0" cellpadding="0" style="'),a.push("-"+jindo.m.getCssPrefix()+'-tap-highlight-color:rgba(0,0,0,0);"><thead><tr>'),a.push('<th class="'+c+'sun">일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th class="'+c+'sat">토</th>'),a.push("</tr></thead><tbody>"),a.push('<tr class="'+c+'week">'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push("</tr></tbody></table>"),a.push('<div class="'+c+'bottom"><a href="javascript:void(0)" class="'+c+"btn "+c+'btn-close">닫기</a></div>'),b=jindo.$Element('<div id="jmc_calt" class="'+c+'base" style="position:absolute;display:none"></div>'),b.html(a.join("")),b.appendTo(document.body)),b},_detachEvent:function(){var a=null;this.option("bAutoHide")&&this._htEvent.document.detach(document,"touchend");for(var b in this._htDatePickerSet)a=this._htDatePickerSet[b],this._detachFocusEvent(a.wfFocusFunc,a.elInput);this._oCalendar.detachAll(),this._htSelectedDatePickerSet=null,this._htEvent=null},_onFocus:function(a){if(!this.isActivating())return!1;this.show(a.element)},_onDocument:function(a){var b=a.element,c=jindo.$Element(b),d=this._oCalendar.getCalendarBase(),e=this._htSelectedDatePickerSet.elInput;return d.$value()!=b&&!d.isParentOf(c)&&e!=b&&(this.hide(),e&&e.blur()),!0},_onSelectDate:function(a){if(!this._oCalendar.isVisible())return;if(this._isSelectable(this._htSelectedDatePickerSet,a.oSelectDate)){var b=this._htSelectedDatePickerSet.elInput;return this.setDate(b,a.oSelectDate),b.blur(),this.fireEvent("selectDate",{oSelectDate:a.oSelectDate,oCalendar:this._oCalendar}),!0}return a.stop(jindo.$Event.CANCEL_ALL),!1},_onDeliveryEvent:function(a){return a.oCalendar=this._oCalendar,this.fireEvent(a.sType,a)},setDate:function(a,b){if(!this.isActivating())return!1;var c=a?a.getAttribute(jindo.m.Datepicker.INDEX_ATTR):null,d=this._htDatePickerSet[c];if(!c||!this._isSelectable(d,b))return!1;a.value=this._formatDate(b),d.nYear=b.nYear,d.nMonth=b.nMonth,d.nDate=b.nDate,this._htDatePickerSet[c]=d},_formatDate:function(a){var b=new Date(a.nYear,a.nMonth-1,a.nDate),c=this._oCalendar.getDayName(b.getDay());return this.option("sFormat").replace(/(yyyy|yy|mm|dd|day)/gi,function(a){switch(a){case"yyyy":return b.getFullYear();case"yy":return b.getFullYear().toString().substr(2);case"mm":var d=b.getMonth()+1+"";return d=d.length===1?"0"+d:d,d;case"dd":var e=b.getDate()+"";return e=e.length===1?"0"+e:e,e;case"day":return c}})},deleteDate:function(a){if(!a)return;var b=jindo.$Element(a),c=this._htDatePickerSet[b.attr(jindo.m.Datepicker.INDEX_ATTR)],d=new Date;a.value="",c.nYear=d.getFullYear(),c.nMonth=d.getMonth()+1,c.nDate=d.getDate(),this._isCurrentDatePicker(b.$value())&&this.hide(),this.fireEvent("clear",{oCalendar:this._oCalendar})},_isCurrentDatePicker:function(a){var b=a?a.getAttribute(jindo.m.Datepicker.INDEX_ATTR):null,c=this._htSelectedDatePickerSet.sDatePikerSetId;return b==c},enable:function(a){if(a){var b=jindo.$Element(a);b.$value().disabled=!1}else{var c=this._htDatePickerSet;for(var d in c)c[d].elInput.disabled=!1}this.fireEvent("enable",{oCalendar:this._oCalendar})},_attachFocusEvent:function(a){return jindo.$Fn(this._onFocus,this).attach(a,"focus")},_detachFocusEvent:function(a,b){a.detach(b,"focus")},disable:function(a){var b=this._htDatePickerSet;if(a){var c=jindo.$Element(a);c.$value().disabled=!0}else for(var d in b)b[d].elInput.disabled=!0;this.hide(),this.fireEvent("disable",{oCalendar:this._oCalendar})},setPosition:function(a,b){var c=jindo.$Element(a),d=this._htDatePickerSet[c.attr(jindo.m.Datepicker.INDEX_ATTR)],e=this._oCalendar.getCalendarBase(),f={},g=e.$value(),h=e.visible();h||(e.css("left","-999px"),e.show());var i=e.height(),j=e.width(),k=c.height(),l=c.width();b=b||d.sPosition,g.style.left=null,g.style.right=null,g.style.top=null,h||e.hide();switch(b){case"leftTop":f.top="0px",f.left="-"+j+"px";break;case"leftBottom":f.top="-"+(i-k)+"px",f.left="-"+j+"px";break;case"rightTop":f.top="0px",f.left=l+"px";break;case"rightBottom":f.top="-"+(i-k)+"px",f.left=l+"px";break;case"bottomLeft":f.top=k+"px",f.left="0px";break;case"bottomRight":f.top=k+"px",f.right="0px";break;case"topLeft":f.top="-"+i+"px",f.left="0px";break;case"topRight":f.top="-"+i+"px",f.right="0px"}d.sPosition=b,e.css(f)},show:function(a){var b=jindo.$Element(a),c=this._oCalendar.getCalendarBase(),d=this._htDatePickerSet[b.attr(jindo.m.Datepicker.INDEX_ATTR)],e={nYear:d.nYear,nMonth:d.nMonth,nDate:d.nDate};this._htSelectedDatePickerSet=d,b.parent().append(c),d.zIndex!="none"&&c.css("zIndex",d.zIndex),this.setPosition(a,d.sPosition),this._oCalendar.show(e,a.value?e:0)},hide:function(){this._oCalendar.isVisible()&&this._oCalendar.hide()},destroy:function(){this.deactivate(),this._oCalendar=null,this._htDatePickerSet=null}}).extend(jindo.m.UIComponent),jindo.m.Dialog=jindo.$Class({$init:function(a){var b={bActivateOnload:!0,sClassPrefix:"dialog-",sPosition:"center",bUseEffect:!0,bAutoClose:!1,bAutoReposition:!0,sFoggyColor:"gray",nFoggyOpacity:.5,sEffectType:"pop",nEffectDuration:500,sDialogColor:"white"};this.option(b),this.option(a||{}),this._setWrapperElement(),this._initVar(),this._setDeviceSize(),this._initElement(),this.option("bActivateOnload")&&this.activate()},_setWrapperElement:function(){this._htWElement={},this._htWElement.dialog_container=jindo.$Element('<div class="'+this.option("sClassPrefix")+'container"></div>'),this._htWElement.dialog_foggy=jindo.$Element('<div class="'+this.option("sClassPrefix")+'fog"></div>'),this._htWElement.dialog_layer=jindo.$Element('<div class="'+this.option("sClassPrefix")+'layer"></div>'),this._htWElement.dialog_clone=jindo.$Element('<div class="'+this.option("sClassPrefix")+'clone"></div>')},_initVar:function(){this._htDialogSize={width:0,height:0},this._sTemplate=null,this._bIsShown=!1,this._bProcessingShow=!1,this._bProcessingHide=!1,this._htDeviceInfo=jindo.m.getDeviceInfo(),this._bIOS=this._htDeviceInfo.iphone||this._htDeviceInfo.ipad?!0:!1,this._bAndroid=this._htDeviceInfo.android?!0:!1},_setDeviceSize:function(){this._bIOS||this._bAndroid||!jindo.$Agent().navigator().mobile?this._htDeviceSize=jindo.$Document().clientSize():this._htDeviceSize={width:window.screen.width,height:window.screen.height}},_initContainerTop:function(){var a=0,b=this.option("bUseEffect"),c=this.option("sEffectType");b&&(c=="slide-up"||c=="slide-down")&&(a=this._htDeviceSize.height*(c=="slide-up"?1:-1)),a+=window.pageYOffset,this._htWElement.dialog_container.css("top",a+"px")},_initElement:function(){this._htWElement.dialog_foggy.css({position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",top:"0px"}),this._htWElement.dialog_foggy.appendTo(this._getContainer()),this._htWElement.dialog_layer.css({position:"relative",backgroundColor:this.option("sDialogColor")}),this._htWElement.dialog_layer.appendTo(this._getContainer()),this._htWElement.dialog_container.css({position:"absolute",overflow:"hidden",width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",zIndex:100}),this._initContainerTop(),this._htWElement.dialog_container.hide(),this._htWElement.dialog_container.appendTo(document.body),this.option("bUseEffect")&&(this._oLayerEffect=new jindo.m.LayerEffect(this._getContainer())),this._htWElement.dialog_clone.css({position:"absolute",left:"-1000px",top:"-1000px"}),this._htWElement.dialog_clone.appendTo(document.body),this._htWElement.dialog_clone.hide()},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEventAll()},_attachEvent:function(){this._htEvent={},this._htEvent.click={ref:jindo.$Fn(this._onClick,this).attach(this.getDialog(),"click"),el:this.getDialog()},this._htEvent.touchend={ref:jindo.$Fn(this._onClick,this).attach(this._getFoggy(),"touchend"),el:this._getFoggy()},this._htEvent.touchmove={ref:jindo.$Fn(this._onTouchMove,this).attach(this._getContainer(),"touchmove"),el:this._getContainer()},this.option("bAutoReposition")&&(this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate))},_detachEvent:function(a){if(a){var b=this._htEvent[a];b.ref&&b.ref.detach(b.el,a)}},_detachEventAll:function(){for(var a in this._htEvent)this._detachEvent(a);jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onClick:function(a){var b=this.option("sClassPrefix"),c,d,e,f,g;if(c=jindo.m.getClosest("."+b+"close",a.element))this.fireEvent("close",{sType:"close",elLayer:this.getDialog()})&&this.hide();else if(d=jindo.m.getClosest("."+b+"confirm",a.element))this.fireEvent("confirm",{sType:"confirm",elLayer:this.getDialog()})&&this.hide();else if(e=jindo.m.getClosest("."+b+"cancel",a.element))this.fireEvent("cancel",{sType:"cancel",elLayer:this.getDialog()})&&this.hide();else if(f=jindo.m.getClosest("."+b+"layer",a.element)){if(g=jindo.m.getClosest("a",a.element))return!1}else this.option("bAutoClose")&&this.hide();return a.stop(),!1},_onTouchStart:function(a){var b=this.option("sClassPrefix"),c;if(!(c=jindo.m.getClosest("."+b+"layer",a.element)))return a.stop(jindo.$Event.CANCEL_ALL),!1},_onTouchMove:function(a){return a.stop(jindo.$Event.CANCEL_ALL),!1},_onResize:function(a){if(this._bProcessingShow||this._bProcessingHide)this.option("bUseEffect")?this._getLayerEffect().stop():this._bProcessingShow?this._endShowEffect():this._endHideEffect();this._oTimeout&&(clearTimeout(this._oTimeout),this._oTimeout=null),this.isShown()&&this._bIOS&&this._htWElement.dialog_container.hide(),this._oTimeout=setTimeout(jindo.$Fn(function(){this._resizeDocument(),this.isShown()&&this._bIOS&&this._htWElement.dialog_container.show()},this).bind(),300)},_resizeDocument:function(){this._setDeviceSize(),this._htWElement.dialog_container.css({width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"}),this._htWElement.dialog_foggy.css({width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"}),this._resizeDialog(!0),this.option("bUseEffect")&&this._getLayerEffect().setSize()},_resizeDialog:function(a){(this._setDialogSize()||a)&&this._repositionDialog()},_getLayerEffect:function(){return this._oLayerEffect},_getContainer:function(){return this._htWElement.dialog_container.$value()},_getFoggy:function(){return this._htWElement.dialog_foggy.$value()},getDialog:function(){return this._htWElement.dialog_layer.$value()},setTemplate:function(a){this._sTemplate=a,this._oTemplate=jindo.$Template(this._sTemplate),this._htWElement.dialog_clone.html(a),this._resizeDialog()},getTemplate:function(){return this._sTemplate},_setDialogSize:function(){var a,b;return this.option("sPosition")=="all"?(a=this._htDeviceSize.width,b=this._htDeviceSize.height):(this._htWElement.dialog_clone.show(),a=Math.min(this._htWElement.dialog_clone.width(),this._htDeviceSize.width),b=Math.min(this._htWElement.dialog_clone.height(),this._htDeviceSize.height),this._htWElement.dialog_clone.hide()),this._htDialogSize.width==a&&this._htDialogSize.height==b?!1:(this._htDialogSize={width:a,height:b},this._htWElement.dialog_layer.css({width:a+"px",height:b+"px"}),this._htDialogSize)},_getDialogSize:function(){return this._htDialogSize},_repositionDialog:function(){var a=this._getDialogPosition();this._htWElement.dialog_layer.css({top:a.top+"px",left:a.left+"px"}),this._htWElement.dialog_container.css({top:window.pageYOffset+"px",left:window.pageXOffset+"px"});if(!this.isShown()){var b=this.option("sEffectType");(b=="slide-up"||b=="slide-down")&&this._initContainerTop()}},_getDialogPosition:function(){var a=this._htDeviceSize.width,b=this._htDeviceSize.height,c=this._getDialogSize().width,d=this._getDialogSize().height,e={};switch(this.option("sPosition")){case"top":e.top=0,e.left=parseInt((a-c)/2,10);break;case"center":e.top=parseInt((b-d)/2,10),e.left=parseInt((a-c)/2,10);break;case"bottom":e.top=parseInt(b-d,10),e.left=parseInt((a-c)/2,10);break;case"all":e.top=0,e.left=0}return e},setPosition:function(a){(a=="top"||a=="center"||a=="bottom"||a=="all")&&this.option("sPosition",a),this._resizeDialog()},useEffect:function(){if(this.option("bUseEffect"))return!1;this.option("bUseEffect",!0),this._initContainerTop()},unuseEffect:function(){if(!this.option("bUseEffect"))return!1;this.option("bUseEffect",!1),this._initContainerTop()},setEffectType:function(a){this.useEffect();if(a=="pop"||a=="slide-up"||a=="slide-down"||a=="flip")this.option("sEffectType",a),this._initContainerTop()},setEffectDuration:function(a){this.useEffect(),a&&a>99&&this.option("nEffectDuration",a)},setEffect:function(a){this.useEffect(),a.type&&this.setEffectType(a.type),a.duration&&this.setEffectDuration(a.duration)},isShown:function(){return this._bIsShown},show:function(a,b){if(this.isShown())return!1;this._bProcessingShow=!0,this._htEvent.touchstart={ref:jindo.$Fn(this._onTouchStart,this).attach(document,"touchstart"),el:document},b&&(this._showAttachedEvent=b,this.attach(b)),this._resizeDocument(),typeof a=="undefined"?a={}:(this._htWElement.dialog_clone.html(this._oTemplate.process(a)),this._resizeDialog()),this._htWElement.dialog_layer.html(this._oTemplate.process(a));if(!this.fireEvent("beforeShow",{sType:"beforeShow",elLayer:this.getDialog()}))return;this._showDialogLayer()},_showDialogLayer:function(){this.option("bUseEffect")?(this._getLayerEffect().attach("afterEffect",jindo.$Fn(this._endShowEffect,this).bind()),this._startShowEffect()):(this._htWElement.dialog_container.show(),this._endShowEffect())},_startShowEffect:function(){var a=this.option("sEffectType"),b=this.option("nEffectDuration");switch(a){case"slide-up":this._htWElement.dialog_container.show(),this._getLayerEffect().setSize(),this._getLayerEffect().slide({sDirection:"up",nDuration:b});break;case"slide-down":this._htWElement.dialog_container.show(),this._getLayerEffect().setSize(),this._getLayerEffect().slide({sDirection:"down",nDuration:b});break;case"pop":this._getLayerEffect().pop({sDirection:"in",nDuration:b,htFrom:{opacity:1}});break;case"flip":this._htWElement.dialog_container.show(),this._getLayerEffect().flip({nDuration:b,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htFrom:{opacity:0},htTo:{opacity:1}})}},_endShowEffect:function(){this.option("bUseEffect")&&this._getLayerEffect().detachAll("afterEffect"),this.fireEvent("show",{sType:"show",elLayer:this.getDialog()}),this._bIsShown=!0,this._bProcessingShow=!1},hide:function(){if(!this.isShown())return!1;this._bProcessingHide=!0;if(!this.fireEvent("beforeHide",{sType:"beforeHide",elLayer:this.getDialog()}))return;this._hideDialogLayer()},_hideDialogLayer:function(){this.option("bUseEffect")?(this._getLayerEffect().attach("afterEffect",jindo.$Fn(this._endHideEffect,this).bind()),this._startHideEffect()):(this._htWElement.dialog_container.hide(),this._endHideEffect())},_startHideEffect:function(){var a=this.option("sEffectType"),b=this.option("nEffectDuration");switch(a){case"slide-up":this._getLayerEffect().slide({sDirection:"down",nDuration:b});break;case"slide-down":this._getLayerEffect().slide({sDirection:"up",nDuration:b});break;case"pop":this._getLayerEffect().pop({sDirection:"out",nDuration:b,htTo:{opacity:0}});break;case"flip":this._getLayerEffect().flip({nDuration:b,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htTo:{opacity:0}})}},_endHideEffect:function(){this.option("bUseEffect")&&this._getLayerEffect().detachAll("afterEffect"),this.fireEvent("hide",{sType:"hide",elLayer:this.getDialog()});if(this._showAttachedEvent){for(var a in this._showAttachedEvent)this.detachAll(a);this._showAttachedEvent=null}this._detachEvent("touchstart"),this._htWElement.dialog_container.hide(),this._htWElement.dialog_container.css("opacity",1),(window.pageYOffset||window.pageXOffset)&&this._htWElement.dialog_container.css({top:"0px",left:"0px"}),this._bIsShown=!1,this._bProcessingHide=!1},destroy:function(){this._detachEventAll(),this.option("bUseEffect")&&(this._getLayerEffect().destroy(),this._oLayerEffect=null),this._htWElement.dialog_container.leave(),this._htWElement.dialog_clone.leave(),this._htWElement=null,this._htDeviceSize=null,this._htDialogSize=null,this._sTemplate=null,this._oTemplate=null,this._bIsShown=null,this._bProcessingShow=null,this._bProcessingHide=null,this._oTimeout=null,this._htDeviceInfo=null,this._bIOS=null,this._bAndroid=null}}).extend(jindo.m.UIComponent),jindo.m.DragArea=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"drag-",bFlowOut:!1,nThreshold:10,nMoveThreshold:3,bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._initTouch(),this._setAnchorElement(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oTouch=null,this._sDragClass="."+this.option("sClassPrefix")+"dragging",this._sHandleClass="."+this.option("sClassPrefix")+"handle",this._htInfo={elDrag:null,elHandle:null,nStartX:null,nStartY:null,nX:null,nY:null,bDragStart:!1,nCount:0,bPrepared:!1},this._sCssUserSelect="-"+jindo.m.getCssPrefix()+"-user-select",this._sCssUserSelectValue=document.body.style[this._sCssUserSelect];var a=jindo.m.getDeviceInfo();this._isIos=a.iphone||a.ipad,this._aAnchor=null,this._fnDummyFnc=function(){return!1},this._bBlocked=!1;var b=parseFloat(a.version,10);this._bTouchStop=!1,this._bTouchStop=a.android&&(b==2.1||b>=3),this._bTouchStop||(this._bTouchStop=a.iphone&&b>=3&&b<4)},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a),this._htWElement.base=jindo.$Element(a)},_initTouch:function(){this._oTouch||(this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nSlopeThreshold:1,nMoveThreshold:this.option("nMoveThreshold"),bActivateOnload:!1}),this._oTouch.setSlope(-1,-1))},_getDragElement:function(a,b){if(jindo.$$.test(a,"input[type=text], textarea, select"))return null;var c=this,d=function(a,b){return b?a===document||a===b?!0:jindo.$Element(a).isParentOf(b):!1},e=jindo.$$.test(a,this._sDragClass)?a:jindo.m.getClosest(this._sDragClass,a);d(this._htWElement.base,e)||(e=null);var f=null;if(e){try{f=jindo.$$.getSingle(this._sHandleClass,e)}catch(g){}f&&(d(f,a)||(e=null))}return{elDrag:e,elHandle:f}},_onStart:function(a){if(!this.isActivating())return;this._initInfo();var b=this._getDragElement(a.element,this._sHandleClass);if(!b.elDrag)return;var c={elHandle:b.elHandle,elDrag:b.elDrag,oEvent:a.oEvent};if(!this.fireEvent("handleDown",c))return;this._bTouchStop&&a.oEvent.stop(),this._htInfo.bPrepared=!0,this._clearAnchor(),this._htInfo.welDrag=jindo.$Element(c.elDrag),this._htInfo.elHandle=c.elHandle;var d=this._htInfo.welDrag.offset();this._htInfo.nStartX=d.left,this._htInfo.nStartY=d.top,document.body.style[this._sCssUserSelect]="none",this._oTouch.attach({touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd})},_onMove:function(a){if(!this._htInfo.bPrepared)return;var b=a.nDistanceX,c=a.nDistanceY;if(Math.abs(b)+Math.abs(c)<this.option("nThreshold"))return;a.oEvent.stop();var d={nX:this._htInfo.nStartX+b,nY:this._htInfo.nStartY+c};if(!this.option("bFlowOut")){var e=this._onReCalculateOffset(this._htInfo.welDrag.$value(),d.nX,d.nY);d.nX=e.nX,d.nY=e.nY}var f={nX:d.nX,nY:d.nY,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,nGapX:b,nGapY:c,nDragCount:this._htInfo.nCount,nTouchX:a.nX,nTouchY:a.nY};if(!this._htInfo.bDragStart&&!this.fireEvent("dragStart",f)){this._htInfo.bPrepared=!1;return}this._htInfo.bDragStart=!0;if(!this.fireEvent("beforeDrag",f))return;this._htInfo.welDrag.css("position","absolute"),this._htInfo.welDrag.offset(f.nY,f.nX),this._htInfo.nX=f.nX,this._htInfo.nY=f.nY,this._htInfo.nCount++,this.fireEvent("drag",f)},_onReCalculateOffset:function(a,b,c){elParent=this._htWElement.base;var d=elParent.offset(),e={nX:d.left,nY:d.top,nWidth:elParent.$value().offsetWidth,nHeight:elParent.$value().offsetHeight},f={nWidth:a.offsetWidth,nHeight:a.offsetHeight},g=Math.max(b,e.nX);g=Math.min(g,e.nX+e.nWidth-f.nWidth);var h=Math.max(c,e.nY);return h=Math.min(h,e.nY+e.nHeight-f.nHeight),{nX:g,nY:h}},_onEnd:function(a){if(!this._htInfo.bPrepared)return;this._stopDrag(!1),(a.sMoveType===jindo.m.MOVETYPE[3]||a.sMoveType===jindo.m.MOVETYPE[4])&&this._restoreAnchor();if(this._htInfo.welDrag){var b={elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle};this.fireEvent("handleUp",b)}this._initInfo()},isDragging:function(){return this._htInfo.bDragStart},stopDragging:function(){this._stopDrag(!0)},_stopDrag:function(a){typeof a=="undefined"&&(a=!1),this._oTouch.detach({touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),document.body.style[this._sCssUserSelect]=this._sCssUserSelectValue?this._sCssUserSelectValue:"";if(this.isDragging()){var b={nX:parseInt(this._htInfo.welDrag.css("left"),10)||0,nY:parseInt(this._htInfo.welDrag.css("top"),10)||0,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,bInterupted:a};this.fireEvent("dragEnd",b),this._htInfo.bDragStart=!1}},_setAnchorElement:function(){this._isIos&&(this._aAnchor=jindo.$$("A",this._htWElement.base.$value()))},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){var a=null;for(var b=0,c=this._aAnchor.length;b<c;b++){this._fnDummyFnc!==this._aAnchor[b].onclick&&(this._aAnchor[b]._onclick=this._aAnchor[b].onclick),this._aAnchor[b].onclick=this._fnDummyFnc,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;d<e;d++)___Old__removeEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){var a=null;for(var b=0,c=this._aAnchor.length;b<c;b++){this._fnDummyFnc!==this._aAnchor[b]._onclick?this._aAnchor[b].onclick=this._aAnchor[b]._onclick:this._aAnchor[b].onclick=null,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;d<e;d++)___Old__addEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!1}},_initInfo:function(){this._htInfo.welDrag=null,this._htInfo.elHandle=null,this._htInfo.nStartX=null,this._htInfo.nStartY=null,this._htInfo.nX=null,this._htInfo.nY=null,this._htInfo.bDragStart=!1,this._htInfo.nCount=0},_onActivate:function(){this._attachEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._oTouch.attach("touchStart",this._htEvent.touchStart)},_detachEvent:function(){this._oTouch.detachAll();for(var a in this._htEvent)this._htEvent[a]=null;this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;for(a in this._htInfo)this._htInfo[a]=null;this._htWElement=null,this._htInfo=null,this._isIos=null,this._aAnchor=null,this._fnDummyFnc=null,this._bBlocked=null,this._bTouchStop=null}}).extend(jindo.m.UIComponent),jindo.m.DropArea=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"drop-",oDragInstance:null,bActivateOnload:!0,bUseTouchPoint:!1}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._waOveredDroppableElement=jindo.$A([]),this._sEvent="ontouchstart"in window?"touchmove":"mousemove",this._sDropClassName="."+this.option("sClassPrefix")+"area",this._aItem=null,this._aItemRect=null,this._elHandle=null,this._elDragging=null;var a=jindo.m.getDeviceInfo();this._bReCalculateOffset=(a.iphone||a.ipad)&&a.bInapp?!1:!0},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a),this._htWElement.base=jindo.$Element(a)},_getRectInfo:function(a){var b=jindo.$Element(a).offset(),c=0,d=0;return this._bReCalculateOffset&&jindo.$Element(a).parent(function(a){var b=jindo.m.getCssOffset(a.$value());c+=b.left,d+=b.top}),{nLeft:b.left+c,nTop:b.top+d,nRight:b.left+c+a.offsetWidth,nBottom:b.top+d+a.offsetHeight}},_reCalculate:function(){var a=this._htWElement.base.$value(),b=jindo.$$(this._sDropClassName,a);a.tagName&&jindo.$$.test(a,this._sDropClassName)&&b.push(a),this._aItem=b,this._aItemRect=[];for(var c=0,d;d=b[c];c++)this._aItemRect.push(this._getRectInfo(d))},_findDroppableElement:function(a){var b=jindo.$$.test(a,this._sDropClassName)?a:jindo.m.getClosest(this._sDropClassName,a);return this._isChildOfDropArea(a)||(b=null),b},_isChildOfDropArea:function(a){return this._el===document||this._el===a?!0:this._htWElement.base.isParentOf(a)},_isDropMove:function(a,b,c,d){var e=this._aItem,f=this._aItemRect,g,h,i;if(!this.option("bUseTouchPoint"))for(g=0;(h=f[g])&&(i=e[g]);g++){var j=this._checkOverArea({nMin:h.nLeft,nMax:h.nRight},{nMin:a,nMax:c}),k=this._checkOverArea({nMin:h.nTop,nMax:h.nBottom},{nMin:b,nMax:d});j&&k?(this._addOveredDroppableElement(i),this._fireMoveEvent(i,h,{nX:a,nY:b})):this._removeOveredDroppableElement(i)}else for(g=0;(h=f[g])&&(i=e[g]);g++)h.nLeft<=a&&a<=h.nRight&&h.nTop<=b&&b<=h.nBottom?(this._addOveredDroppableElement(i),this._fireMoveEvent(i,h,{nX:a,nY:b})):this._removeOveredDroppableElement(i)},_checkOverArea:function(a,b){if(b.nMin<a.nMin){if(b.nMax>a.nMin)return!0}else if(b.nMin<a.nMax)return!0;return!1},_fireMoveEvent:function(a,b,c){var d=(c.nX-b.nLeft)/(b.nRight-b.nLeft),e=(c.nY-b.nTop)/(b.nBottom-b.nTop);this.fireEvent("move",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a,nRatioX:d,nRatioY:e})},_addOveredDroppableElement:function(a){this._waOveredDroppableElement.indexOf(a)==-1&&(this._waOveredDroppableElement.push(a),this.fireEvent("over",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a}))},_removeOveredDroppableElement:function(a){var b=this._waOveredDroppableElement.indexOf(a);b!=-1&&(this._waOveredDroppableElement.splice(b,1),this.fireEvent("out",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a}))},_clearOveredDroppableElement:function(){for(var a;a=this._waOveredDroppableElement.$value()[0];)this._waOveredDroppableElement.splice(0,1),this.fireEvent("drop",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a})},getOveredLists:function(){return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[]},_onActivate:function(){this._attachEvent();if(this.option("oDragInstance")){var a=this.option("oDragInstance"),b=this;a.attach({handleDown:function(a){b._elHandle=a.elHandle,b._elDragging=a.elDrag,b._waOveredDroppableElement.empty(),b.fireEvent(a.sType,a)},dragStart:function(a){b.fireEvent(a.sType,a)?b._reCalculate():a.stop()},beforeDrag:function(a){b.fireEvent(a.sType,a)},drag:function(a){b._elDragging=a.elDrag;var c=jindo.$Element(a.elDrag),d=b.option("bUseTouchPoint")?a.nTouchY:a.nY,e=b.option("bUseTouchPoint")?a.nTouchX:a.nX,f=e+c.width(),g=d+c.height();b._isDropMove(e,d,f,g),b.fireEvent(a.sType,a)},dragEnd:function(a){var c={};c.aElDrop=b.getOveredLists().concat();for(var d in a)c[d]=a[d];b._clearOveredDroppableElement(),b.fireEvent(a.sType,c)},handleUp:function(a){b.fireEvent("handleUp",{elHandle:b._elHandle,elDrag:b._elDragging}),b._elHandle=null,b._elDragging=null}})}},_onDeactivate:function(){this._detachEvent();if(this.option("oDragInstance")){var a=this.option("oDragInstance");a.detachAll()}},_attachEvent:function(){this._htEvent={}},_detachEvent:function(){this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.LayerPosition=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,bAutoReposition:!0,sPosition:"center",nLeftMargin:0,nRightMargin:0,nTopMargin:0,nBottomMargin:0,bUseFixed:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},isUseFixed:function(){return this._bUseFixedProperty},_onActivate:function(){this._isVertical=jindo.m.isVertical(),this.option("bAutoReposition")&&this._attachEvent(),this.setPosition()},_onDeactivate:function(){this.option("bAutoReposition")&&this._detachEvent()},_initVar:function(){var a=this.option("nLeftMargin"),b=this.option("nTopMargin");this._htMargin={nLeft:a,nRight:this.option("nRightMargin"),nTop:b,nBottom:this.option("nBottomMargin")},this._sPosition=this.option("sPosition"),this._htOldPosition={nTop:null,nLeft:null,nBottom:null},this._htPosition={nTop:null,nLeft:null,nBottom:null},this._bUseFixedProperty=this.option("bAutoReposition")&&this.option("bUseFixed")&&jindo.m._isUseFixed(),this._isVertical=null,this._hasOrientationChange=jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().bChrome,this._nPreWidth=-1},getPosition:function(){return this._sPosition},getMargin:function(){return this._htMargin},getLayer:function(){return this._htWElement.element.$value()},getCurrentPosition:function(){return this._htPosition},_setWrapperElement:function(a){this._htWElement={},this.setLayer(a)},setLayer:function(a){return this._htWElement.element=jindo.$Element(a),this._bUseFixedProperty?this._htWElement.element.css("position","fixed"):this._htWElement.element.css("position","absolute"),this._htWElement.element.parent().isEqual(document.body)||this._htWElement.element.appendTo(document.body),this},top:function(a){this.setPosition("top",a)},bottom:function(a){this.setPosition("bottom",a)},center:function(a){this.setPosition("center",a)},all:function(a){this.setPosition("all",a)},_fixedLayerSize:function(a,b){var c=parseInt(this._htMargin.nLeft,10),d=parseInt(this._htMargin.nTop,10),e={"padding-top":parseInt(this._htWElement.element.css("padding-top"),10),"padding-bottom":parseInt(this._htWElement.element.css("padding-bottom"),10),"padding-left":parseInt(this._htWElement.element.css("padding-left"),10),"padding-right":parseInt(this._htWElement.element.css("padding-right"),10)},f={"border-top-width":parseInt(this._htWElement.element.css("border-top-width"),10),"border-bottom-width":parseInt(this._htWElement.element.css("border-bottom-width"),10),"border-left-width":parseInt(this._htWElement.element.css("border-left-width"),10),"border-right-width":parseInt(this._htWElement.element.css("border-right-width"),10)};return a-=e["padding-left"]+e["padding-right"]+f["border-left-width"]+f["border-right-width"]+c+parseInt(this._htMargin.nRight,10),b-=e["padding-top"]+e["padding-bottom"]+f["border-top-width"]+f["border-bottom-width"]+d+parseInt(this._htMargin.nBottom,10),this._htWElement.element.css({width:a+"px",height:b+"px"}),{nTop:d,nLeft:c}},_getPosition:function(){var a=this._htWElement.element.width(),b=this._htWElement.element.height(),c={},d=jindo.$Document().clientSize(),e=d.width,f=d.height;a+=parseInt(this._htWElement.element.css("marginLeft"),10)+parseInt(this._htWElement.element.css("marginRight"),10)||0,b+=parseInt(this._htWElement.element.css("marginTop"),10)+parseInt(this._htWElement.element.css("marginBottom"),10)||0;if(this._sPosition==="all")c=this._fixedLayerSize(e,f);else{c.nLeft=parseInt((e-a)/2,10)+parseInt(this._htMargin.nLeft,10);switch(this._sPosition){case"top":c.nTop=parseInt(this._htMargin.nTop,10);break;case"center":c.nTop=parseInt((f-b)/2,10)+parseInt(this._htMargin.nTop,10);break;case"bottom":this._bUseFixedProperty?c.nBottom=parseInt(this._htMargin.nBottom,10):c.nTop=parseInt(f-b,10)-parseInt(this._htMargin.nBottom,10)}this._bUseFixedProperty||(c=this._adjustScrollPosition(c))}return c},_adjustScrollPosition:function(a){var b=jindo.$Document().scrollPosition();return a.nTop+=b.top,a.nLeft+=b.left,a},setPosition:function(a,b){if(!this.isActivating())return;this._htMargin=b||this._htMargin,this._sPosition=a||this._sPosition;if(this._fireEvent("beforePosition")){var c=this._htWElement.element.visible();c||this._htWElement.element.css({left:"-9999px"}).show(),this._htOldPosition=this._htPosition,this._htPosition=this._getPosition(),c||this._htWElement.element.hide();if(!c||this._htOldPosition.nLeft!==this._htPosition.nLeft||this._htOldPosition.nTop!==this._htPosition.nTop||this._htOldPosition.nBottom!==this._htPosition.nBottom)typeof this._htPosition.nTop=="undefined"?this._htWElement.element.$value().style.top=null:typeof this._htPosition.nBottom=="undefined"&&(this._htWElement.element.$value().style.bottom=null),this._htWElement.element.css({left:this._htPosition.nLeft+"px",top:this._htPosition.nTop+"px",bottom:this._htPosition.nBottom+"px"});this._fireEvent("position")}},_attachEvent:function(){this._htEvent={},this._htEvent.actionEvent=jindo.$Fn(this._onEvent,this),this._htEvent.pageShow=jindo.$Fn(this._onPageShow,this).bind(),this._bUseFixedProperty?this._htEvent.actionEvent.attach(window,"resize"):this._htEvent.actionEvent.attach(window,"scroll").attach(window,"resize"),jindo.m.bindPageshow(this._htEvent.pageShow),this._hasOrientationChange&&(this._htEvent.rotate=jindo.$Fn(this._onOrientationChange,this).attach(window,"orientationchange"))},_detachEvent:function(){this._htEvent.actionEvent.detach(window,"scroll").detach(window,"resize"),jindo.m.unbindPageshow(this._htEvent.pageShow),this._hasOrientationChange&&this._htEvent.rotate.detach(window,"orientationchange"),this._htEvent=null},_onEvent:function(a){jindo.m._isUseFixed()&&jindo.m.getDeviceInfo().android&&this._htWElement.element.css("left",this._htWElement.element.css("left")),this._htWElement.element.visible()&&this.setPosition()},_onOrientationChange:function(){if(this._htWElement.element.visible()){var a=this;window.innerWidth<this._htWElement.element.width()?(this._nPreWidth=this._htWElement.element.width(),this._htWElement.element.width(window.innerWidth)):this._nPreWidth!==-1&&this._htWElement.element.width(this._nPreWidth),this._htWElement.element.hide(),this.setPosition(),jindo.m.getDeviceInfo().android&&!jindo.m.getDeviceInfo().bChrome?this._htWElement.element.show():setTimeout(function(){a.setPosition(),a._htWElement.element.show()},10)}},_onPageShow:function(){this.isActivating()&&(this.deactivate(),this.activate())},_fireEvent:function(a){return this.fireEvent(a,{elLayer:this.getLayer(),htMargin:this.getMargin(),htPosition:this.getCurrentPosition()})},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;delete this._htWElement,delete this._htMargin,delete this._sPosition,delete this._htPosition,delete this._htOldPosition,delete this._bUseFixedProperty}}).extend(jindo.m.UIComponent),jindo.m.ScrollEnd=jindo.$Class({$init:function(a,b){this._initVar(),this._setWrapperElement(a),this._attachEvent()},_initVar:function(){this._nType=this._getDetectType(),this._nType===2&&(this._nScrollTimer=-1),this._isTouched=!1,this._isMoved=!1,this._nObserver=null,this._nScrollEndTimer=null,this._nPreLeft=null,this._nPreTop=null},_getDetectType:function(){var a=0;return jindo.m.getDeviceInfo().android?parseInt(jindo.m.getDeviceInfo().version,10)>=3?a=2:a=1:jindo.m.getDeviceInfo().win&&parseInt(jindo.m.getDeviceInfo().version,10)>=8&&(a=2),a},_setWrapperElement:function(a){this._htElement={},this._htElement.body=document.body},_attachEvent:function(){this._htEvent={},this._htEvent.event_scroll={ref:jindo.$Fn(this._onScroll,this).attach(window,"scroll"),el:window},this._nType==1&&(this._htEvent.event_touchstart={ref:jindo.$Fn(this._onStartForAndroid,this).attach(this._htElement.body,"touchstart"),el:this._htElement.body},this._htEvent.event_touchmove={ref:jindo.$Fn(this._onMoveForAndroid,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body},this._htEvent.event_touchend={ref:jindo.$Fn(this._onEndForAndroid,this).attach(this._htElement.body,"touchend"),el:this._htElement.body})},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")))}},_startObserver:function(){var a=this;this._stopObserver(),this._nObserver=setInterval(function(){a._observe()},100)},_observe:function(){this._isTouched||this._nPreTop!==window.pageYOffset||this._nPreLeft!==window.pageXOffset?(this._nPreTop=window.pageYOffset,this._nPreLeft=window.pageXOffset):(this._stopObserver(),this._fireEventScrollEnd())},_stopObserver:function(){clearInterval(this._nObserver),this._nObserver=null},_onScroll:function(a){switch(this._nType){case 0:this._fireEventScrollEnd();break;case 1:this._startObserver();break;case 2:var b=this;clearTimeout(this._nScrollTimer),this._nScrollTimer=setTimeout(function(){b._fireEventScrollEnd()},350)}},_onStartForAndroid:function(a){this._isTouched=!0,this._isMoved=!1,this._nPreTop=null,this._nPreLeft=null},_onMoveForAndroid:function(a){this._isMoved=!0},_onEndForAndroid:function(a){this._isTouched=!1,this._isMoved&&this._startObserver()},_fireEventScrollEnd:function(){this.fireEvent("scrollEnd",{nTop:window.pageYOffset,nLeft:window.pageXOffset})},_fireEventScrollEndForAndroid:function(){var a=this;clearTimeout(this._nScrollEndTimer),this._nScrollEndTimer=setTimeout(function(){a._fireEventScrollEnd()},500)},destroy:function(){this._detachEvent(),this._nType=-1,this._isTouched=null,this._isMoved=null,this._nObserver=null,this._nPreLeft=null,this._nPreTop=null}}).extend(jindo.m.Component),jindo.m.FloatingLayer=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,sPosition:"bottom",sDirection:"up",nSlideDuration:500,sSlideTimingFunction:"ease-in-out",nFadeInDuration:0,sFadeInTimingFunction:"ease-in-out",nFadeOutDuration:200,sFadeOutTimingFunction:"ease-in-out",bUseHideUI:!0,bUseFixed:!1,nTimeout:-1}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oFloatingEffect=null,this._oFadeinEffect=null,this._oLayerPosition=null,this._oScrollEnd=null,this._nTimeoutTimer=-1,this._isFixed=!1,this._isLayerOn=!1,this._isMoving=!1},_setWrapperElement:function(a){this._htWElement={},this._htWElement.element=jindo.$Element(a),this._htWElement.viewElement=jindo.$Element(this._createView())},_initComponent:function(){var a=this,b=this._htWElement.element.$value();this._oLayerPosition=new jindo.m.LayerPosition(this._htWElement.viewElement,{sPosition:this.option("sPosition"),bActivateOnload:!1,bUseFixed:this.option("bUseFixed"),bAutoReposition:!0}),this._oFloatingEffect=new jindo.m.LayerEffect(b),this.option("bUseHideUI")&&this.option("nFadeInDuration")!==0&&(this._oFadeinEffect=(new jindo.m.LayerEffect(this._htWElement.viewElement.$value(),{nDuration:this.option("nFadeInDuration")})).attach("afterEffect",function(){a._startHideTimer()})),this._isFixed=this._oLayerPosition.isUseFixed(),this._oScrollEnd=new jindo.m.ScrollEnd},getLayer:function(){return this._htWElement.element.$value()},_createView:function(){var a=this._htWElement.element.visible(),b=jindo.$Element("<div class='_floatingLayer_view_divtag_' style='display:none;'>"),c="",d="";return a||this._htWElement.element.css({left:"-9999px"}).show(),c=this._htWElement["element"].css("width").indexOf("%")!=-1?this._htWElement.element.css("width"):this._htWElement.element.width()+"px",d=this._htWElement["element"].css("height").indexOf("%")!=-1?this._htWElement.element.css("height"):this._htWElement.element.height()+"px",b.css({width:c,height:d,zIndex:1e3}),a||this._htWElement.element.hide(),b},resize:function(a,b){this._htWElement.viewElement.css({width:a+"px",height:b+"px"}),this._oLayerPosition.setPosition()},show:function(){this._fireEvent("beforeShow")&&(this._oLayerPosition.isActivating()||this._oLayerPosition.activate(),this._setFloatingEffect(!0),this._htWElement.element.show(),this._htWElement.viewElement.show(),this._oFloatingEffect.slide({sDirection:this.option("sDirection"),nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sSlideTimingFunction"),elBaseLayer:this._htWElement.viewElement.$value()}))},hide:function(){this._fireEvent("beforeHide")&&(this._stopHideTimer(),this._oLayerPosition.isActivating()&&this._oLayerPosition.deactivate(),this._detachFloatingEvent(),this._setFloatingEffect(!1),this.option("nFadeOutDuration")!==0?this._oFloatingEffect.fade({sDirection:"out",nDuration:this.option("nFadeOutDuration"),sTransitionTimingFunction:this.option("sFadeOutTimingFunction")}):(this._htWElement.viewElement.hide(),this._fireEvent("hide")))},_fireEvent:function(a){return this.fireEvent(a,{welLayer:this._htWElement.element})},_startHideTimer:function(){if(this.option("nTimeout")>-1){var a=this;this._stopHideTimer(),this._nTimeoutTimer=setTimeout(function(){a.hide()},this.option("nTimeout"))}},_stopHideTimer:function(){clearTimeout(this._nTimeoutTimer),this._nTimeoutTimer=-1},_onTouchStart:function(a){this._initFloatingData(),this._isLayer(a.element)?(this._isLayerOn=!0,this._htWElement.viewElement.show()):(this._htWElement.viewElement.hide(),this._htWElement.viewElement.css("left",this._htWElement.viewElement.css("left")+"px"))},_onScrollEnd:function(a){if(jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad)if(jindo.m._getVertical()!=jindo.m.isVertical())return;this.option("bUseHideUI")?this._isFixed?this._startHideTimer():this._runFadeIn():(this._oLayerPosition.setPosition(),this._startHideTimer())},_onTouchMove:function(a){this._isMoving=!0},_onTouchEnd:function(a){if(this._isLayerOn){this._oLayerPosition.setPosition();return}this._isMoving||this._runFadeIn()},_runFadeIn:function(){this._htWElement.viewElement.visible()||(this._isLayerOn?this._startHideTimer():this._fadeIn())},_fadeIn:function(){this._oLayerPosition.setPosition(),this._oFadeinEffect?(this._oFadeinEffect.clearEffect(!0),this._oFadeinEffect.fade({sDirection:"in",sTransitionTimingFunction:this.option("sFadeInTimingFunction")})):(this._htWElement.viewElement.show(),this._startHideTimer())},_isLayer:function(a){return a&&(this._htWElement.element.isEqual(a)||this._htWElement.viewElement.isEqual(a)||this._htWElement.viewElement.isParentOf(a))?!0:!1},_initFloatingData:function(){this._stopHideTimer(),this._oFloatingEffect&&this.option("nFadeOutDuration")!==0&&this._oFloatingEffect.clearEffect(!0),this._oFadeinEffect&&this._oFadeinEffect.clearEffect(!0),this._isMoving=!1,this._isLayerOn=!1},_onActivate:function(){this._initComponent()},_onDeactivate:function(){this._detachEvent(),this._oFadeinEffect&&(this._oFadeinEffect.detachAll("afterEffect"),this._oFadeinEffect.destroy()),this._oFloatingEffect.destroy(),this._oScrollEnd.destroy(),this._oLayerPosition.destroy(),this._htWElement.element.appendTo(document.body),this._htWElement.viewElement.leave()},_attachFloatingEvent:function(){this._htEvent={};if(this.option("bUseHideUI")&&!this._isFixed){var a=jindo.m._getTouchEventName();this._htEvent[a.start]={el:document.body,fn:jindo.$Fn(this._onTouchStart,this).bind()},this._htEvent[a.move]={el:document.body,fn:jindo.$Fn(this._onTouchMove,this).bind()},this._htEvent[a.end]={el:document.body,fn:jindo.$Fn(this._onTouchEnd,this).bind()},a.cancel&&(this._htEvent[a.cancel]={el:document.body,fn:jindo.$Fn(this._onTouchEnd,this).bind()});for(var b in this._htEvent)this._htEvent[b].fn&&(this._htEvent[b].ref=jindo.m._attachFakeJindo(this._htEvent[b].el,this._htEvent[b].fn,b))}this._oScrollEnd.attach("scrollEnd",jindo.$Fn(this._onScrollEnd,this).bind())},_detachEvent:function(){this._detachFloatingEvent()},_setFloatingEffect:function(a){var b=this;this._oFloatingEffect.detachAll("afterEffect"),this._oFloatingEffect.clearEffect(!0),this._oFadeinEffect&&this._oFadeinEffect.clearEffect(!0),a?this._oFloatingEffect.attach("afterEffect",function(){b._attachFloatingEvent(),b._startHideTimer(),b._fireEvent("show")}):this.option("nFadeOutDuration")!==0&&this._oFloatingEffect.attach("afterEffect",function(){b._htWElement.viewElement.hide(),b._fireEvent("hide")})},_detachFloatingEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref&&b.ref.detach(b.el,a)}this._oScrollEnd.detachAll("scrollEnd"),this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;delete this._htWElement,this._initFloatingData()}}).extend(jindo.m.UIComponent),jindo.m.Scroll=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,bUseScrollbar:!0,bUseFixedScrollbar:!1,sScrollbarBorder:"1px solid white",sScrollbarColor:"#8e8e8e",bUsePullDown:!1,bUsePullUp:!1,sClassPrefix:"scroll_",bUseVScroll:!0,bUseHScroll:!1,bUseBounce:!0,fnPullDownIdle:null,fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,fnPullUpIdle:null,fnPullUpBeforeUpdate:null,fnPullUpUpdating:null,nOffsetTop:0,nOffsetBottom:0,bAutoResize:!1,nScrollbarHideThreshold:0,bUseScrollBarRadius:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._InitPullUpdateFunc(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oCore=null,this._isPullDown=!1,this._isPullUp=!1,this._isUpdating=!1,this._nOrgMaxScrollTop=null,this._nPropHScroll=0,this._nPropVScroll=0,this._htWElement={}},_setWrapperElement:function(a){this._htWElement.wrapper=jindo.$Element(a),this._htWElement.pullDown=jindo.$Element(this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullDown")),this._htWElement.pullUp=jindo.$Element(this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullUp"))},_InitPullUpdateFunc:function(){this.option("bUsePullDown")===!0&&(this.option("fnPullDownIdle")||this.option("fnPullDownIdle",function(a){a.html("업데이트하시려면 아래로 내려주세요")}),this.option("fnPullDownBeforeUpdate")||this.option("fnPullDownBeforeUpdate",function(a){a.html("업데이트 합니다")}),this.option("fnPullDownUpdating")||this.option("fnPullDownUpdating",function(a){a.html("업데이트 중입니다...")})),this.option("bUsePullUp")===!0&&(this.option("fnPullUpIdle")||this.option("fnPullUpIdle",function(a){a.html("더 보시려면 위로 올려주세요")}),this.option("fnPullUpBeforeUpdate")||this.option("fnPullUpBeforeUpdate",function(a){a.html("로드 합니다")}),this.option("fnPullUpUpdating")||this.option("fnPullUpUpdating",function(a){a.html("로드 중...")}))},_onActivate:function(){this._oCore&&this._oCore.activate(),this.refresh(),this._attachEvent()},setUsePullDown:function(a){this.option("bUsePullDown",a),this._refreshPullStatus()},setUsePullUp:function(a){this.option("bUsePullUp",a),this._refreshPullStatus()},width:function(a){if(a)this.option("nWidth",a),this.refresh();else return this.option("nWidth")?parseInt(this.option("nWidth"),10):this._htWElement.wrapper.width()},height:function(a){if(a)this.option("nHeight",a),this.refresh();else return this.option("nHeight")?parseInt(this.option("nHeight"),10):this._htWElement.wrapper.height()},_refreshPullStatus:function(){this._isUpdating=!1,this._nOrgMaxScrollTop=null,this._isPullDown=this.option("bUsePullDown")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&this._htWElement.pullDown!==null,this._isPullUp=this.option("bUsePullUp")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&this._htWElement.pullUp!==null,this._isPullDown&&this.option("fnPullDownIdle")&&(this._htWElement.pullDown._isReady_=!1,this._htWElement.pullDown.show(),this.option("fnPullDownIdle")(this._htWElement.pullDown)),this._isPullUp&&this.option("fnPullUpIdle")&&(this._htWElement.pullUp._isReady_=!1,this._htWElement.pullUp.show(),this.option("fnPullUpIdle")(this._htWElement.pullUp))},refresh:function(){if(!this.isActivating())return;this._refreshPullStatus();if(this._oCore)this._oCore.option({nOffsetTop:(this._isPullDown?this._htWElement.pullDown.height():0)-this.option("nOffsetTop"),nOffsetBottom:(this._isPullUp?this._htWElement.pullUp.height():0)-this.option("nOffsetBottom"),nWidth:this.option("nWidth"),nHeight:this.option("nHeight")}),this._oCore.refresh();else{var a=this.option(),b={};for(var c in a)b[c]=a[c];b.bActivateOnload=!0,b.nOffsetTop=(this._isPullDown?this._htWElement.pullDown.height():0)-this.option("nOffsetTop"),b.nOffsetBottom=(this._isPullUp?this._htWElement.pullUp.height():0)-this.option("nOffsetBottom"),this._oCore=new jindo.m.CoreScroll(this._htWElement.wrapper,b)}this.option("bUseScrollbar")&&(this._refreshScroll("V"),this._refreshScroll("H")),this.hasVScroll()||(this._htWElement.pullDown!==null&&this._htWElement.pullDown.hide(),this._htWElement.pullUp!==null&&this._htWElement.pullUp.hide())},scrollTo:function(a,b,c){c=c||0,a=-Math.abs(a),b=-Math.abs(b),b+=this.getTop(),this._oCore.scrollTo(a>=this.getLeft()?this.getLeft():a<=this.getRight()?this.getRight():a,b>=this.getTop()?this.getTop():b<=this.getBottom()?this.getBottom():b,c)},getRight:function(){return this._oCore.nMaxScrollLeft},getLeft:function(){return 0},getBottom:function(){return this._oCore.nMaxScrollTop},getTop:function(){return this._oCore.nMinScrollTop},getCurrentPos:function(){return this._oCore.getCurrentPos()},hasHScroll:function(){return this._oCore.bUseHScroll},hasVScroll:function(){return this._oCore.bUseVScroll},_onDeactivate:function(){this._detachEvent(),this._oCore.deactivate()},_attachEvent:function(){this._htEvent={},this._oCore.attach({beforeTouchStart:jindo.$Fn(this._onBeforeTouchStart,this).bind(),touchStart:jindo.$Fn(this._onTouchStart,this).bind(),beforeTouchMove:jindo.$Fn(this._onBeforeTouchMove,this).bind(),touchMove:jindo.$Fn(this._onTouchMove,this).bind(),beforeTouchEnd:jindo.$Fn(this._onBeforeTouchEnd,this).bind(),touchEnd:jindo.$Fn(this._onTouchEnd,this).bind(),beforePosition:jindo.$Fn(this._onBeforePosition,this).bind(),position:jindo.$Fn(this._onPosition,this).bind(),setDuration:jindo.$Fn(this._onSetDuration,this).bind(),afterScroll:jindo.$Fn(this._onAfterScroll,this).bind()}),this.option("bAutoResize")&&(this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),jindo.m.bindRotate(this._htEvent.rotate))},_onRotate:function(a){this.refresh()},_onSetDuration:function(a){this.option("bUseScrollbar")&&(a.bUseHScroll&&this._htWElement.HscrollbarIndicator&&this._htWElement.HscrollbarIndicator.css("-"+this._oCore.sCssPrefix+"-transition-duration",a.nDuration),a.bUseVScroll&&this._htWElement.VscrollbarIndicator&&this._htWElement.VscrollbarIndicator.css("-"+this._oCore.sCssPrefix+"-transition-duration",a.nDuration))},_onBeforeTouchStart:function(a){this.fireEvent("beforeTouchStart",a)||a.stop()},_onTouchStart:function(a){this.fireEvent("touchStart",a)||a.stop()},_onBeforeTouchMove:function(a){this.fireEvent("beforeTouchMove",a)||a.stop()},_onTouchMove:function(a){(this._isPullDown||this._isPullUp)&&this._touchMoveForUpdate(a),this.fireEvent("touchMove",a)||a.stop()},_onBeforeTouchEnd:function(a){this.fireEvent("beforeTouchEnd",a)||a.stop()},_onTouchEnd:function(a){this._isPullDown&&this._htWElement.pullDown._isReady_&&this._pullUploading(this._htWElement.pullDown,!1),this._isPullUp&&this._htWElement.pullUp._isReady_&&this._pullUploading(this._htWElement.pullUp,!0),this.fireEvent("touchEnd",a)||a.stop()},_onBeforePosition:function(a){this.fireEvent("beforePosition",a)||a.stop()},_onPosition:function(a){this.option("bUseScrollbar")&&(this._nScrollBarHideTimer&&(clearTimeout(this._nScrollBarHideTimer),delete this._nScrollBarHideTimer),this._setScrollBarPos("V",a.nTop),this._setScrollBarPos("H",a.nLeft)),this.fireEvent("position",a)},_onAfterScroll:function(a){if(this.option("bUseScrollbar")&&!this.option("bUseFixedScrollbar")){var b=this;this._nScrollBarHideTimer=setTimeout(function(){b._hideScrollBar("H"),b._hideScrollBar("V")},this.option("nScrollbarHideThreshold"))}this.fireEvent("afterScroll",a)},_hideScrollBar:function(a){var b=this._htWElement[a+"scrollbar"],c=a==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll;c&&b&&(this._oCore.isPositionBug&&this._oCore.bUseHighlight&&this._oCore.makeStylePos(this._htWElement[a+"scrollbarIndicator"]),b.hide(),b.css("left",b.css("left")+"px"))},_fireEventPullDown:function(){if(!this._htWElement)return;this.fireEvent("pullDown",{welElement:this._htWElement.pullDown,oScroll:this})},_fireEventPullUp:function(){if(!this._htWElement)return;this.fireEvent("pullUp",{welElement:this._htWElement.pullUp,oScroll:this})},_pullUploading:function(a,b){var c=b?this.option("fnPullUpUpdating"):this.option("fnPullDownUpdating"),d=this;this._isUpdating=!0,a._isReady_=!1,c&&setTimeout(function(){c(a),b?d._fireEventPullUp():d._fireEventPullDown()},0)},_touchMoveForUpdate:function(a){if(this._isUpdating)return;var b=this._oCore.option("nOffsetTop"),c=this._oCore.option("nOffsetBottom");a.nMaxScrollTop=this._nOrgMaxScrollTop?this._nOrgMaxScrollTop:a.nMaxScrollTop,this._isPullDown&&(this._htWElement.pullDown._isReady_?b>a.nTop&&(this._htWElement.pullDown._isReady_=!1,this.option("fnPullDownIdle")&&(this.option("fnPullDownIdle")(this._htWElement.pullDown),this._oCore.nMinScrollTop=-b)):a.nTop>b&&(this._htWElement.pullDown._isReady_=!0,this.option("fnPullDownBeforeUpdate")&&(this.option("fnPullDownBeforeUpdate")(this._htWElement.pullDown),this._oCore.nMinScrollTop=0))),this._isPullUp&&(this._htWElement.pullUp._isReady_?a.nTop>=a.nMaxScrollTop-c&&(this._htWElement.pullUp._isReady_=!1,this.option("fnPullUpIdle")&&(this.option("fnPullUpIdle")(this._htWElement.pullUp),this._oCore.nMaxScrollTop=a.nMaxScrollTop)):a.nTop<a.nMaxScrollTop-c&&(this._htWElement.pullUp._isReady_=!0,this.option("fnPullUpBeforeUpdate")&&(this.option("fnPullUpBeforeUpdate")(this._htWElement.pullUp),this._nOrgMaxScrollTop=a.nMaxScrollTop,this._oCore.nMaxScrollTop=a.nMaxScrollTop-c)))},isMoving:function(){return this._oCore.isMoving()},_detachEvent:function(){this._oCore.detachAll(),this.option("bAutoResize")&&jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_createScroll:function(a){if(a==="H"?!this._oCore.bUseHScroll:!this._oCore.bUseVScroll)return;var b=this._htWElement[a+"scrollbar"],c=this._htWElement[a+"scrollbarIndicator"],d=this._htWElement.wrapper;b&&(d.remove(b),this._htWElement[a+"scrollbar"]=this._htWElement[a+"scrollbarIndicator"]=null),b=this._createScrollbar(a),c=this._createScrollbarIndicator(a),this._htWElement[a+"scrollbar"]=b,this._htWElement[a+"scrollbarIndicator"]=c,b.append(c),d.append(b),this._refreshScroll(a)},_refreshScroll:function(a){if(a==="H"){if(!this._oCore.bUseHScroll||this._oCore.nWrapperW==this._oCore.nScrollW)return}else if(!this._oCore.bUseVScroll||this._oCore.nWrapperH==this._oCore.nScrollH)return;this._htWElement[a+"scrollbar"]||this._createScroll(a);var b=this._htWElement[a+"scrollbar"],c=this._htWElement[a+"scrollbarIndicator"],d=0;a==="H"?(d=Math.max(Math.round(Math.pow(this._oCore.nWrapperW,2)/this._oCore.nScrollW),8),this._nPropHScroll=(this._oCore.nWrapperW-d)/this._oCore.nMaxScrollLeft,b.width(this._oCore.nWrapperW),c.width(isNaN(d)?0:d)):(d=Math.max(Math.round(Math.pow(this._oCore.nWrapperH,2)/this._oCore.nScrollH),8),this._nPropVScroll=(this._oCore.nWrapperH-d)/this._oCore.nMaxScrollTop,b.height(this._oCore.nWrapperH),c.height(isNaN(d)?0:d))},_createScrollbar:function(a){var b=jindo.$Element("<div>");return b.css({position:"absolute",zIndex:100,bottom:a==="H"?"1px":(this._oCore.bUseHScroll?"7":"2")+"px",right:a==="H"?(this._oCore.bUseVScroll?"7":"2")+"px":"1px",pointerEvents:"none"}),this.option("bUseFixedScrollbar")?b.show():b.hide(),a==="H"?b.css({height:"5px",left:"2px"}):b.css({width:"5px",top:"2px"}),b},_createScrollbarIndicator:function(a){var b=jindo.$Element("<div>").css({position:"absolute",zIndex:100,border:this.option("sScrollbarBorder"),pointerEvents:"none",left:0,top:0,"background-color":this.option("sScrollbarColor")});return this._oCore.isIos&&this.option("bUseScrollBarRadius")&&b.css("-"+this._oCore.sCssPrefix+"-border-radius","12px"),(this._oCore.option("bUseTranslate")||this._oCore.option("bUseCss3d"))&&b.css("-"+this._oCore.sCssPrefix+"-transition-property","-"+this._oCore.sCssPrefix+"-transform").css("-"+this._oCore.sCssPrefix+"-transform","translate"+this._oCore.sTransOpen+"0,0"+this._oCore.sTransEnd),this._oCore.option("bUseTimingFunction")&&b.css("-"+this._oCore.sCssPrefix+"-transition-timing-function","cubic-bezier(0.33,0.66,0.66,1)"),a==="H"?b.height(5):b.width(5),b},_setScrollBarPos:function(a,b){if(a==="H"?!this._oCore.bUseHScroll:!this._oCore.bUseVScroll)return;var c=this._htWElement[a+"scrollbarIndicator"],d=this._htWElement[a+"scrollbar"];b=this["_nProp"+a+"Scroll"]*b,!this.option("bUseFixedScrollbar")&&!d.visible()&&d.show();if(c)if(this._oCore.option("bUseTranslate")){if(this._oCore.isPositionBug&&this._oCore.bUseHighlight){var e=parseInt(a==="H"?c.css("left"):c.css("top"),10);b-=isNaN(e)?0:e}c.css("-"+this._oCore.sCssPrefix+"-transform","translate"+this._oCore.sTranOpen+(a==="H"?b+"px,0":"0,"+b+"px")+this._oCore.sTranEnd)}else a==="H"?c.css("left",b+"px"):c.css("top",b+"px")},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._oCore.destroy(),delete this._oCore,this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.IndexScroll=jindo.$Class({$init:function(a,b){},_initVar:function(){this.$super._initVar(),this._aIndexInfo=null,this._bUseIndex=!0,(jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad)&&parseInt(jindo.m.getDeviceInfo().version,10)<5?this._sEvent="click":this._sEvent="touchstart"},_setWrapperElement:function(a){this.$super._setWrapperElement(a),this._createFixedIndex(),this._createIndexView()},_refreshIndexInfo:function(){var a=this._oCore._htWElement.scroller.queryAll("."+this.option("sClassPrefix")+"index"),b=[],c=this._htWElement.wrapper.offset().top;for(var d=0,e=a.length;d<e;d++)b.push(this._getIndexInfo(jindo.$Element(a[d]),c));for(d=0,e=b.length-1;d<e;d++)b[d].nNextTop=b[d+1].nTop,b[d].nLast=b[d+1].nTop-b[d].nHeight;this._aIndexInfo=b,this.option("bUseIndexView")&&this._refreshIndexView()},_createIndexView:function(){var a=this.option("sClassPrefix")+"_indexview__";this._htWElement.indexview=jindo.$Element(a),this._htWElement.indexview||(this._htWElement.indexview=jindo.$Element("<ul id='"+a+"' class='"+this.option("sClassPrefix")+"indexview' style='position:absolute;z-index:2;-"+jindo.m.getCssPrefix()+"-tap-highlight-color:rgba(0,0,0,0);'>"),this._htWElement.indexview.appendTo(document.body))},showIndexView:function(){this.option("bUseIndexView")&&this._htWElement.indexview&&this._htWElement.indexview.show()},hideIndexView:function(){this.option("bUseIndexView")&&this._htWElement.indexview&&this._htWElement.indexview.hide()},_refreshIndexView:function(){var a=this._htWElement.wrapper.offset(),b,c,d,e,f="";for(var g=0,h=this._aIndexInfo.length;g<h;g++)c=this._aIndexInfo[g].wel,b=c.attr("data-text")?c.attr("data-text"):c.text(),f+="<li class='"+this.option("sClassPrefix")+"indexview_item' data-index='"+g+"'>"+b+"</li>";this._htWElement.indexview.html(f),d=a.top+this._htWElement.wrapper.height()/2,e=a.left+this._htWElement.wrapper.width(),this._htWElement.indexview.css({top:d-this._htWElement.indexview.height()/2+"px",left:e-this._htWElement.indexview.width()-10+"px"})},_attachEvent:function(){this.$super._attachEvent(),this.option("bUseIndexView")&&(this._htEvent.indexview=jindo.$Fn(this._onIndexView,this).attach(this._htWElement.indexview,this._sEvent))},_detachEvent:function(){this.option("bUseIndexView")&&this._htEvent.indexview.detach(this._htWElement.indexview,this._sEvent)},_onIndexView:function(a){if(a.element.tagName=="LI"){var b=jindo.$Element(a.element),c=b.attr("data-index");this.scrollTo(0,this._aIndexInfo[c].nTop)}},_onPosition:function(a){this._bUseIndex&&this._setPosFixedIndex(-a.nTop),this.$super._onPosition(a)},_getIndexInfo:function(a,b){var c={};return c.wel=a,c.nTop=a.offset().top-b,c.nHeight=a.height(),c.nBottom=c.nTop+c.nHeight,c},_setPosFixedIndex:function(a){var b=this._getCurrentIdx(a),c=this._aIndexInfo[b],d;b==-1?(this._htWElement.index_top.hide(),this._htWElement.index_bottom.hide()):c.nLast&&c.nLast<=a&&a<c.nNextTop?(d=c.nLast-a,this._htWElement.index_top.html(c.wel.outerHTML()).css("top",d+"px"),this._htWElement.index_bottom.html(this._aIndexInfo[b+1].wel.outerHTML()).css("top",d+c.nHeight+"px").show()):(this._htWElement.index_top.html(c.wel.outerHTML()).css("top","0px").show(),this._htWElement.index_bottom.hide())},hideIndex:function(){this._bUseIndex=!1,this._htWElement.index_top.hide(),this._htWElement.index_bottom.hide()},showIndex:function(){this._bUseIndex=!0,this._setPosFixedIndex(this._oCore._nTop),this._htWElement.index_top.show()},_getCurrentIdx:function(a){for(var b=0,c=this._aIndexInfo.length;b<c;b++)if(this._aIndexInfo[b].nTop>a)break;return b-1},_createFixedIndex:function(){var a="position:absolute;width:100%;top:0;z-index:1; display:none";this._htWElement.index_top=jindo.$Element(this._htWElement.wrapper.query("._scroller_index_scroll_top_")),this._htWElement.index_top||(this._htWElement.index_top=jindo.$Element("<div style='"+a+"' class='_scroller_index_scroll_top_'></div>"),this._htWElement.wrapper.append(this._htWElement.index_top)),this._htWElement.index_bottom=jindo.$Element(this._htWElement.wrapper.query("._scroller_index_scroll_bottom_")),this._htWElement.index_bottom||(this._htWElement.index_bottom=jindo.$Element("<div style='"+a+"' class='_scroller_index_scroll_bottom_'></div>"),this._htWElement.wrapper.append(this._htWElement.index_bottom))},refresh:function(){this.option("bUsePullDown")&&this.option("bUsePullDown",!1),this.option("bUsePullUp")&&this.option("bUsePullUp",!1),this.option("bUseHScroll")&&this.option("bUseHScroll",!1),this.option("bUseCss3d",!1),this.$super.refresh(),this._refreshIndexInfo()}}).extend(jindo.m.Scroll),jindo.m.LayerManager=jindo.$Class({$init:function(a,b){var c=jindo.m.getDeviceInfo();this.option({bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._aLink=[],this._oTouch=null},_setWrapperElement:function(a){this._htWElement={},this.setLayer(a)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},setLayer:function(a){return a=typeof a=="string"?jindo.$(a):a,this._htWElement.element=jindo.$Element(a),this._htWElement.element.css("position","absolute"),this},getVisible:function(){return this._htWElement.element.visible()},getLayer:function(){return this._htWElement.element.$value()},getLinks:function(){return this._aLink},link:function(a){if(arguments.length>1){for(var b=0,c=arguments.length;b<c;b++)this.link(arguments[b]);return this}return this._find(a)!=-1?this:(this._aLink.push(a),this)},unlink:function(a){if(arguments.length>1){for(var b=0,c=arguments.length;b<c;b++)this.unlink(arguments[b]);return this}var d=this._find(a);return d>-1&&this._aLink.splice(d,1),this},_check:function(a){var b=jindo.$Element(a);for(var c=0,d,e;d=this._aLink[c];c++){e=jindo.$Element(d);if(e){d=e.$value();if(d&&(a==d||b.isChildOf(d)))return!0}}return!1},_find:function(a){for(var b=0,c;c=this._aLink[b];b++)if(c==a)return b;return-1},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventShow:function(){this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventBeforeHide:function(a){return this.fireEvent("beforeHide",{elTarget:a,elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventHide:function(a){this.fireEvent("hide",{elTarget:a,elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},show:function(){return this.getVisible()||this._fireEventBeforeShow()&&(this._htWElement.element.show(),this._fireEventShow()),this},hide:function(a){return this.getVisible()&&this._fireEventBeforeHide(a)&&(this._htWElement.element.hide(),this._fireEventHide(a)),this},toggle:function(){return this.getVisible()?this.hide():this.show(),this},_onEvent:function(a){var b=a.element;if(this.getVisible()){if(this._check(b))this.fireEvent("ignore",{elTarget:b});else return this.hide(b),!0;a.stop()}},_attachEvent:function(){var a=this;this._oTouch=(new jindo.m.Touch(document)).attach("touchEnd",function(b){b.sMoveType===jindo.m.MOVETYPE[3]&&a._onEvent(b)})},_detachEvent:function(){this._oTouch&&this._oTouch.detachAll("touchEnd")},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,delete this._aLink,delete this._oTouch}}).extend(jindo.m.UIComponent),jindo.m.Loading=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,nWidth:31,nHeight:31,sDefaultForeground:"black",sDefaultBackground:"transparent",sLoadingText:"로딩중입니다",bUseFoggy:a?!1:!0,sFoggyColor:"gray",nFoggyOpacity:.3}),this.option(b||{}),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},$static:{DELAY:["0","-.9167s","-.833s","-.75s","-.667s","-.5833s","-.5s","-.41667s","-.333s","-.25s","-.1667s","-.0833s"],ANIMATION_STYLE:"_loading_animation_sytle_",CONTAINER_CLASS:"_loading_container_class_"},_setWrapperElement:function(a){this._htWElement={},this._htWElement.base=jindo.$Element(jindo.$(a)?jindo.$(a):document.body),this._createLoading()},_createLoading:function(){this._createLoadingStyle(),this._htWElement.container=jindo.$Element("<div style='zIndex: 1000'>").addClass(jindo.m.Loading.CONTAINER_CLASS),this.option("bUseFoggy")&&this._createFoggy().appendTo(this._htWElement.container),this._createLoadingElement(),this._htWElement.loadingbox=jindo.$Element("<div>").css({zIndex:1e3,position:"absolute"}).append(this._htWElement.loading),this.option("sLoadingText")&&this._createLoadingText().appendTo(this._htWElement.loadingbox),this._htWElement.loadingbox.appendTo(this._htWElement.container)},_createFoggy:function(){return this._htWElement.foggy=jindo.$Element("<div>").css({position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:"100%",height:"100%",left:"0px",top:"0px",zIndex:1e3})},_setPosition:function(){var a=this._htWElement.loadingbox.width(),b=this._htWElement.loadingbox.height(),c;this._isBody()?(c=jindo.$Document().scrollPosition(),this._htWElement.container.css({left:c.left+"px",top:c.top+"px",width:window.innerWidth+"px",height:window.innerHeight+"px"})):(this._htWElement.container.width()<a&&this._htWElement.container.width(a),this._htWElement.container.height()<b&&this._htWElement.container.height(b)),this._htWElement.loadingbox.css({top:"50%",left:"50%","margin-left":-parseInt(a/2,10)+"px","margin-top":-parseInt(b/2,10)+"px"})},_isBody:function(){return this._htWElement.base.isEqual(document.body)},show:function(){if(this.fireEvent("beforeShow")){var a=this._htWElement.loading.queryAll("span"),b=jindo.m.getCssPrefix();for(var c=0;c<a.length;c++)jindo.$Element(a[c]).css(b+"Animation","loadingfade 1s linear "+jindo.m.Loading.DELAY[c]+" infinite");this._attachEvent(),this._isBody()&&this._htWElement.container.css({width:window.innerWidth+"px",height:window.innerHeight+"px"}),this._htWElement.container.show(),this._setPosition(),this.fireEvent("show")}},hide:function(){if(this.fireEvent("beforeHide")){var a=this._htWElement.loading.queryAll("span"),b=jindo.m.getCssPrefix();for(var c=0;c<a.length;c++)jindo.$Element(a[c]).css(b+"Animation","");this._detachEvent(),this._htWElement.container.hide(),this.fireEvent("hide")}},_onPrevent:function(a){return a.stop(jindo.$Event.CANCEL_ALL),!1},_onRotate:function(a){if(this._htWElement.container.visible())if(jindo.m.getDeviceInfo().andorid)this._setPosition();else{this._htWElement.container.hide();var b=this;setTimeout(function(){b._htWElement.container.show(),b._setPosition()},0)}},_attachEvent:function(){this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),this._htEvent.prevent=jindo.$Fn(this._onPrevent,this).attach(this._htWElement.container,"touchstart").attach(this._htWElement.container,"touchmove"),jindo.m.bindRotate(this._htEvent.rotate)},_detachEvent:function(){this._htEvent.prevent&&this._htEvent.prevent.detach(this._htWElement.container,"touchmove").detach(this._htWElement.container,"touchstart"),jindo.m.unbindRotate(this._htEvent.rotate)},_createLoadingStyle:function(){if(!jindo.$(jindo.m.Loading.ANIMATION_STYLE)){var a=document.createElement("style");if(a){a.setAttribute("type","text/css"),a.setAttribute("id",jindo.m.Loading.ANIMATION_STYLE);var b="@-"+jindo.m.getCssPrefix()+"-keyframes loadingfade{from{opacity:1}to{opacity:0}}",c=document.createTextNode(b);a.styleSheet?a.styleSheet.cssText=c.nodeValue:a.appendChild(c);var d=document.getElementsByTagName("head")[0];d&&d.appendChild(a)}}},_createLoadingElement:function(){var a=jindo.m.getCssPrefix(),b=[];for(var c=0;c<12;c++)b.push("<span style='display:block;position:absolute;top:40%;left:48%;width:11%;height:24%;border-radius:6px;background:"),b.push(this.option("sDefaultForeground")),b.push("; opacity:0; -"),b.push(a),b.push("-transform:rotate("),b.push(c*30),b.push("deg) translate(0,-140%);'></span>");this._htWElement.loading=jindo.$Element("<div>").css({position:"relative",margin:"0 auto"}).html(b.join(""))},refresh:function(){this._htWElement.loading.css({width:this.option("nWidth")+"px",height:this.option("nHeight")+"px",background:this.option("sDefaultBackground")}),this._htWElement.text&&this._htWElement.text.html(this.option("sLoadingText"))},_createLoadingText:function(){return this._htWElement.text=jindo.$Element("<div>").css({margin:"2px 0 0 0",bottom:0,width:"100%","text-align":"center"})},_onActivate:function(){this._htEvent={},this._htWElement.container.appendTo(this._htWElement.base),this._isBody()?this._htWElement.container.css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).hide():this._htWElement.container.css({position:"relative"}).hide(),this.refresh()},_onDeactivate:function(){this._detachEvent(),this._htWElement.container.leave()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.MoreContentButton=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"more_",nTotalItem:10,nShowMaxItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0,htAjax:{}}),this.option(b||{}),this.option("nItem",this.option("nShowMaxItem")),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&(this.activate(),this._nCurrentPage=this.option("nPage"),this.updateInfo())},_initVar:function(){var a={sApi:null,htAjaxOption:{type:"xhr"},htQuery:{},sStart:"start",sDisplay:"display"},b=this.option("htAjax");if(!b){this.option("htAjax",a);return}for(var c in a)typeof b[c]=="undefined"&&(b[c]=a[c]);for(c in a.htAjaxOption)typeof b.htAjaxOption[c]=="undefined"&&(b.htAjaxOption[c]=a.htAjaxOption[c]);for(c in a.htQuery)typeof b.htQuery[c]=="undefined"&&(b.htQuery[c]=a.htQuery[c]);!b.sApi||(this.oAjax=new jindo.$Ajax(b.sApi,b.htAjaxOption))},_setWrapperElement:function(a){this._htWElement={};var b="."+this.option("sClassPrefix");this._htWElement.elBase=jindo.$Element(a),this._htWElement.elMoreButton=jindo.$Element(this._htWElement.elBase.query(b+"button")),this._htWElement.elTop=jindo.$Element(this._htWElement.elBase.query(b+"top")),this._htWElement.elLoading=jindo.$Element(this._htWElement.elBase.query(b+"loading")),this._htWElement.elMoreCnt=jindo.$Element(this._htWElement.elBase.query(b+"moreCnt")),this._htWElement.elTotal=jindo.$Element(this._htWElement.elBase.query(b+"total")),this._htWElement.elCurrent=jindo.$Element(this._htWElement.elBase.query(b+"current")),this._htWElement.elRemainder=jindo.$Element(this._htWElement.elBase.query(b+"remainder")),this._htWElement.elLast=jindo.$Element(this._htWElement.elBase.query(b+"last")),!this._htWElement.elLast||(this._htWElement.elLastTotal=jindo.$Element(this._htWElement.elLast.query(b+"total")),this._htWElement.elLastCurrent=jindo.$Element(this._htWElement.elLast.query(b+"current")),this._htWElement.elLastRemainder=jindo.$Element(this._htWElement.elLast.query(b+"remainder")))},_onClickMore:function(a){a.stop(jindo.$Event.CANCEL_DEFAULT),this.hasNextPage()&&this.more()},_onClickTop:function(a){a.stop(jindo.$Event.CANCEL_DEFAULT),this.fireEvent("goTop",{element:a.element})},more:function(a){typeof a=="undefined"&&(a=!0);var b=this._nCurrentPage+1,c=this.getCurrentPage();if(a&&!this.fireEvent("beforeMore",{nPage:b,nCurrentPage:c}))return;var d=this.getPageItemIndex(b);if(!d){this.updateInfo();return}this.showLoadingImg(),this.option("htAjax").sApi?this._callAjax(b,!0,a):(this._move(b),a&&this.fireEvent("more",{nPage:b,nStartIndex:d.nStart,nEndIndex:d.nEnd}),this.updateInfo())},movePageTo:function(a,b){typeof b=="undefined"&&(b=!0);var c=this.getCurrentPage();if(b&&!this.fireEvent("beforeMovePage",{nPage:a,nCurrentPage:c}))return;var d=this.getPageItemIndex(a);if(!d){this.updateInfo();return}this.showLoadingImg(),this.option("htAjax").sApi?this._callAjax(a,!1,b):(this._move(a),b&&this.fireEvent("movePage",{nPage:a,nBeforePage:c,nStartIndex:0,nEndIndex:d.nEnd}),this.updateInfo())},_move:function(a){var b=this._convertToAvailPage(a);b!=this._nCurrentPage&&(this._nCurrentPage=b)},updateInfo:function(){var a=this.getCurrentPage(),b=this.getPageItemIndex(a);this.hideLoadingImg(),a>=this.getTotalPages()?(this._htWElement.elBase&&this._htWElement.elBase.addClass("u_pg_end"),this._htWElement.elMoreButton&&this._htWElement.elMoreButton.hide(),this._htWElement.elLast&&this._htWElement.elLast.show("block")):(this._htWElement.elBase&&this._htWElement.elBase.removeClass("u_pg_end"),this._htWElement.elMoreButton&&this._htWElement.elMoreButton.show("block"),this._htWElement.elLast&&this._htWElement.elLast.hide());if(!!this._htWElement.elCurrent&&!!b){var c=b.nEnd+1;this._htWElement.elCurrent.text(this._setNumberFormat(c))}typeof this._htWElement.elLastCurrent!="undefined"&&this._htWElement.elLastCurrent&&!!b&&this._htWElement.elLastCurrent.text(this._setNumberFormat(b.nEnd+1)),!!this._htWElement.elRemainder&&!!b&&this._htWElement.elRemainder.text(this._setNumberFormat(parseInt(this.option("nTotalItem"),10)-(b.nEnd+1))),!!this._htWElement.elLastRemainder&&!!b&&this._htWElement.elLastRemainder.text(this._setNumberFormat(parseInt(this.option("nTotalItem"),10)-(b.nEnd+1))),!this._htWElement.elTotal||this._htWElement.elTotal.text(this._setNumberFormat(this.option("nTotalItem"))),typeof this._htWElement.elLastTotal!="undefined"&&this._htWElement.elLastTotal&&this._htWElement.elLastTotal.text(this._setNumberFormat(this.option("nTotalItem")));if(!!this._htWElement.elMoreCnt&&!!b){var d=Math.min(this.getItemPerPage(),this.getItemCount()-b.nEnd-1);this._htWElement.elMoreCnt.text(this._setNumberFormat(d))}},_callAjax:function(a,b,c){var d=this;this.oAjax.option("onload",null),this.oAjax.option("onload",function(e){d._onAjaxResponse(e,a,b,c)}),this.oAjax.request(this._getQueryString(a,b))},_onAjaxResponse:function(a,b,c,d){if(d){this._move(b);var e=c?"more":"movePage",f=this.getPageItemIndex(b);this.fireEvent(e,{oResponse:a,nPage:b,nStartIndex:c?f.nStart:0,nEndIndex:f.nEnd})}this.updateInfo()},_getQueryString:function(a,b){typeof b=="undefined"&&(b=!0);var c=this.option("htAjax").htQuery||{},d=this.getPageItemIndex(a);return c[this.option("htAjax").sStart]=b?d.nStart:0,c[this.option("htAjax").sDisplay]=Math.min(this.getItemPerPage(),this.getShowMaxItem()-d.nStart),c},_setNumberFormat:function(a){a=a.toString();var b="",c=0,d=a.length;for(var e=d;e>=0;e--){var f=a.charAt(e);if(e>d){b=f+b;continue}/[0-9]/.test(f)&&(c>=3&&(b=","+b,c=0),c++,b=f+b)}return b},showLoadingImg:function(){!this._htWElement.elLoading||this._htWElement.elLoading.show()},hideLoadingImg:function(){!this._htWElement.elLoading||this._htWElement.elLoading.hide()},reset:function(a){typeof a=="undefined"&&(a=this.option("nShowMaxItem")),this.setShowMaxItem(a),this.movePageTo(1,!1)},getTotalItem:function(){return this.option("nTotalItem")},setTotalItem:function(a){this.option("nTotalItem",a)},getShowMaxItem:function(){return this.option("nShowMaxItem")},setShowMaxItem:function(a){this.option("nShowMaxItem",a),this.option("nItem",a)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},!this._htWElement.elMoreButton||(this._htEvent.click_More={ref:jindo.$Fn(this._onClickMore,this).attach(this._htWElement.elMoreButton,"click"),el:this._htWElement.elMoreButton.$value()}),!this._htWElement.elTop||(this._htEvent.click_Top={ref:jindo.$Fn(this._onClickTop,this).attach(this._htWElement.elTop,"click"),el:this._htWElement.elTop.$value()})},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(0,a.indexOf("_")))}this._htEvent=null},header:function(a,b){if(this.oAjax)return this.oAjax.header(a,b)},destroy:function(){this._detachEvent();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.CorePagination),jindo.m.PageLayoutUI=jindo.$Class({$init:function(a){this._initVar(a),this._showDefaultPage(),this.showLoading(),this._checkLayout(),this._rebuildLayout(),a&&a.fnDomReady&&typeof a.fnDomReady=="function"&&a.fnDomReady({welRoot:this.getRoot()}),this._initScrollManager(),this._bMultiPage?this._initMultiPage(this._aPages,this._nDefaultIndex):this._initPage(this._aPages[0],0),this._bUseFlicking||(this._bMultiPage?this._setMultiPagePosition():this._bMultiContent&&this._setMultiContentPosition()),this._bUseFlicking&&this._initFlicking(this._welFlickView.$value()),this._attachEvent(),this._bUseAjaxHistory&&this._initAjaxHistory()},_initVar:function(a){a=a||{},this._htEvent={},this._nCurrentIndex=a.nDefaultIndex||0,this._htScrollOption=a.htScrollOption||{},this._htFlickingOption=a.htFlickingOption||{},this._htFlickingOption.sClassPrefix=this._htFlickingOption.sClassPrefix||"flick-",this._htFlickingOption.sContentClass=this._htFlickingOption.sContentClass||"ct",this._htHistoryOption=a.htHistoryOption||{},this._bUseLoading=a.bUseLoading||!1,this._htLoadingOption=a.htLoadingOption||{},this._bUseFullScreen=a.bUseFullScreen||!1,this._oTimeout=null,this._oClientSize=jindo.m._clientSize(),this._bUseFullScreen&&(this._oClientSize.height+=jindo.m._getAdressSize()),this._welRoot=a.vBaseElement?jindo.$Element(a.vBaseElement):jindo.$Element(document.body),this._bUseRebuild=this._welRoot.attr("markup")&&this._welRoot.attr("markup").toUpperCase()=="DETAILED"?!1:!0,this._aPages=jindo.$ElementList(this._welRoot.queryAll(".jmc-page")).$value(),this._nPageCount=this._aPages.length,this._aContents=jindo.$ElementList(this._welRoot.queryAll(".jmc-content")).$value(),this._nContentCount=this._aContents.length,this._bMultiPage=this._nPageCount>1?!0:!1,this._bMultiContent=this._nContentCount>1?!0:!1},_showDefaultPage:function(){this._bMultiPage&&this._aPages[this._nCurrentIndex].show(),this._bMultiContent&&this._aPages[0].show()},_checkLayout:function(){var a=this._welRoot.attr("flicking")&&this._welRoot.attr("flicking").toUpperCase()=="YES"?!0:!1;this._bMultiPage&&a?this._bUseFlicking=!0:!this._bMultiPage&&this._nContentCount>1&&a?this._bUseFlicking=!0:this._bUseFlicking=!1,this._bMultiPage||this._bMultiContent?this._bUseAjaxHistory=!0:this._bUseAjaxHistory=!1},_rebuildLayout:function(){if(this._bUseRebuild){var a=document.createDocumentFragment();if(this._bMultiPage&&this._bUseFlicking){this._welFlickView=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'view"></div>');var b=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'container"></div>'),c;this._welFlickView.appendTo(a),b.appendTo(this._welFlickView.$value())}for(var d=0;d<this._nPageCount;d++){var e=this._rebuildPage(this._aPages[d]);this._aPages[d].append(e),this._bMultiPage&&this._bUseFlicking&&(c=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+this._htFlickingOption.sContentClass+'"></div>'),c.appendTo(b.$value()),this._aPages[d].appendTo(c.$value())),this._aPages[d].show()}this._welRoot.append(a),delete a}else this._bUseFlicking&&(this._welFlickView=jindo.$Element(this._welRoot.query("."+this._htFlickingOption.sClassPrefix+"view"))),!this._bMultiPage&&this._bMultiContent&&(this._welContentView=jindo.$Element(this._welRoot.query(".jmc-content-view")))},_rebuildPage:function(a){var b=document.createDocumentFragment(),c=jindo.$Element('<div class="scroll-wrapper"></div>'),d=jindo.$Element('<div class="scroller"></div>'),e=jindo.$Element(a.query(".jmc-header")),f=e&&e.attr("position")=="fixed"?!0:!1;f?e&&e.appendTo(b):e&&e.appendTo(d.$value());if(!this._bMultiPage&&this._bMultiContent){var g=jindo.$ElementList(a.queryAll(".jmc-content")).$value(),h=this._rebuildFlickingContent(g);b.appendChild(h)}else{var i=jindo.$Element(a.query(".jmc-content"));c.appendTo(b),d.appendTo(c.$value()),i.appendTo(d.$value())}var j=jindo.$Element(a.query(".jmc-footer")),k=j&&j.attr("position")=="fixed"?!0:!1;return k?j&&j.appendTo(b):j&&j.appendTo(d.$value()),b},_rebuildFlickingContent:function(a){var b=document.createDocumentFragment();if(this._bUseFlicking){this._welFlickView=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'view"></div>');var c=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'container"></div>');this._welFlickView.appendTo(b),c.appendTo(this._welFlickView.$value())}else this._welContentView=jindo.$Element('<div class="jmc-content-view"></div>'),this._welContentView.appendTo(b);var d,e,f,g;for(var h=0,i=a.length;h<i;h++)f=jindo.$Element('<div class="scroll-wrapper"></div>'),g=jindo.$Element('<div class="scroller"></div>'),this._bUseFlicking?(d=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+this._htFlickingOption.sContentClass+'"></div>'),d.appendTo(c.$value()),f.appendTo(d.$value())):(e=jindo.$Element('<div class="jmc-content-ct" style="background-color:#fff;"></div>'),e.appendTo(this._welContentView.$value()),f.appendTo(e.$value())),g.appendTo(f.$value()),a[h].appendTo(g.$value());return b},_attachEvent:function(){this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEvent.load=jindo.$Fn(this._onLoad,this).attach(window,"load")},_onLoad:function(){var a=jindo.m._clientSize(this._bUseFullScreen);this._bUseFullScreen&&(a.height+=jindo.m._getAdressSize()),this._oClientSize.height!=a.height||this._oClientSize.width!=a.width?this._onResize():this.hideLoading(),this._hideAddress()},_onResize:function(){this._oTimeout&&(clearTimeout(this._oTimeout),this._oTimeout=null),this._oClientSize=jindo.m._clientSize(this._bUseFullScreen),this._bUseFullScreen&&window.pageYOffset===0&&(this._oClientSize.height+=jindo.m._getAdressSize()),this._bMultiPage?this._bUseFlicking?(this._resizeFlicking(),this._resizePage(),this._resizeScroll()):(this._resizePage(),this._resizeScroll()):this._bMultiContent?this._bUseFlicking?(this._resizePage(),this._resizeFlicking(),this._resizeScroll()):(this._resizePage(),this._resizeContentView(),this._resizeScroll()):(this._resizePage(),this._resizeScroll()),this.hideLoading(),this._hideAddress()},_hideAddress:function(){this._bUseFullScreen&&setTimeout(function(){window.scrollTo(0,1)},500)},_resizePage:function(){for(var a=0;a<this.getPageCount();a++)this._aPages[a].oPage.resize(this._oClientSize)},_resizeContentView:function(){var a=this._getFlickSize();this._welContentView.css({position:"relative",width:a.width+"px",height:a.height+"px"})},_resizeFlicking:function(){if(!this._bUseFlicking)return!1;var a=this._getFlickSize();this._oFlicking.resize({nFlickWidth:a.width,nFlickHeight:a.height})},_resizeScroll:function(){var a=[];for(var b=0;b<this.getPageCount();b++)a.push({nScrollWidth:this._aPages[b].oPage.getNoneFixedWidth(),nScrollHeight:this._aPages[b].oPage.getNoneFixedHeight()});this._oScroll.resize(a)},_initLoading:function(){if(!this._bUseLoading)return!1;this._oLoading=new jindo.m.Loading(null,this._htLoadingOption),this._oLoading.show()},_initScrollManager:function(){this._oScroll=new jindo.m.PageLayoutUI.ScrollManager({oPageLayout:this,htOption:this._htScrollOption})},addScroll:function(a){this._oScroll.addScroll(a)},_initMultiPage:function(a,b){for(var c=0;c<this.getPageCount();c++)this._initPage(a[c],c)},_setMultiContentPosition:function(){if(!this._bMultiContent)return!1;this._resizeContentView(),this._aContentCT=jindo.$ElementList(this._welRoot.queryAll(".jmc-content-ct")).$value();for(var a=0;a<this.getContentCount();a++)nZIndex=a===this._nCurrentIndex?10:1,this._aContentCT[a].css({top:"0px",left:"0px",position:"absolute",overflow:"hidden",zIndex:nZIndex})},_setMultiPagePosition:function(){if(!this._bMultiPage)return!1;var a;for(var b=0;b<this.getPageCount();b++)a=b===this._nCurrentIndex?10:1,this._aPages[b].welPage.css({top:"0px",left:"0px",position:"absolute",overflow:"hidden",zIndex:a})},_initPage:function(a,b){this._aPages[b]={welPage:a,oPage:new jindo.m.PageLayoutUI.Page(a.$value(),{oPageLayout:this,nIndex:b,nCurrentIndex:this._nCurrentIndex,htPageSize:this._oClientSize})}},_initFlicking:function(a){var b=this._getFlickSize();this._oFlicking=jindo.m.PageLayoutUI.Flicking,this._oFlicking.init(a,{oPageLayout:this,nDefaultIndex:this._nCurrentIndex,nFlickWidth:b.width,nFlickHeight:b.height,htOption:this._htFlickingOption})},_initAjaxHistory:function(){this._oAjaxHistory=jindo.m.PageLayoutUI.AjaxHistory,this._oAjaxHistory.init({oPageLayout:this,htOption:this._htHistoryOption})},_getFlickSize:function(){var a={};return this._bMultiPage?a=this._oClientSize:(a.width=this._aPages[0].oPage.getNoneFixedWidth(),a.height=this._aPages[0].oPage.getNoneFixedHeight()),a},getCurrentIndex:function(){return this._bUseFlicking&&(this._nCurrentIndex=this._oFlicking.getCurrentIndex()),this._nCurrentIndex},getPageCount:function(){return this._nPageCount},getContentCount:function(){var a;return this._bMultiPage?a=this.getPageCount():a=this._oScroll.getScrollCount(),a},getContentCT:function(a){return this._aContentCT[a]},getRoot:function(){var a;return this._bMultiPage&&this._bUseFlicking?a=this._welFlickView:a=this._welRoot,a},getPage:function(a){var b;if(typeof a=="undefined"){b=[];for(var c=0;c<this.getContentCount();c++)b.push(this._getPage(c))}else b=this._getPage(a);return b},_getPage:function(a){var b;this._bMultiPage?b=a:b=0;var c=this._aPages[b].oPage,d={welHeader:jindo.$Element(c.getHeader()),welContent:this._oScroll.getScrollContent(a),welFooter:jindo.$Element(c.getFooter())};return d},refresh:function(){this._onResize()},addHistory:function(){this._oAjaxHistory.addHistory()},changeHistory:function(a){this._bUseFlicking?this._oFlicking.moveTo(a):this.moveTo(a)},moveTo:function(a){if(typeof a=="undefined")return!1;if(this._bUseFlicking)this._oFlicking.moveTo(a);else{if(!this.onBeforeMovePage({nContentsIndex:this.getCurrentIndex(),nContentsNextIndex:a}))return;this.show(a),this.onAfterMovePage({nContentsIndex:a})}},show:function(a){if(typeof a=="undefined")return!1;this.hide(this.getCurrentIndex()),this._bMultiPage?this._aPages[a].oPage.show():this._bMultiContent&&this._aPages[0].oPage.showContentView(a),this._nCurrentIndex=a},hide:function(a){typeof a=="undefined"&&(a=this._nCurrentIndex),this._bMultiPage?this._aPages[a].oPage.hide():this._bMultiContent&&this._aPages[0].oPage.hideContentView(a)},showLoading:function(){if(!this._bUseLoading)return!1;this._oLoading||this._initLoading(),this._oLoading.show()},hideLoading:function(){if(!this._bUseLoading)return!1;this._oLoading.hide()},onTouchStartFlicking:function(a){return this.fireEvent("touchStart",{sType:"touchStart",element:a.element,nX:a.nX,nY:a.nY})},onBeforeMovePage:function(a){return this.fireEvent("beforeMovePage",{sType:"beforeMovePage",nCurrentPage:a.nContentsIndex,nPage:a.nContentsNextIndex,bLeft:a.bLeft})},onAfterMovePage:function(a){this._bUseAjaxHistory&&this.addHistory(),this.fireEvent("afterMovePage",{sType:"afterMovePage",nCurrentPage:a.nContentsIndex})}}).extend(jindo.m.Component),jindo.m.PageLayoutUI.Page=jindo.$Class({$init:function(a,b){this._initVar(a,b),this._setWrapperElement(),this._setFixedArea(),this._initScroll()},_initVar:function(a,b){this._welPage=jindo.$Element(a),this._oPageLayout=b.oPageLayout,this._nIndex=b.nIndex,this._htPageSize=b.htPageSize,this._htWElement={}},_setWrapperElement:function(){this._htWElement.header=jindo.$Element(this._welPage.query(".jmc-header")),this._htWElement.footer=jindo.$Element(this._welPage.query(".jmc-footer"))},_onActivate:function(){},_onDeactivate:function(){},_setFixedArea:function(){this._bHeaderFixed=this._htWElement.header&&this._htWElement["header"].attr("position")=="fixed"?!0:!1,this._bFooterFixed=this._htWElement.footer&&this._htWElement["footer"].attr("position")=="fixed"?!0:!1},_initScroll:function(){this._oPageLayout.addScroll({welBaseElement:this._welPage,nScrollWidth:this.getNoneFixedWidth(),nScrollHeight:this.getNoneFixedHeight()})},_getHeight:function(a){var b=a.$value().offsetHeight;return b+=parseInt(a.css("marginTop"),10)+parseInt(a.css("marginBottom"),10)||0,b},_getHeaderHeight:function(){var a=this._getHeight(this._htWElement.header);return a},_getFooterHeight:function(){var a=this._getHeight(this._htWElement.footer);return a},resize:function(a){this._htPageSize=a||jindo.m._clientSize()},getNoneFixedWidth:function(){var a=this._htPageSize.width;return a},getNoneFixedHeight:function(){var a=this._htPageSize.height,b;return this._bHeaderFixed?this._bFooterFixed?b=parseInt(a-this._getHeaderHeight()-this._getFooterHeight(),10):b=parseInt(a-this._getHeaderHeight(),10):this._bFooterFixed?b=parseInt(a-this._getFooterHeight(),10):b=a,b},getHeader:function(){return this._htWElement.header?this._htWElement.header.$value():null},getFooter:function(){return this._htWElement.footer?this._htWElement.footer.$value():null},showContentView:function(a){var b=this._oPageLayout.getContentCT(a);b.css({zIndex:10})},hideContentView:function(a){var b=this._oPageLayout.getContentCT(a);b.css({zIndex:1})},show:function(){this._welPage.css({zIndex:10})},hide:function(){this._welPage.css({zIndex:1})}}),jindo.m.PageLayoutUI.ScrollManager=jindo.$Class({$init:function(a){this._initVar(a)},_initVar:function(a){this._aScrolls=[],this._aScrollOptions=[],this._oPageLayout=a.oPageLayout,this._htOption=a.htOption,this._nTotalScrollCnt=0},addScroll:function(a){this._aScrollWrappers=jindo.$ElementList(a.welBaseElement.queryAll(".scroll-wrapper")).$value(),this._nTotalScrollCnt+=this._aScrollWrappers.length;var b=a.nScrollWidth,c=a.nScrollHeight,d,e,f,g,h;h=this._htOption||{},h.nWidth=b,h.nHeight=c;for(var i=0,j=this._aScrollWrappers.length;i<j;i++)d=this._aScrollWrappers[i],g=new jindo.m.Scroll(d.$value(),h),f=jindo.$Element(d.query(".jmc-content")),f.show(),g.refresh(),g.hasVScroll()||(e=jindo.$Element(d.query(".scroller")),e.css({width:b+"px",height:c-1+"px"})),this._aScrolls.push(g),h={welWrapper:d,welScroller:e,welContent:f,nWidth:b,nHeight:c},this._aScrollOptions.push(h)},getScrollCount:function(){return this._aScrolls.length},getScrollWrapper:function(a){var b;return typeof a=="undefined"?b=this._aScrollWrappers:b=this._aScrollWrappers[a],b},getScrollContent:function(a){var b;if(typeof a=="undefined"){b=[];for(var c=0,d=this._aScrollOptions.length;c<d;c++)b.push(this._aScrollOptions[a].welContent)}else b=this._aScrollOptions[a].welContent;return b},resize:function(a){var b,c,d;for(var e=0,f=this._aScrolls.length;e<f;e++)b=a[e]||a[0],c=b.nScrollWidth,d=b.nScrollHeight,this._aScrolls[e].hasVScroll()||this._aScrollOptions[e].welScroller.css({width:c+"px",height:d+"px"}),this._aScrolls[e].option({nWidth:c,nHeight:d}),this._aScrolls[e].refresh(),this._aScrollOptions[e].nWidth=c,this._aScrollOptions[e].nHeight=d}}),jindo.m.PageLayoutUI.Flicking={init:function(a,b){this._initVar(a,b),this._setFlickingArea(),b=this._htOption,b.bAutoResize=!1,b.nDefaultIndex=this._nCurrentIndex,this._oFlicking=new jindo.m.Flicking(this._welFlickView.$value(),b),this._oFlicking.attach({touchStart:jindo.$Fn(this._onTouchStartFlicking,this).bind(),beforeFlicking:jindo.$Fn(this._onStartFlicking,this).bind(),afterFlicking:jindo.$Fn(this._onEndFlicking,this).bind(),move:jindo.$Fn(this._onEndFlicking,this).bind()})},_initVar:function(a,b){this._welFlickView=jindo.$Element(a),this._oPageLayout=b.oPageLayout,this._nWidth=b.nFlickWidth,this._nHeight=b.nFlickHeight,this._nCurrentIndex=b.nDefaultIndex,this._htOption=b.htOption||{},this._aFlickingContents=jindo.$ElementList(this._welFlickView.queryAll("."+this._htOption.sClassPrefix+this._htOption.sContentClass)).$value(),this._aInnerContents=jindo.$ElementList(this._welFlickView.queryAll(".jmc-content")).$value()},_setFlickingArea:function(){this._welFlickView.css({width:this._nWidth+"px",height:this._nHeight+"px"});var a;for(var b=0,c=this._aFlickingContents.length;b<c;b++)a=this._aFlickingContents[b],a.css({"float":"left",width:"100%",height:"100%"})},_onTouchStartFlicking:function(a){if(this._oPageLayout.onTouchStartFlicking(a))return!0;if(a.stop)a.stop();else return!1},_onStartFlicking:function(a){if(this._oPageLayout.onBeforeMovePage(a))return!0;if(a.stop)a.stop();else return!1},_onEndFlicking:function(a){var b=a.nContentsIndex;this._oPageLayout.onAfterMovePage(a)},resize:function(a){this._nWidth=a.nFlickWidth,this._nHeight=a.nFlickHeight,this._welFlickView.css({width:this._nWidth+"px",height:this._nHeight+"px"}),this._oFlicking.refresh()},getCurrentIndex:function(){return this._oFlicking.getContentIndex()},moveTo:function(a,b){if(typeof a=="undefined")return!1;if(!this._onStartFlicking({nContentsIndex:this._oFlicking.getContentIndex(),nContentsNextIndex:a}))return;this._oFlicking.moveTo(a,b)}},jindo.m.PageLayoutUI.AjaxHistory={init:function(a){this._initVar(a),this._oAjaxHistory=new jindo.m.AjaxHistory(this._htOption),this._oAjaxHistory.attach({load:jindo.$Fn(this._onLoadHistory,this).bind(),change:jindo.$Fn(this._onChangeHistory,this).bind()}),this._oAjaxHistory.initialize()},_initVar:function(a){this._oPageLayout=a.oPageLayout,this._htOption=a.htOption},_onLoadHistory:function(a){this.addHistory(!0)},_onChangeHistory:function(a){var b=jindo.$Json(a.htHistoryData).toObject();this._oPageLayout.changeHistory(b.page)},addHistory:function(a){this._oAjaxHistory.addHistory({page:this._oPageLayout.getCurrentIndex()},a)}},jindo.m.PageNavigation=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"page_",nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0,sInfoTemplate:"{=PAGE} / {=TOTALPAGE}",htAjax:{}}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&(this.activate(),this._nCurrentPage=this.option("nPage"))},_initVar:function(){var a={sApi:null,htAjaxOption:{type:"xhr"},htQuery:{},sPage:"page",sDisplay:"display"},b=this.option("htAjax");if(!b){this.option("htAjax",a);return}for(var c in a)typeof b[c]=="undefined"&&(b[c]=a[c]);for(c in a.htAjaxOption)typeof b.htAjaxOption[c]=="undefined"&&(b.htAjaxOption[c]=a.htAjaxOption[c]);for(c in a.htQuery)typeof b.htQuery[c]=="undefined"&&(b.htQuery[c]=a.htQuery[c]);!b.sApi||(this.oAjax=new jindo.$Ajax(b.sApi,b.htAjaxOption))},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a);var b="."+this.option("sClassPrefix");this._htWElement.elBase=jindo.$Element(a),this._htWElement.elPrev=jindo.$Element(jindo.$$.getSingle(b+"prev",a)),this._htWElement.elNext=jindo.$Element(jindo.$$.getSingle(b+"next",a)),this._htWElement.elPrevOff=jindo.$Element(jindo.$$.getSingle(b+"prev-off",a)),this._htWElement.elNextOff=jindo.$Element(jindo.$$.getSingle(b+"next-off",a)),this._htWElement.elInfo=jindo.$Element(jindo.$$.getSingle(b+"info",a))},_onClickPrev:function(a){a.stop();if(!this.hasPreviousPage())return;var b=this.getCurrentPage();this.movePageTo(b-1)},_onClickNext:function(a){a.stop();if(!this.hasNextPage())return;var b=this.getCurrentPage();this.movePageTo(b+1)},movePageTo:function(a,b){typeof b=="undefined"&&(b=!0);if(b&&!this._fireEventBefore(a))return;this.option("htAjax").sApi?this._callAjax(a,b):(this._move(a),b&&this._fireEventEnd(),this.updateInfo(),this.updateNavigation())},_move:function(a){var b=this._convertToAvailPage(a);b!=this._nCurrentPage&&(this._nCurrentPage=b)},_callAjax:function(a,b){var c=this;this.oAjax.option("onload",null),this.oAjax.option("onload",function(d){c._onAjaxResponse(d,a,b)}),this.oAjax.request(this._getQueryString(a))},_fireEventBefore:function(a){return this.fireEvent("beforeMove",{nPage:a,nCurrentPage:this.getCurrentPage()})},_fireEventEnd:function(a){typeof a=="undefined"&&(a=null);var b=this.getCurrentPage(),c=this.getPageItemIndex(b);return this.fireEvent("move",{nPage:this.getCurrentPage(),nStartIndex:c.nStart,nEndIndex:c.nEnd,oResponse:a})},_onAjaxResponse:function(a,b,c){this._move(b),c&&this._fireEventEnd(a),this.updateInfo(),this.updateNavigation()},_getQueryString:function(a){var b=this.option("htAjax").htQuery||{},c=this.getPageItemIndex(a);return b[this.option("htAjax").sPage]=a,b[this.option("htAjax").sDisplay]=Math.min(this.getItemPerPage(),this.getItemCount()-c.nStart),b},updateInfo:function(){if(!this._htWElement.elInfo)return;var a=this.getCurrentPage(),b=this.getPageItemIndex(a),c=this.option("sInfoTemplate").replace(/\{=PAGE\}/,a).replace(/\{=TOTALPAGE\}/,this.getTotalPages()).replace(/\{=ITEMCOUT\}/,this.option("nItem")).replace(/\{=STARTINDEX\}/,b.nStart+1).replace(/\{=ENDINDEX\}/,b.nEnd+1);this._htWElement.elInfo.html(c)},updateNavigation:function(){var a=this.getCurrentPage();!this._htWElement.elPrev||this._htWElement.elPrev.hide(),!this._htWElement.elNext||this._htWElement.elNext.hide(),this._htWElement.elPrevOff&&this._htWElement.elPrevOff.hide(),this._htWElement.elNextOff&&this._htWElement.elNextOff.hide();if(this.getTotalPages()==1)return;a==1?(!this._htWElement.elPrevOff||this._htWElement.elPrevOff.show("inline-block"),!this._htWElement.elNext||this._htWElement.elNext.show("inline-block")):a==this.getTotalPages()?(!this._htWElement.elNextOff||this._htWElement.elNextOff.show("inline-block"),!this._htWElement.elPrev||this._htWElement.elPrev.show("inline-block")):(!this._htWElement.elPrev||this._htWElement.elPrev.show("inline-block"),!this._htWElement.elNext||this._htWElement.elNext.show("inline-block"))},reset:function(a){typeof a=="undefined"&&(a=this.option("nItem")),this.setItemCount(a),this.movePageTo(1,!1)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},!this._htWElement.elNext||(this._htEvent.click_Next={ref:jindo.$Fn(this._onClickNext,this).attach(this._htWElement.elNext,"click"),el:this._htWElement.elNext.$value()}),!this._htWElement.elPrev||(this._htEvent.click_Prev={ref:jindo.$Fn(this._onClickPrev,this).attach(this._htWElement.elPrev,"click"),el:this._htWElement.elPrev.$value()})},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(0,a.indexOf("_")))}this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.CorePagination),jindo.m.PreventClickEvent=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,sClassPrefix:"evt-"}),this.option(b||{}),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_setWrapperElement:function(a){this._htWElement={},this._htWElement.target=jindo.$Element(a)},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},_attachEvents:function(){this._htEvent={},this._htEvent.prevent=jindo.$Fn(this._onPrevent,this).attach(this._htWElement.target,"touchstart")},_detachEvents:function(){this._htEvent.prevent.detach(this._htWElement.target,"touchstart"),this._htEvent.prevent=null},_onPrevent:function(a){var b=jindo.$Element(jindo.m.getNodeElement(a.element));if(!b.hasClass(this.option("sClassPrefix")+"except"))return a.stop(jindo.$Event.CANCEL_ALL),this.fireEvent("prevent",{wel:b}),!1;this.fireEvent("pass",{wel:b})},destroy:function(){this.deactivate();for(var a in this._htWElement)console.log(a),this._htWElement[a]=null;this._htWElement=null,this._htEvent=null}}).extend(jindo.m.UIComponent),jindo.m.RadioButton=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"frb-",sType:"v",bActivateOnload:!0,sUncheckBgColor:"transparent"}),this.option(b||{}),this._initVar(),this._setWrapperElement(a,this.option("sClassPrefix")),this._initRadioLoad(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this.$super._initVar("radio","radiobtn"),this._nPreSelectIdx=-1},_initRadioLoad:function(){var a=this._aWElFormList;for(var b=0;b<a.length;b++)if(a[b].$value().checked){this._setChecked(b);break}},_afterCheck:function(a,b){var c=-1;c=this._htWElement.container.indexOf(a),this._setChecked(c)},_onFormClick:function(a){var b=this._sUnitClass,c=jindo.$Element(a.element);c=c.parent(function(a){return a.hasClass(b)})[0];var d=c.attr("data-cb-checked");a.element.checked=d&&d=="on"?!0:!1,nIdx=this._htWElement.container.indexOf(c),a.element.checked&&this._nPreSelectIdx!=nIdx&&this._onCheck(a)},_setChecked:function(a){var b=this._aWElFormList[a].$value(),c=this._aWElUnitList[a];if(b.disabled)return!1;var d=this.option("sCheckBgColor"),e=null,f=null;this._nPreSelectIdx>-1&&(d=d?this.option("sUncheckBgColor"):null,e=this._aWElUnitList[this._nPreSelectIdx].$value(),f=this._aWElFormList[this._nPreSelectIdx].$value(),this._aWElUnitList[this._nPreSelectIdx].removeClass(this._sOnClass),f.checked=!1,d&&this._aWElUnitList[this._nPreSelectIdx].css("backgroundColor",d+" !important")),c.addClass(this._sOnClass),c.attr("data-cb-checked","on"),b.checked=!0,d=this.option("sCheckBgColor"),d&&c.css("backgroundColor",d+" !important"),this._nPreSelectIdx=a,this.fireEvent("checked",{elPreRadioButtonUnit:e,elPreRadioButton:f,elRadioButtonUnit:c.$value(),elRadioButton:b})},getCheckedValue:function(){var a="";return this._nPreSelectIdx>-1&&(this._aWElFormList[this._nPreSelectIdx].$value().disabled||(a=this._aWElFormList[this._nPreSelectIdx].$value().value)),a},setCheckedButton:function(a){var b=this._getFormIdx(a);b.length>0&&this._setChecked(b[0])},enable:function(a){var b=this._useSettingForm(a,!0);this.fireEvent("enable",{aRadioButtonList:b.aFormList,aRadioButtonUnitList:b.aUnitList})},disable:function(a){var b=this._useSettingForm(a,!1);this.fireEvent("disable",{aRadioButtonList:b.aFormList,aRadioButtonUnitList:b.aUnitList})},getElementByIndex:function(a){return{elRadioButton:this._aWElFormList[a].$value(),elRadioButtonUnit:this._aWElUnitList[a].$value()}},destroy:function(){this.$super.destroy()}}).extend(jindo.m.CheckRadioCore),jindo.m.RevealSidebarUI=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,nSildeThreshold:50,sDefaultArea:"main",htScrollOption:{},nSlideDuration:200,bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction()}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._initComponent(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oTransition=new jindo.m.Transition({bUseTimingFunction:this.option("bUseTimingFunction")}),this._sStatus=this.option("sDefaultArea"),this._oLeftLayoutInfo=null,this._oRightLayoutInfo=null,this._oLeftScroll=null,this._oRightScroll=null,this._oSize=jindo.m._clientSize(),this._bUseRebuild=!1,this.sTranOpen=null,this.sTranEnd=null,this._setTrans()},_setTrans:function(){this.option("bUseCss3d")?(this.sTranOpen="3d(",this.sTranEnd=",0)"):(this.sTranOpen="(",this.sTranEnd=")")},_setWrapperElement:function(a){this._htWElement={},a=jindo.$Element(a),this._htWElement.body=jindo.$Element(jindo.$$.getSingle(".rs-body")).css({overflow:"hidden"}),this._htWElement["body"].css("position")=="static"&&this._htWElement.body.css("position","relative"),this._bUseRebuild=this._htWElement.body.attr("markup")&&this._htWElement["body"].attr("markup").toUpperCase()=="DETAILED"?!1:!0,this._htWElement.main=jindo.$Element(this._htWElement.body.query(".rs-main")),this._bUseRebuild&&a&&!a.isEqual(this._htWElement.body)&&(this._htWElement.main.hide(),this._htWElement.main=a,this._htWElement.main.addClass("rs-main")),this._htWElement.main.css({position:"absolute",zIndex:10,left:0}),this._htWElement.left=jindo.$Element(this._htWElement.body.query(".rs-left")).css({position:"absolute",zIndex:5,left:0}).show(),this._htWElement.right=jindo.$Element(this._htWElement.body.query(".rs-right")).css({position:"absolute",zIndex:5,left:this.option("nSildeThreshold")+"px"}).show(),this._htWElement.blocker=jindo.$Element("<div style='position:absolute;opacity:0;display:none;z-index:1000;opacity:0;-webkit-tap-highlight-color:rgba(0,0,0,0)'>"),this._htWElement.blocker.appendTo(this._htWElement.body),this._oLeftLayoutInfo=this._setLayout(this._htWElement.left),this._oRightLayoutInfo=this._setLayout(this._htWElement.right)},resize:function(){this._oSize=jindo.m._clientSize(),this._htWElement.right.show(),this._htWElement.left.show();var a=this._getScrollSize(this._oLeftLayoutInfo),b=this._getScrollSize(this._oRightLayoutInfo),c=this._getPos(this._sStatus);this._htWElement.right.css("width",b.nWidth+"px"),this._htWElement.left.css("width",a.nWidth+"px"),this._htWElement.body.css({width:this._oSize.width+"px",height:this._oSize.height+"px"}),this._htWElement.blocker.css({width:this.option("nSildeThreshold")+"px",height:this._oSize.height+"px",left:this._sStatus=="left"?c+"px":"0px"}),this._htWElement.main.css({width:this._oSize.width+"px",height:this._oSize.height+"px"}).css(jindo.m.getCssPrefix()+"Transform","translate"+this.sTranOpen+c+"px,0px"+this.sTranEnd),this._oLeftScroll.option({nWidth:a.nWidth,nHeight:a.nHeight}),this._oRightScroll.option({nWidth:b.nWidth,nHeight:b.nHeight}),this._oLeftScroll.refresh(),this._oRightScroll.refresh();switch(this._sStatus){case"left":this._htWElement.right.hide();break;case"right":this._htWElement.left.hide();break;case"main":this._htWElement.left.hide(),this._htWElement.right.hide()}},_onRotate:function(a){this.resize()},_initComponent:function(){this._oLeftScroll=this._initScroll(this._oLeftLayoutInfo),this._oRightScroll=this._initScroll(this._oRightLayoutInfo)},_initScroll:function(a){return new jindo.m.Scroll(a.welWrapper,this.option("htScrollOption"))},_setLayout:function(a){var b=jindo.$Element(a.query(".rs-header")),c=jindo.$Element(a.query(".rs-footer")),d=jindo.$Element(a.query(".rs-content")),e=b&&b.attr("position")=="fixed",f=c&&c.attr("position")=="fixed",g=null;return this._bUseRebuild?g=this._arrangeDom({welContent:d,bHeaderFixed:e,bFooterFixed:f,welHeader:b,welFooter:c}):g=jindo.$Element(a.query(".scroller")),{welWrapper:g,welHeader:b,welFooter:c,bHeaderFixed:e,bFooterFixed:f}},_getScrollSize:function(a){var b=0,c=this._oSize.height,d=a.welWrapper.visible();return d||(b=wel.css("left"),a.welWrapper.css("left","-999px").show()),a.bHeaderFixed&&(c-=a.welHeader.height()),a.bFooterFixed&&(c-=a.welFooter.height()),d||a.welWrapper.css("left",b).hide(),{nWidth:this._oSize.width-this.option("nSildeThreshold"),nHeight:c}},_arrangeDom:function(a){return a.welContent.wrap("<div>").wrap("<div>"),welScroller=a.welContent.parent(),!a.bHeaderFixed&&a.welHeader&&welScroller.prepend(a.welHeader),!a.bFooterFixed&&a.welFooter&&welScroller.append(a.welFooter),welScroller.parent()},_slide:function(a,b){var c=this._getPos(a?"right":"left");self=this,b=typeof b=="undefined"?this.option("nSlideDuration"):b,this.fireEvent("beforeSlide",{sStatus:this._sStatus})&&(self._htWElement.blocker.show(),a?(this._htWElement.left.css("zIndex",5).hide(),this._htWElement.right.css("zIndex",6).show(),self._htWElement.blocker.css("left","0px"),this._sStatus="right"):(this._htWElement.right.css("zIndex",5).hide(),this._htWElement.left.css("zIndex",6).show(),self._htWElement.blocker.css("left",c+"px"),this._sStatus="left"),this._oTransition.queue(this._htWElement.main.$value(),b,{htTransform:{transform:"translate"+self.sTranOpen+c+"px,0px"+self.sTranEnd},fCallback:function(){self.fireEvent("slide",{sStatus:self._sStatus})}}).start())},_getPos:function(a){var b=parseInt(this._oSize.width-this.option("nSildeThreshold"),10);switch(a){case"left":break;case"main":b=0;break;case"right":b=-b}return b},move:function(a,b){b=typeof b=="undefined"?this.option("nSlideDuration"):b;switch(a){case"left":this._slide(!1,b);break;case"main":this.restore(b);break;case"right":this._slide(!0,b)}},toggleSlide:function(a){if(this._sStatus!="main"){this.restore();return}this._slide(a);return},restore:function(a){a=typeof a=="undefined"?this.option("nSlideDuration"):a;if(this.fireEvent("beforeRestore",{sStatus:this._sStatus})){var b=this;this._oTransition.queue(this._htWElement.main.$value(),a,{htTransform:{transform:"translate"+b.sTranOpen+"0px,0px"+b.sTranEnd},fCallback:function(){b._sStatus="main",b._htWElement.blocker.hide(),b._htWElement.left.hide(),b._htWElement.right.hide(),b.fireEvent("restore",{sStatus:b._sStatus})}}).start()}},_onActivate:function(){this._attachEvent(),this.resize(),this.move(this._sStatus,0)},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.restore=jindo.$Fn(this._onRestore,this).attach(this._htWElement.blocker,"click"),this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),jindo.m.bindRotate(this._htEvent.rotate)},_detachEvent:function(){this._htEvent.restore.detach(this._htWElement.blocker,"click"),jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onRestore:function(a){this.restore()},destroy:function(){this.deactivate(),this._oLeftScroll.destroy(),this._oLeftScroll=null,this._oRightScroll.destroy(),this._oRightScroll=null,this._oTransition.destroy(),this._oTransition=null}}).extend(jindo.m.UIComponent),jindo.m.Selectbox=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,sClassPrefix:"select-",sPlaceholder:"선택해주세요",nHeight:80,sItemTag:"li",nDefaultIndex:-1}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._init(),this.option("bActivateOnload")&&(this.activate(),this.select(this.option("nDefaultIndex")))},_initVar:function(){this._isNative=!1,this._oScroll=null,this._sClassPrefix=this.option("sClassPrefix"),this._aItems=null,this._nCurrentIdx=-1},_setWrapperElement:function(a){this._htWElement={},this._htWElement.base=jindo.$Element(a),this._htWElement.content=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"content")),this._htWElement.arrow=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"arrow")),this._htWElement.selectmenu=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"selectmenu"))},_init:function(){this._isNative=this._htWElement["selectmenu"].$value().tagName=="SELECT"?!0:!1,this._htWElement.base.css({position:"relative",display:"-webkit-box","-webkit-box-align":"center","-webkit-box-pack":"center","-webkit-tap-highlight-color":"rgba(0,0,0,0)"}),this._htWElement.content.css({display:"block",overflow:"hidden","text-overflow":"ellipsis",cursor:"pointer","text-align":"center",width:"90%"}),this._htWElement.arrow&&this._htWElement.arrow.css({position:"relative","text-align":"right",display:"block","text-algn":"right"}),this._htWElement.selectmenu.css({position:"absolute",left:"0px",margin:"0px",zIndex:100}),this._isNative?this._htWElement.selectmenu.css({opacity:"0",height:"100%","min-height":"100%",width:"100%"}):(this._htWElement.selectmenu.css({width:"100%"}).hide(),this._htWElement.selectmenu.first().css("width","100%"),this._oScroll=new jindo.m.CoreScroll(this._htWElement.selectmenu.$value(),{nHeight:this.option("nHeight"),bUseMomentum:!0,bUseHighlight:!1,bUseBounce:!0})),this._refreshItems()},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._isNative?this._htWElement.selectmenu.show():(this._htEvent.selectmenu=jindo.$Fn(this._onShow,this).attach(this._htWElement.base,"click"),this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart")),this._htEvent.select=jindo.$Fn(this._onSelect,this).attach(this._htWElement.selectmenu,this._isNative?"change":"click")},_detachEvent:function(){this._isNative?this._htWElement.selectmenu.hide():(this._htEvent.selectmenu.detach(this._htWElement.base,"click"),this._htEvent.document.detach(document,"touchstart")),this._htEvent.select.detach(this._htWElement.selectmenu,this._isNative?"change":"click"),this._htEvent=null},_onShow:function(a){this._showMenuForCustom()},_onSelect:function(a){if(this._isNative)this.select(a.element.selectedIndex);else{var b=jindo.$Element(a.element).parent();this.select(b.indexOf(a.element))}a.stop()},_onDocumentStart:function(a){if(this._htWElement.selectmenu.visible()){if(this._htWElement.selectmenu.isParentOf(a.element)||this._htWElement.selectmenu.isEqual(a.element))return!0;this._hideMenuForCustom()}},select:function(a){if(0<=a&&a<this._aItems.length){if(a!=this._nCurrentIdx&&this.fireEvent("beforeSelect",{nCurrentIdx:this._nCurrentIdx,sValue:this.getValue()})){if(this._isNative)this._aItems[a].selected=!0,this._setValue(this._aItems[a].value);else{var b=jindo.$Element(this._aItems[a]);this._aItems[this._nCurrentIdx]&&jindo.$Element(this._aItems[this._nCurrentIdx]).removeClass(this._sClassPrefix+"selected"),b.addClass(this._sClassPrefix+"selected"),this._setValue(b.text()),this._hideMenuForCustom()}var c=this._nCurrentIdx;this._nCurrentIdx=a,this.fireEvent("select",{nPrevIdx:c,sPrevValue:this.getValue(c),nCurrentIdx:this._nCurrentIdx,sValue:this.getValue()})}}else this._setValue(this.option("sPlaceholder"))},_showMenuForCustom:function(){if(!this._isNative&&!this._htWElement.selectmenu.visible()){this._htWElement.selectmenu.show();var a=jindo.$Element(this._htWElement.selectmenu.query(this.option("sItemTag"))).height();this._oScroll.refresh(),this._oScroll.scrollTo(0,this._nCurrentIdx<0?0:-this._nCurrentIdx*a),this._htEvent.selectmenu.detach(this._htWElement.base,"click")}},_hideMenuForCustom:function(){!this._isNative&&this._htWElement.selectmenu.visible()&&(this._htWElement.selectmenu.hide(),this._htEvent.selectmenu.attach(this._htWElement.base,"click"))},_refreshItems:function(){this._isNative?this._aItems=this._htWElement.selectmenu.$value().options:this._aItems=this._htWElement.selectmenu.queryAll(this.option("sItemTag"))},refresh:function(a){var b="",c=this._isNative?"option":this.option("sItemTag");for(var d=0,e=a.length;d<e;d++)b+="<",b+=c,b+=">",b+=a[d],b+="</",b+=c,b+=">";this._isNative?this._htWElement.selectmenu.html(b):this._htWElement.selectmenu.first().html(b),this._refreshItems(),this._nCurrentIdx=-1,this.select(this._nCurrentIdx)},_setValue:function(a){this._htWElement.content.text(a)},getCurrentIdx:function(){return this._nCurrentIdx},getValue:function(a){var b="";return a=typeof a=="undefined"?this._nCurrentIdx:a,0<=a&&a<this._aItems.length&&(this._isNative?b=this._aItems[a].value:b=jindo.$Element(this._aItems[a]).text()),b},disable:function(){var a=this._sClassPrefix+"disable";if(this._htWElement.base.hasClass(a))return;this._htWElement.base.addClass(a),this._isNative?this._htWElement.selectmenu.hide():(this._htWElement.selectmenu.hide(),this._htEvent.selectmenu.detach(this._htWElement.base,"click"))},enable:function(){var a=this._sClassPrefix+"disable";if(!this._htWElement.base.hasClass(a))return;this._htWElement.base.removeClass(this._sClassPrefix+"disable"),this._isNative?this._htWElement.selectmenu.show():this._htEvent.selectmenu.attach(this._htWElement.base,"click")},destroy:function(){this.deactivate(),this._oScroll&&this._oScroll.destroy()}}).extend(jindo.m.UIComponent),jindo.m.SlideTab=jindo.$Class({$init:function(a,b){this.option({nSlideDuration:200,sTimingFunction:"ease-in-out",nCountPerVeiw:3}),this.option(b||{}),this._initData(),this.option("bActivateOnload")&&(this.resize(),this.activate()),this.select(this.option("nDefaultIndex"))},_initVar:function(){this.$super._initVar(),this._nCurrentPage=1,this._nTotalPage=1,this._nPageWidth=0,this._aDummyTab=[],this._oEffect=null,this._isNext=null},_setWrapperElement:function(a){var b=this._sPrefix;this.$super._setWrapperElement(a),this._htWElement.tab_view=jindo.$Element(this._htWElement.baseElement.query("."+b+"tabview")),this._htWElement.tab_container=jindo.$Element(this._htWElement.baseElement.query("."+b+"tab-cont")),this._htWElement.prev=jindo.$Element(this._htWElement.baseElement.query("."+b+"prev")),this._htWElement.next=jindo.$Element(this._htWElement.baseElement.query("."+b+"next")),this._htWElement.baseElement.css("position","relative"),this._htWElement.tab_view.css("overflow","hidden")},_initData:function(){this.$super._initData();var a=this.option("nCountPerVeiw"),b=null,c;this._nTotalPage=parseInt(this._aTab.length/a,10),c=this._aTab.length%a,c>0&&this._nTotalPage++;for(var d=0,e=a-c;d<e;d++)b=jindo.$("<li></li>"),this._aDummyTab.push(jindo.$Element(b)),this._htWElement.tab_container.append(b);this._oEffect=new jindo.m.LayerEffect(this._htWElement.tab_container.$value())},getCurrentPage:function(){return this._nCurrentPage},getTotalPage:function(){return this._nTotalPage},resize:function(){var a,b=this._nPageWidth;this._nPageWidth=this._htWElement.tab_view.width()-this._htWElement.prev.width()-this._htWElement.next.width(),a=this._nPageWidth/this.option("nCountPerVeiw"),b>this._nPageWidth?(this._setTabWidth(a),this._htWElement.tab_container.width(this._nPageWidth*nthis._nTotalPage)):(this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage),this._setTabWidth(a)),this._htWElement.tab_container.css("left",(this._nCurrentPage-1)*-this._nPageWidth)},_setTabWidth:function(a){for(var b in this._aTab)this._aTab[b].width(a);for(b in this._aDummyTab)this._aDummyTab[b].width(a)},_fireEventBeforePrev:function(){return this.fireEvent("beforePrev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventPrev:function(){this.fireEvent("prev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventBeforeNext:function(){return this.fireEvent("beforeNext",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventNext:function(){this.fireEvent("next",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_onAfterSelect:function(a){this.select(this._getIdx(a))},_beforeSelect:function(a){},select:function(a){this.$super.select(a);var b=parseInt(a/~~this.option("nCountPerVeiw"),10)+1,c=b-this.getCurrentPage();c>0?this.next(c):c<0&&this.prev(-c)},_attachEvent:function(){this.$super._attachEvent(),this._htEvent.prev_click={ref:jindo.$Fn(this._onPrev,this).attach(this._htWElement.prev,"click"),el:this._htWElement.prev},this._htEvent.next_click={ref:jindo.$Fn(this._onNext,this).attach(this._htWElement.next,"click"),el:this._htWElement.next},this._oEffect.attach("afterEffect",jindo.$Fn(this._onAfterEffect,this).bind())},_detachEvent:function(){this._oEffect.detachAll(),this.$super._detachEvent()},_onAfterEffect:function(){this._isNext?(this._nCurrentPage++,this._fireEventNext()):(this._nCurrentPage--,this._fireEventPrev()),this._isNext=null,this.select((this._nCurrentPage-1)*this.option("nCountPerVeiw"))},_onPrev:function(a){if(this._oPanelEffect&&this._oPanelEffect.isPlaying())return a.stop(jindo.$Event.CANCEL_ALL),!1;this.prev()},prev:function(a){a=a||1;var b=this._nCurrentPage-a+1;b>1&&!this._oEffect.isPlaying()&&this._fireEventBeforePrev()&&(this._oEffect.slide({sDirection:"right",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth*a}),this._nCurrentPage=b,this._isNext=!1)},_onNext:function(a){if(this._oPanelEffect&&this._oPanelEffect.isPlaying())return a.stop(jindo.$Event.CANCEL_ALL),!1;this.next()},next:function(a){a=a||1;var b=this._nCurrentPage+a-1;b<this._nTotalPage&&!this._oEffect.isPlaying()&&this._fireEventBeforeNext()&&(this._oEffect.slide({sDirection:"left",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth*a}),this._nCurrentPage=b,this._isNext=!0)},destroy:function(){this.deactivate();for(var a in this._aDummyTab)this._aDummyTab[a]=null;this._aDummyTab=null,this._initVar(),this._oEffect&&(this._oEffect.destroy(),this._oEffect=null),this.$super.destroy()}}).extend(jindo.m.CoreTab),jindo.m.Slider=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"slider-",bVertical:!1,nMinValue:0,nMaxValue:100,nDefaultValue:0,bActivateOnload:!0}),this.option(b||{}),this._setWrapperElement(a),this._initVar(),this.option("bActivateOnload")&&(this.activate(),this.setValue(this.option("nDefaultValue")))},_initVar:function(){var a=this.option("bVertical")?0:6;a=jindo.m.getDeviceInfo().win?0:a,this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{nMoveGap:a,bActivateOnload:!1}),this._oTouch.attach({touchMove:jindo.$Fn(this._onMove,this).bind(),touchEnd:jindo.$Fn(this._onMove,this).bind(),touchStart:jindo.$Fn(this._onStart,this).bind()}),this._htSwap={left:this.option("bVertical")?"top":"left",width:this.option("bVertical")?"height":"width",nX:this.option("bVertical")?"nY":"nX"};var b=this._htWElement.thumb[this._htSwap.width]()/2;this._htWElement.thumb.css("margin-"+this._htSwap.left,b*-1)},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a);var b="."+this.option("sClassPrefix");this._htWElement.track=jindo.$Element(a);var c=jindo.$$.getSingle(b+"thumb",a);this._htWElement.thumb=c?jindo.$Element(c):null;var d=jindo.$$.getSingle(b+"range",a);this._htWElement.range=d?jindo.$Element(d):null},_onStart:function(a){var b={nValue:this.getValue(),nPosition:this.getPosition()};if(!this.fireEvent("touchStart",b))return;a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)},_onMove:function(a){a.sType=="touchMove"&&a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT);var b=a[this._htSwap.nX]-this._htWElement.track.offset()[this._htSwap.left]-this._htWElement.thumb[this._htSwap.width]()/2,c=this._getAdjustedPos(b);this._move(c),this.fireEvent(a.sType,{nValue:this.getValue(),nPosition:this.getPosition()})},_move:function(a,b){typeof b=="undefined"&&(b=!0);var c=this.getValue(a),d=Math.round(a),e=this.getValue(d),f={nValue:c,nPosition:a,nAdjustValue:e,nAdjustPosition:d};if(b&&!this._fireBeforeEvent(f))return;f.nAdjustValue!=e&&(f.nAdjustPosition=this._getPositionFromValue(f.nAdjustValue)),this._moveThumb(f.nAdjustPosition),b&&this._fireChangeEvent(f),this._htWElement.range&&this._htWElement.range.css(this._htSwap.width,f.nAdjustPosition+"%")},_fireBeforeEvent:function(a){return this.fireEvent("beforeChange",a)},_fireChangeEvent:function(a){this.fireEvent("change",a)},_moveThumb:function(a){if(a>100||a<0)return;this._htWElement.thumb.css("webkitTransitionDuration","0ms"),this._htWElement.thumb.css("webkitTransitionProperty",this._htSwap.left),this._htWElement.thumb.css(this._htSwap.left,a+"%")},_getTrackInfo:function(){var a=this.option("bVertical")?this._htWElement.track.height():this._htWElement.track.width(),b=this.option("bVertical")?this._htWElement.thumb.height():this._htWElement.thumb.width(),c=a-b/2;return{maxPos:c,max:this.option("nMaxValue")*1,min:this.option("nMinValue")*1}},getValue:function(a){typeof a=="undefined"&&(a=this.getPosition());var b=this._getTrackInfo(),c=b.min+(b.max-b.min)*(a/100);return c},setValue:function(a,b){a*=1;var c=this._getPositionFromValue(a);typeof b=="undefined"&&(b=!0),this._move(c,b)},_getAdjustedPos:function(a){var b=this._getTrackInfo(),c=a*100/b.maxPos;return c=Math.max(0,c),c=Math.min(c,100),c},getPosition:function(){var a=this._htWElement.thumb.css(this._htSwap.left);return a=="auto"?0:parseFloat(a,10)},setPosition:function(a,b){typeof b=="undefined"&&(b=!0),this._move(a,b)},_getPositionFromValue:function(a){var b=this._getTrackInfo(),c=(a-b.min)*100/(b.max-b.min);return c=isNaN(c)?100:c,c=Math.max(0,c),c=Math.min(100,c),c},_onClick:function(a){a.stop()},_attachEvent:function(){this._htEvent={}},_detachEvent:function(a){if(a){var b=this._htEvent[a];b.ref.detach(b.el,a)}},_onActivate:function(){this._attachEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null;for(a in this._htSwap)this._htSwap[a]=null;this._htSwap=null,this._oTouch.detachAll()}}).extend(jindo.m.UIComponent),jindo.m.Tab=jindo.$Class({$init:function(a,b){this.option({sMoreText:"더보기",nCountOnList:0}),this.option(b||{}),this._initData(),this.option("bActivateOnload")&&this.activate(),this.select(this.option("nDefaultIndex"))},_initVar:function(){this.$super._initVar(),this._isMore=!1,this._nCurrentMoreTab=-1},_initData:function(){this.$super._initData();var a=this.option("nCountOnList");a>0&&this._aTab.length>a&&this._makeMoreContainer(a)},_makeMoreContainer:function(a){this._htWElement.more_tab=jindo.$Element('<li class="'+this._sPrefix+'more-tab"><a style="display: block; height: 100%">'+this.option("sMoreText")+' <span class="'+this._sPrefix+'arrow-down"></span></a></li>'),this._htWElement.more_container_wrap=jindo.$Element('<div style="position:relative; width:100%;z-index:10">'),this._htWElement.more_container=jindo.$Element('<ul class="'+this._sPrefix+'more-cont" style="display:none; position: absolute">');for(var b=a,c=this._aTab.length;b<c;b++)this._tab2more(b);this._htWElement.more_container_wrap.append(this._htWElement.more_container),this._htWElement.more_tab.append(this._htWElement.more_container_wrap),this._htWElement.tab_container.append(this._htWElement.more_tab),this._htWElement.more_arrow=jindo.$Element(this._htWElement.more_tab.query("span")),this._nCurrentMoreTab=a-1,this._isMore=!0},_attachMoreContainerEvent:function(){this._htEvent.more_click={el:this._htWElement.more_container,ref:jindo.$Fn(this._onClickMore,this).attach(this._htWElement.more_container,"click")}},_onClickMore:function(a){if(this._isMore){var b=jindo.$Element(a.element),c=this._sPrefix+"more-li";b.hasClass(c)||(b=b.parent(function(a){return a.hasClass(c)},1)[0]),this.select(this._getIdx(b)),a.stop(jindo.$Event.CANCEL_BUBBLE)}},_tab2more:function(a){var b=this._htWElement.more_container.first(),c=!1,d;this._aTab[a].className(this._sPrefix+"more-li"),this._aTab[a].first().className(this._sPrefix+"more-lia");while(b){d=this._getIdx(b);if(d>a){b.before(this._aTab[a]),c=!0;break}b=b.next()}c||this._htWElement.more_container.append(this._aTab[a])},_more2tab:function(a){this._aTab[a].className(this._sPrefix+"tab"),this._aTab[a].first().className(this._sPrefix+"taba"),this._htWElement.more_tab.before(this._aTab[a]),this._nCurrentMoreTab=a},_onAfterSelect:function(a){if(a.hasClass(this._sPrefix+"more-tab")){var b=this._htWElement.more_container.visible();this._fireEventBefore(b?"beforeHide":"beforeShow")&&(this._htWElement.more_container.toggle(),this._htWElement.more_tab.toggleClass(this._sPrefix+"more-on"),this._htWElement.more_arrow.toggleClass(this._sPrefix+"arrow-down",this._sPrefix+"arrow-up"),this._fireEventBefore(b?"hide":"show"))}else this._hideMoreList(),this.select(this._getIdx(a))},_hideMoreList:function(){this._isMore&&this._fireEventBefore("beforeHide")&&(this._htWElement.more_container.hide(),this._htWElement.more_tab.removeClass(this._sPrefix+"more-on"),this._htWElement.more_arrow.className(this._sPrefix+"arrow-up"),this._fireEventBefore("hide"))},_beforeSelect:function(a){this._isMore&&a>=this.option("nCountOnList")-1&&this._nCurrentMoreTab!=a&&(this._hideMoreList(),this._tab2more(this._nCurrentMoreTab),this._more2tab(a))},_attachEvent:function(){this.$super._attachEvent(),this._isMore&&this._attachMoreContainerEvent()},_detachEvent:function(){this.$super._detachEvent()},destroy:function(){this.deactivate(),this.$super.destroy()}}).extend(jindo.m.CoreTab),jindo.m.TextArea=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,sClassPrefix:"fta-",bUseRadius:!1,sRadiusSize:"0.5em",bUseAutoHeight:!1,nExpandHeight:30,nMaxHeight:-1}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bUseRadius")&&this._applyRadiusStyle(this.option("sRadiusSize")),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._nTimer=-1,this._bTouchTextArea=!1,this._touchMoved=!1,this._sBeforeValue="",this._nInitHeight=-1},_setWrapperElement:function(a){this._htWElement={};var b=this.option("sClassPrefix");a=typeof a=="string"?jindo.$(a):a,this._htWElement.textarea=jindo.$Element(a),this._nInitHeight=this._htWElement.textarea.height()},_applyRadiusStyle:function(a){var b=jindo.m.getCssPrefix()+"BorderRadius",c={sCssName:a,borderRadius:a};this._htWElement.textarea.css(c),oCssFirstProperty=null},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent(),clearInterval(this._nTimer),this._nTimer=-1},_attachEvent:function(){this._htEvent={};var a=this._htWElement.textarea.$value();this._htEvent.textarea_focus={el:a,ref:jindo.$Fn(this._onFocus,this).attach(a,"focus")},this._htEvent.textarea_blur={el:a,ref:jindo.$Fn(this._onBlur,this).attach(a,"blur")}},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")+1))}this._htEvent=null},_onFocus:function(a){if(this._nTimer>-1)return;this._htWElement.textarea.addClass(this.option("sClassPrefix")+"textarea-focus"),this._nTimer=setInterval(jindo.$Fn(this._checkHeightAndExpand,this).bind(),10),this.fireEvent("focus",{elTextArea:this._htWElement.textarea.$value()})},_onBlur:function(a){if(this._nTimer==-1)return;clearInterval(this._nTimer),this._nTimer=-1,this._htWElement.textarea.removeClass(this.option("sClassPrefix")+"textarea-focus"),this.fireEvent("blur",{elTextArea:this._htWElement.textarea.$value()})},_checkHeightAndExpand:function(){var a=this._htWElement.textarea.$value().value;this._adjustHeight(),a!=this._sBeforeValue&&(this._sBeforeValue=a,this.fireEvent("change",{elTextArea:this._htWElement.textarea.$value()}))},_adjustHeight:function(){var a=this._htWElement.textarea.$value(),b=this.option("nExpandHeight"),c=a.clientHeight,d=a.scrollHeight,e=this.option("nMaxHeight"),f=this._sBeforeValue.split("\n").length,g=a.value.split("\n").length,h=parseInt(this._htWElement.textarea.css("line-height"),10),i=0;if(f>g){if(this.option("bUseAutoHeight")){i=h*g;if(e!=-1&&i>e)return;this._nInitHeight<=i?a.style.height=i+"px":a.style.height=this._nInitHeight+"px"}}else f<g&&d>c&&(i=d+b,e==-1||i<=e?(a.style.height=i+"px",this.fireEvent("expand",{elTextArea:this._htWElement.textarea.$value()})):(e==-1||i>e)&&d!=e&&(a.style.height=e+"px",this.fireEvent("expand",{elTextArea:this._htWElement.textarea.$value()})))},_expandHeight:function(){var a=this._htWElement.textarea.$value(),b=this.option("nMaxHeight"),c=this.option("nExpandHeight"),d=parseInt(a.scrollHeight,10),e=parseInt(a.style.height,10);nNewHeight=d+c;if(b>0&&e==b)return;b>0&&nNewHeight>b?(a.style.height=b+"px",typeof this._htEventHandler["change"]=="undefined"&&clearInterval(this._nTimer)):a.style.height=nNewHeight+"px"},getValue:function(){return this._htWElement.textarea.$value().value},setValue:function(a){this._htWElement.textarea.$value().value=a,this._checkHeightAndExpand()},deleteValue:function(){this._htWElement.textarea.$value().value=""},enable:function(){var a=this._htWElement.textarea.$value();a.disabled=!1,this._htWElement.textarea.removeClass(this.option("sClassPrefix")+"textarea-disable"),this.fireEvent("enable",{elTextArea:a})},disable:function(){var a=this._htWElement.textarea.$value();a.disabled=!0,this._htWElement.textarea.addClass(this.option("sClassPrefix")+"textarea-disable"),this.fireEvent("disable",{elTextArea:a})},setExpandHeight:function(a){this.option("nExpandHeight",a)},getExpandHeight:function(){return this.option("nExpandHeight")},setMaxHeight:function(a){this.option("nMaxHeight",a);var b=this._htWElement.textarea.$value(),c=b.scrollHeight;a>0&&c>a&&(b.style.height=a+"px")},getMaxHeight:function(){return this.option("nMaxHeight")},destroy:function(){this.deactivate(),this._oTimer&&(clearInterval(this._oTimer),this._oTimer=null);for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._bTouchTextArea=null,this._touchMoved=null}}).extend(jindo.m.UIComponent),jindo.m.Validation=jindo.$Class({$init:function(){},$static:{_htValidator:{},_htValidatorType:{email:"jindo.m.EmailValidator",url:"jindo.m.UrlValidator",tel:"jindo.m.TelValidator",date:"jindo.m.DateValidator",number:"jindo.m.NumberValidator",currency:"jindo.m.CurrencyValidator",require:"jindo.m.RequireValidator"},_createValidator:function(sType){jindo.m.Validation._htValidatorType[sType]&&!jindo.m.Validation._htValidator[sType]&&(jindo.m.Validation._htValidator[sType]=eval("new "+jindo.m.Validation._htValidatorType[sType]+"()"))},add:function(a,b){jindo.m.Validation._htValidatorType[a]=b},remove:function(a){delete jindo.m.Validation._htValidatorType[a]},_parse:function(a){var b=a.split(";"),c,d,e={};for(var f=0,g=b.length;f<g;f++){var h=b[f].split(":");h&&(c=h[0],d=h.length>1?h[1]:null,e[c]=e[c]||d,jindo.m.Validation._createValidator(c))}return e},validate:function(a,b){var c,d=jindo.m.Validation._parse(a);if("require"in d){c=jindo.m.Validation._htValidator.require.validate(b);if(!c.bValid)return{bValid:!1,sType:"require",sPreValue:b};delete d.require}if(jindo.$S(b).trim()=="")return null;for(var e in d){c=jindo.m.Validation._htValidator[e].validate(b,d[e]);if(!c.bValid)return c.sType=e,c.sPreValue=b,c}return c.bValid=!0,c.sPreValue=b,c}}}),jindo.m.TextInput=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"fit-",bUseValidate:!1,bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._init(),this.option("bActivateOnload")&&this.activate()},$static:{INDEX_ATTR:"data-index",VALIDATE_ATTR:"data-validate"},_initVar:function(){this._aTextInput=[],this._sPreValue=null,this._nWatcher=null,this._sClickEvent=jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().android?"touchstart":"mousedown",this._nFocusTimer=null,this._nBlurTimer=null},_setWrapperElement:function(a){this._htWElement={},this._htWElement.baseElement=jindo.$Element(a)},_init:function(){var a,b,c,d,e,f=[];e=this._htWElement.baseElement.queryAll("."+this.option("sClassPrefix")+"textinput-unit");for(var g=0,h=e.length;g<h;g++)a=jindo.$Element(e[g]),a.attr(jindo.m.TextInput.INDEX_ATTR,g).css("position","relative"),b=jindo.$Element(a.query("input")),b.attr(jindo.m.TextInput.INDEX_ATTR,g),c=a.query("."+this.option("sClassPrefix")+"clear-btn"),c&&(c=jindo.$Element(c),c.attr(jindo.m.TextInput.INDEX_ATTR,g).css({position:"absolute",zIndex:100,cursor:"pointer",right:"0px",top:"0px"}).hide()),this._aTextInput.push({welUnit:a,welInput:b,welDel:c})},_attachEvent:function(){this._htEvent={},this._htEvent.focus=jindo.$Fn(this._onFocus,this),this._htEvent.blur=jindo.$Fn(this._onBlur,this),this._htEvent.clear=jindo.$Fn(this._onClear,this);for(var a=0,b=this._aTextInput.length;a<b;a++)this._attachUnitEvent(this._aTextInput[a])},_attachUnitEvent:function(a){this._htEvent.focus.attach(a.welInput,"focus"),this._htEvent.blur.attach(a.welInput,"blur"),a.welDel&&this._htEvent.clear.attach(a.welDel,this._sClickEvent)},_detachEvent:function(){for(var a=0,b=this._aTextInput.length;a<b;a++)this._detachUnitEvent(this._aTextInput[a]);for(var c in this._htEvent)this._htEvent[c]=null;this._htEvent=null},_detachUnitEvent:function(a){this._htEvent.focus.detach(a.welInput,"focus"),this._htEvent.blur.detach(a.welInput,"blur"),a.welDel&&this._htEvent.clear.detach(a.welDel,this._sClickEvent)},_displayClearBtn:function(a){var b=this.getIndex(a),c=this._aTextInput[b].welDel;if(!c)return;jindo.$S(a.$value().value).trim()!=""?!c.visible()&&this.fireEvent("beforeShowClearBtn",{nIndex:b,welClearBtn:c})&&(c.show(),this.fireEvent("showClearBtn",{nIndex:b,welClearBtn:c})):c.visible()&&this.fireEvent("beforeHideClearBtn",{nIndex:b,welClearBtn:c})&&(c.hide(),this.fireEvent("hideClearBtn",{nIndex:b,welClearBtn:c}))},_validate:function(a){var b=a.attr(jindo.m.TextInput.VALIDATE_ATTR);if(!b)return;var c=a.$value().value,d=jindo.m.Validation.validate(b,c),e=this.getIndex(a);d&&(typeof d.sCorrectedValue!="undefined"&&d.sCorrectedValue!==null&&(a.$value().value=this._sPreValue=d.sCorrectedValue),this.fireEvent(d.bValid?"valid":"invalid",{htValidate:d,htTextInput:this._aTextInput[e],nIndex:e}))},_onFocus:function(a){var b=this.getIndex(a.element),c=this;jindo.m.getDeviceInfo().android?(clearTimeout(this._nFocusTimer),this._nFocusTimer=setTimeout(function(){c._processFocus(b)},100)):c._processFocus(b)},_processFocus:function(a){var b=this._aTextInput[a],c=b.welUnit,d=this.option("sClassPrefix")+"focus";c.hasClass(d)||c.addClass(d),this._runWatcher(b.welInput),this.fireEvent("focus",{nIndex:a,htTextInput:b})},_onBlur:function(a){var b=this.getIndex(a.element),c=this;jindo.m.getDeviceInfo().android?(clearTimeout(this._nBlurTimer),this._nBlurTimer=setTimeout(function(){c._processBlur(b)},100)):c._processBlur(b)},_processBlur:function(a){this._aTextInput[a].welUnit.removeClass(this.option("sClassPrefix")+"focus"),this._stopWatcher();if(this.option("bUseValidate")){var b=this._aTextInput[a].welInput;this._validate(b),this._displayClearBtn(b)}this.fireEvent("blur",{nIndex:a,htTextInput:this._aTextInput[a]})},_onClear:function(a){var b=jindo.$Element(a.element);return nIndex=this.getIndex(b),welInput=this._aTextInput[nIndex].welInput,htInfo=jindo.m.getDeviceInfo(),nVersion=parseInt(htInfo.version,10),welInput.$value().value="",htInfo.android&&nVersion===3?(this._detachUnitEvent(this._aTextInput[nIndex]),welInput.$value().blur(),welInput.$value().focus(),this._attachUnitEvent(this._aTextInput[nIndex])):!htInfo.android&&nVersion>4&&(welInput.$value().blur(),welInput.$value().focus()),this._displayClearBtn(welInput),this.fireEvent("clear",{nIndex:nIndex,htTextInput:this._aTextInput[nIndex]}),a.stop(jindo.$Event.CANCEL_ALL),!1},_runWatcher:function(a){var b=this,c=null;this._stopWatcher(),this._nWatcher=setInterval(function(){b._onChange(a)},100)},_stopWatcher:function(){clearInterval(this._nWatcher),this._nWatcher=null,this._sPreValue=null},_onChange:function(a){var b=a.$value().value;this._sPreValue!=b?(this._sPreValue=b,this.fireEvent("change",{sPreValue:b,welInput:a,nIndex:this.getIndex(a)}),this._displayClearBtn(a)):this._displayClearBtn(a)},_getTextInputList:function(a){var b=[];if(a)if(a instanceof Array)for(var c=0,d=a.length;c<d;c++)b.push(jindo.$Element(a[c]));else b.push(jindo.$Element(a));else for(var c=0,d=this._aTextInput.length;c<d;c++)b.push(this._aTextInput[c].welUnit);return b},_useSettingUnit:function(a,b){var c=this;this._stopWatcher();var d=this._getTextInputList(a);jindo.m.getDeviceInfo().android?setTimeout(function(){c._useSettingUnitCore(d,b)},100):c._useSettingUnitCore(d,b)},_useSettingUnitCore:function(a,b){for(var c=0,d=a.length;c<d;c++)b?this._enableElement(a[c]):this._disableElement(a[c]);this.fireEvent(b?"enable":"disable",{aTextInputUnit:a})},_enableElement:function(a){var b=this.getIndex(a),c=this._aTextInput[b].welInput;this._detachUnitEvent(this._aTextInput[b]),this._attachUnitEvent(this._aTextInput[b]),a.removeClass(this.option("sClassPrefix")+"disable"),c.$value().disabled=!1,this._displayClearBtn(c)},_disableElement:function(a){var b=this.getIndex(a),c=this._aTextInput[b].welInput,d=this._aTextInput[b].welDel;this._detachUnitEvent(this._aTextInput[b]),a.addClass(this.option("sClassPrefix")+"disable"),c.$value().disabled=!0,d&&d.hide()},enable:function(a){this.isActivating()&&this._useSettingUnit(a,!0)},disable:function(a){this.isActivating()&&this._useSettingUnit(a,!1)},getElement:function(a){if(a<this._aTextInput.length&&a>=0)return this._aTextInput[a].welUnit},getInputElement:function(a){if(a<this._aTextInput.length&&a>=0)return this._aTextInput[a].welInput},getDelElement:function(a){if(a<this._aTextInput.length&&a>=0)return this._aTextInput[a].welDel},getIndex:function(a){return parseInt(jindo.$Element(a).attr(jindo.m.TextInput.INDEX_ATTR),10)},getLength:function(){return this._aTextInput.length},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent(),this._stopWatcher()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.ToggleSlider=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"tslider-",bUseDrag:!0,bActivateOnload:!0,nOnPosition:50,nOffPosition:0,bStatus:!0,nDuration:100}),this.option(b||{}),this._setWrapperElement(a),this._initVar(),this.option("bActivateOnload")&&(this.activate(),this.option("bStatus")?(this.bStatusOn=!1,this._move(!0,!1)):(this.bStatusOn=!0,this._move(!1,!1)))},_initVar:function(){this._htWElement.track?(this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{nSlopeThreshold:1,nMoveGap:2,bActivateOnload:!1}),this._oTouch.attach({touchMove:jindo.$Fn(this._onMove,this).bind(),touchEnd:jindo.$Fn(this._onEnd,this).bind(),touchStart:jindo.$Fn(this._onStart,this).bind()})):this._oTouch=null,this.bMove=!1,this.bStatusOn=this.option("bStatus"),this.htInfo={nMax:Math.max(this.option("nOnPosition"),this.option("nOffPosition")),nMin:Math.min(this.option("nOnPosition"),this.option("nOffPosition")),nGap:Math.round(Math.abs((this.option("nOnPosition")-this.option("nOffPosition"))/2))},this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._bFireChange=!1},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a);var b="."+this.option("sClassPrefix");this._htWElement.base=jindo.$Element(a);var c=a?jindo.$$("[name="+this.option("sClassPrefix")+"radio]",a):null;this._htWElement.aRadio=jindo.$A(c).forEach(function(a,b,c){c[b]=jindo.$Element(a)}).$value(),this._htWElement.track=a?jindo.$Element(jindo.$$.getSingle(b+"track",a)):null,this._htWElement.thumb=a?jindo.$Element(jindo.$$.getSingle(b+"thumb",a)):null},_onStart:function(a){a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)},_onMove:function(a){if(!this.option("bUseDrag"))return;a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),this.bMove=!0;var b=a.nDistanceX,c=this._getAdjustedPos(b);this._moveThumb(c)},_onEnd:function(a){if(a.sMoveType=="tap")this.toggle();else if(this.bMove){var b=this.isOn()?this.option("nOnPosition"):this.option("nOffPosition"),c=this._getPosition();Math.abs(b-c)>this.htInfo.nGap?this.toggle():this._move(this.isOn(),!1)}else this.toggle();this.bMove=!1},_move:function(a,b){typeof b=="undefined"&&(b=!0);var c=this.option("nOffPosition");if(b&&!this.fireEvent("beforeChange",{bOn:this.isOn()}))return!1;a&&(c=this.option("nOnPosition")),this._bFireChange=b,this.bStatusOn=a,this._moveThumb(c,this.option("nDuration")),this._updateForm()},toggle:function(){this.isOn()?this.off():this.on()},on:function(){this.isOn()||this._move(!0)},off:function(){this.isOn()&&this._move(!1)},isOn:function(){return this.bStatusOn},_updateForm:function(){if(!this._htWElement.aRadio)return;var a=this.isOn()?"on":"off";for(var b=0,c=this._htWElement.aRadio.length;b<c;b++){var d=this._htWElement.aRadio[b];d.$value().value==a?d.$value().checked=!0:d.$value().checked=!1}},_moveThumb:function(a,b){if(a>this.htInfo.nMax||a<this.htInfo.nMin)return;typeof b=="undefined"&&(b=0);var c=parseInt(this._htWElement.thumb.css("left"),10);b>0&&c!==a&&this._attachTransitionEnd(),this._htWElement.thumb&&(this._htWElement.thumb.css("webkitTransitionDuration",b+"ms"),this._htWElement.thumb.css("webkitTransitionProperty","left"),this._htWElement.thumb.css("left",a+"%")),(b===0||c===a)&&this._onTransitionEnd()},_onTransitionEnd:function(){this._detachTransitionEnd(),this._bFireChange&&this.fireEvent("change",{bOn:this.isOn()}),this._bFireChange=!1},_attachTransitionEnd:function(){jindo.m.attachTransitionEnd(this._htWElement.thumb.$value(),this._wfTransitionEnd)},_detachTransitionEnd:function(){jindo.m.detachTransitionEnd(this._htWElement.thumb.$value(),this._wfTransitionEnd)},_getAdjustedPos:function(a){var b=Math.round(a*100/this._htWElement.track.width());return b+=this.isOn()?this.option("nOnPosition"):this.option("nOffPosition"),b=Math.max(this.htInfo.nMin,b),b=Math.min(this.htInfo.nMax,b),b},_getPosition:function(){var a=this._htWElement.thumb.css("left");return a=="auto"?0:parseInt(a,10)},_onClick:function(a){a.stop(jindo.$Event.CANCEL_DEFAULT)},_attachEvent:function(){this._htEvent={},this._htEvent.click={ref:jindo.$Fn(this._onClick,this).attach(this._htWElement.thumb,"click"),el:this._htWElement.thumb}},_detachEvent:function(a){if(a){var b=this._htEvent[a];b.ref.detach(b.el,a)}},_onActivate:function(){this._attachEvent(),this._oTouch&&this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch&&this._oTouch.deactivate()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._oTouch.detachAll(),this._oTouch=null,this.bMove=null,this.bStatusOn=null,this._wfTransitionEnd=null,this._bFireChange=null}}).extend(jindo.m.UIComponent)
})("jindo");